/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"index": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/index.js","vendors~index~screen","vendors~index","index~screen"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/css/index.scss":
/*!****************************!*\
  !*** ./src/css/index.scss ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3NzL2luZGV4LnNjc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY3NzL2luZGV4LnNjc3M/ZWM2NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/css/index.scss\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js-exposed\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jquery_transit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery.transit */ \"./node_modules/jquery.transit/jquery.transit.js\");\n/* harmony import */ var jquery_transit__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery_transit__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var pxloader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pxloader */ \"./node_modules/pxloader/PxLoader.js-exposed\");\n/* harmony import */ var pxloader__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pxloader__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var pxloader_PxLoaderImage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! pxloader/PxLoaderImage */ \"./node_modules/pxloader/PxLoaderImage.js\");\n/* harmony import */ var pxloader_PxLoaderImage__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(pxloader_PxLoaderImage__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var base_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! base.js */ \"./src/js/base/base.js\");\n/* harmony import */ var base_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(base_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var com_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! com.js */ \"./src/js/base/com.js\");\n/* harmony import */ var com_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(com_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var audio_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! audio.js */ \"./src/js/base/audio.js\");\n/* harmony import */ var audio_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(audio_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var math_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! math.js */ \"./src/js/base/math.js\");\n/* harmony import */ var monitor_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! monitor.js */ \"./src/js/base/monitor.js\");\n/* harmony import */ var monitor_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(monitor_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _css_common_css__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./css/common.css */ \"./src/css/common.css\");\n/* harmony import */ var _css_common_css__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_css_common_css__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _css_index_scss__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./css/index.scss */ \"./src/css/index.scss\");\n/* harmony import */ var _css_index_scss__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_css_index_scss__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _js_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./js/index.js */ \"./src/js/index.js\");\n/* harmony import */ var _js_index_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_js_index_js__WEBPACK_IMPORTED_MODULE_11__);\n// 默认模板\n\n\n\n\n\nibase.init({\n  dir: 'portrait',\n  lock: true\n});\n\n\n\n\n\n\n // 横屏模板\n// import 'jquery'\n// import 'jquery.transit'\n// import 'base.js'\n// ibase.init({dir:'portrait',lock:true});\n// import 'pxloader'\n// import 'pxloader/PxLoaderImage'\n// import 'com.js'\n// import 'audio.js'\n// import 'math.js'\n// import './css/common.landscape.css'\n// import './css/index.landscape.scss'\n// import './js/index.landscape.js'//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy8g6buY6K6k5qih5p2/XHJcbmltcG9ydCAnanF1ZXJ5J1xyXG5pbXBvcnQgJ2pxdWVyeS50cmFuc2l0J1xyXG5pbXBvcnQgJ3B4bG9hZGVyJ1xyXG5pbXBvcnQgJ3B4bG9hZGVyL1B4TG9hZGVySW1hZ2UnXHJcbmltcG9ydCAnYmFzZS5qcydcclxuaWJhc2UuaW5pdCh7ZGlyOidwb3J0cmFpdCcsbG9jazp0cnVlfSk7XHJcbmltcG9ydCAnY29tLmpzJ1xyXG5pbXBvcnQgJ2F1ZGlvLmpzJ1xyXG5pbXBvcnQgJ21hdGguanMnXHJcbmltcG9ydCAnbW9uaXRvci5qcydcclxuaW1wb3J0ICcuL2Nzcy9jb21tb24uY3NzJ1xyXG5pbXBvcnQgJy4vY3NzL2luZGV4LnNjc3MnXHJcbmltcG9ydCAnLi9qcy9pbmRleC5qcydcclxuLy8g5qiq5bGP5qih5p2/XHJcbi8vIGltcG9ydCAnanF1ZXJ5J1xyXG4vLyBpbXBvcnQgJ2pxdWVyeS50cmFuc2l0J1xyXG4vLyBpbXBvcnQgJ2Jhc2UuanMnXHJcbi8vIGliYXNlLmluaXQoe2RpcjoncG9ydHJhaXQnLGxvY2s6dHJ1ZX0pO1xyXG4vLyBpbXBvcnQgJ3B4bG9hZGVyJ1xyXG4vLyBpbXBvcnQgJ3B4bG9hZGVyL1B4TG9hZGVySW1hZ2UnXHJcbi8vIGltcG9ydCAnY29tLmpzJ1xyXG4vLyBpbXBvcnQgJ2F1ZGlvLmpzJ1xyXG4vLyBpbXBvcnQgJ21hdGguanMnXHJcbi8vIGltcG9ydCAnLi9jc3MvY29tbW9uLmxhbmRzY2FwZS5jc3MnXHJcbi8vIGltcG9ydCAnLi9jc3MvaW5kZXgubGFuZHNjYXBlLnNjc3MnXHJcbi8vIGltcG9ydCAnLi9qcy9pbmRleC5sYW5kc2NhcGUuanMnIl0sIm1hcHBpbmdzIjoiQUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/js/base/audio.js":
/*!******************************!*\
  !*** ./src/js/base/audio.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("//2018.9.25\nvar iaudio = importAudio();\n\nfunction importAudio() {\n  var audio = {};\n  var webAudioContext = window.webkitAudioContext || window.AudioContext; //\tconsole.log(webAudioContext);\n\n  audio.on = function (list, options) {\n    if (list.length > 0) {\n      this.soundList = {};\n      this.soundMax = 0;\n      this.soundLoaded = 0;\n      this.webAudio = 0;\n\n      if (options) {\n        this.onProgress = options.onProgress;\n        this.onLoadComplete = options.onLoadComplete;\n        this.webAudio = options.webAudio || 0;\n      } //end if\n\n\n      console.log(this.webAudio ? 'web audio mode' : 'local audio mode');\n\n      for (var i = 0; i < list.length; i++) {\n        var defaults = {\n          src: '',\n          volume: 1,\n          loop: 0,\n          autoplay: 0,\n          continuePlay: 0,\n          currentTime: 0\n        };\n        var opts = $.extend(defaults, list[i]);\n\n        if (opts.src != '') {\n          var str1 = opts.src.split('/');\n          var name = str1[str1.length - 1].split('.')[0];\n          var option = {\n            src: opts.src,\n            volume: opts.volume,\n            loop: opts.loop,\n            autoplay: opts.autoplay,\n            continuePlay: opts.continuePlay,\n            currentTime: opts.currentTime,\n            onListLoaded: this.onListLoaded,\n            onLoaded: opts.onLoaded,\n            onEnded: opts.onEnded,\n            onPlay: opts.onPlay,\n            onPause: opts.onPause,\n            onTimeupdate: opts.onTimeupdate\n          };\n          if (this.webAudio) this.soundList[name] = new webAudio(option);else this.soundList[name] = new localAudio(option);\n        } //edn if\n\n      } //end for\n\n\n      this.soundMax = Object.keys(this.soundList).length;\n      console.log('sound length:' + this.soundMax);\n      return this.soundList;\n    } //edn if\n\n  }; //end func\n\n\n  audio.onListLoaded = function () {\n    var _this = audio;\n    _this.soundLoaded++;\n    if (_this.onProgress) _this.onProgress(_this.soundLoaded / _this.soundMax);\n\n    if (_this.soundLoaded == _this.soundMax) {\n      console.log(_this.soundLoaded + ' sounds load complete');\n      if (_this.onLoadComplete) _this.onLoadComplete();\n    } //end if\n\n  }; //end func\n\n\n  function localAudio(opts) {\n    var _this = this;\n\n    this.autoplay = opts.autoplay;\n    this.onListLoaded = opts.onListLoaded;\n    this.onLoaded = opts.onLoaded;\n    this.onEnded = opts.onEnded;\n    this.onPlay = opts.onPlay;\n    this.onPause = opts.onPause;\n    this.onTimeupdate = opts.onTimeupdate;\n    this.loaded = 0;\n    this.played = 0;\n    this.ended = 0;\n    this.audio = new Audio();\n    this.audio.src = opts.src;\n    this.audio.volume = opts.volume;\n    this.audio.currentTime = opts.currentTime;\n    this.audio.loop = opts.loop; //如果loop设置成true就无法正确获得ended事件\n\n    this.audio.load();\n    this.audio.addEventListener('loadeddata', init, false);\n    this.audio.addEventListener('ended', onEnded, false);\n    if (this.onListLoaded) this.audio.addEventListener('loadeddata', this.onListLoaded, false);\n    if (this.onLoaded) this.audio.addEventListener('loadeddata', this.onLoaded, false);\n    if (this.onPlay) this.audio.addEventListener('play', this.onPlay, false);\n    if (this.onPause) this.audio.addEventListener('pause', this.onPause, false);\n    if (this.onTimeupdate) this.audio.addEventListener('timeupdate', this.onTimeupdate, false);\n\n    function init(event) {\n      _this.loaded = 1;\n      if (_this.autoplay) _this.play();\n    } //end func\n\n\n    function onEnded(event) {\n      _this.ended = 1;\n      _this.played = 0;\n      if (_this.onEnded) _this.onEnded();\n    } //end func\n\n  } //end func\n\n\n  localAudio.prototype.src = function () {\n    return this.audio.src;\n  }; //end func\n\n\n  localAudio.prototype.loop = function (loop) {\n    if (loop != null) this.audio.loop = loop;else return this.audio.loop;\n  }; //end func\n\n\n  localAudio.prototype.duration = function () {\n    return this.audio.duration;\n  }; //end func\n\n\n  localAudio.prototype.muted = function (muted) {\n    if (muted != null) this.audio.muted = muted;else return this.audio.muted;\n  }; //end func\n\n\n  localAudio.prototype.volume = function (volume) {\n    if (volume != null) this.audio.volume = volume;else return this.audio.volume;\n  }; //end func\n\n\n  localAudio.prototype.currentTime = function (currentTime) {\n    if (currentTime != null && currentTime > 0) this.audio.currentTime = currentTime * 0.001;else return this.audio.currentTime * 1000;\n  }; //end func\n\n\n  localAudio.prototype.play = function (currentTime) {\n    if (currentTime != null && currentTime >= 0) this.audio.currentTime = currentTime * 0.001;\n    this.played = 1;\n    this.ended = 0;\n    this.audio.play(); //\t\tconsole.log(get_src(this.src)+' play');\n  }; //end func\n\n\n  localAudio.prototype.pause = function () {\n    this.played = 0;\n    this.audio.pause(); //  \tconsole.log(get_src(this.src)+' pause');\n  }; //end func\n\n\n  function webAudio(opts) {\n    this.context = new (window.AudioContext || window.webkitAudioContext)();\n    /* 创建一个 AudioContext */\n\n    this.gainNode = this.context.createGain();\n    this.buffer = null;\n    this.source = null;\n    this.src = opts.src;\n    this.volume = opts.volume;\n    this.loop = opts.loop;\n    this.autoplay = opts.autoplay;\n    this.continuePlay = opts.continuePlay;\n    this.nowTime = opts.currentTime;\n    this.startTime = 0;\n    this.onListLoaded = opts.onListLoaded;\n    this.onLoaded = opts.onLoaded;\n    this.onEnded = opts.onEnded;\n    this.onPlay = opts.onPlay;\n    this.onPause = opts.onPause;\n    this.onTimeupdate = opts.onTimeupdate;\n    this.loaded = 0;\n    this.played = 0;\n    this.ended = 0;\n    this.load();\n  } //end func\n\n\n  webAudio.prototype.load = function () {\n    var _this = this;\n\n    var xhr = new XMLHttpRequest();\n    /*一个新的 XHR 对象 */\n\n    xhr.open('GET', this.src, true);\n    /* 通过 GET 请连接到 .mp3 */\n\n    xhr.responseType = 'arraybuffer';\n    /* 设置响应类型为字节流 arraybuffer */\n\n    xhr.onload = function (e) {\n      console.log(get_src(_this.src) + ' loaded');\n      _this.loaded = 1;\n      if (_this.onListLoaded) _this.onListLoaded();\n      if (_this.onLoaded) _this.onLoaded(_this);\n      init(this.response);\n    };\n\n    xhr.send();\n\n    function init(arrayBuffer) {\n      _this.context.decodeAudioData(arrayBuffer, function (buffer) {\n        _this.buffer = buffer;\n        /* 将 buffer 传入解码 AudioBuffer. */\n\n        if (_this.autoplay) _this.play();\n      }, function (e) {\n        console.log('Error decoding file', e);\n      });\n    } //edn func\n\n  }; //edn prototype\n\n\n  webAudio.prototype.muted = function (muted) {\n    if (muted != null) {\n      this.gainNode.gain.value = muted ? -1 : 1;\n    } //edn if\n    else return this.gainNode.gain.value == -1 ? true : false;\n  }; //end prototype\n  //在手机浏览器里，webaudio可以调节音量,audio目前还不行\n\n\n  webAudio.prototype.volume = function (volume) {\n    if (volume != null) {\n      volume = Math.max(-1, Math.min(volume, 1));\n      this.gainNode.gain.value = volume;\n    } //ened if\n    else return this.gainNode.gain.value;\n  }; //end prototype\n\n\n  webAudio.prototype.currentTime = function (currentTime) {\n    if (currentTime != null && currentTime >= 0) this.nowTime = currentTime * 0.001;else return this.nowTime * 1000;\n  }; //end func\n\n\n  webAudio.prototype.play = function (currentTime) {\n    if (currentTime != null && currentTime >= 0) this.nowTime = currentTime * 0.001;\n\n    var _this = this;\n\n    _this.played = 1;\n    _this.ended = 0;\n    _this.source = _this.context.createBufferSource();\n    _this.source.buffer = _this.buffer;\n    _this.source.loop = _this.loop;\n\n    _this.source.connect(_this.context.destination);\n    /*连接 AudioBufferSourceNode 到 AudioContext */\n\n\n    _this.source.start(0, _this.nowTime % _this.buffer.duration);\n\n    _this.startTime = _this.context.currentTime;\n\n    _this.source.connect(_this.gainNode);\n\n    _this.gainNode.connect(_this.context.destination);\n\n    _this.source.onended = function () {\n      if (_this.played) {\n        console.log(get_src(_this.src) + ' ended');\n        _this.played = 0;\n        _this.ended = 1;\n        if (_this.onEnded) _this.onEnded(_this);\n        if (_this.onTimeupdate) cancelAnimationFrame(_this.timeupdate);\n      } //edn if\n\n    };\n\n    if (_this.onPlay) _this.onPlay(this);\n\n    if (_this.onTimeupdate) {\n      cancelAnimationFrame(_this.timeupdate);\n      webaudio_timeupdate();\n    } //edn of\n    //\t    console.log(get_src(this.src)+' play');\n\n\n    function webaudio_timeupdate() {\n      _this.onTimeupdate(_this);\n\n      if (!_this.ended) _this.timeupdate = requestAnimationFrame(webaudio_timeupdate);\n    } //edn func\n\n  }; //end prototype\n\n\n  webAudio.prototype.pause = function () {\n    this.played = 0;\n    this.source.stop(0);\n    this.nowTime += this.context.currentTime - this.startTime;\n    if (this.onPause) this.onPause(_this);\n    if (this.onTimeupdate) cancelAnimationFrame(this.timeupdate); //  \tconsole.log(get_src(this.src)+' pause');\n  }; //end prototype\n\n\n  audio.bgm = function (options) {\n    var defaults = {\n      src: '',\n      btn: $('a.bgmBtn'),\n      playClassName: 'bgmPlay',\n      stopClassName: 'bgmStop',\n      webAudio: false,\n      autoplay: true\n    };\n    var opts = $.extend(defaults, options);\n    console.log(opts.webAudio ? 'bgm is at web audio mode' : 'bgm is at local audio mode');\n    if (opts.webAudio) var bgm = new webAudioBgm(opts);else var bgm = new localAudioBgm(opts);\n    return bgm;\n  }; //end func\n\n\n  function localAudioBgm(opts) {\n    var _this = this;\n\n    this.src = opts.src;\n    this.onLoaded = opts.onLoaded;\n    this.loaded = 0;\n    this.played = 0;\n    this.bgmPlay = sessionStorage.bgmPlay == null ? opts.autoplay : opts.autoplay && parseInt(sessionStorage.bgmPlay);\n    console.log('this bgmPlay:' + this.bgmPlay);\n    this.bgmTime = sessionStorage.bgmTime;\n    this.bgmTime = this.bgmTime || 0;\n    this.bgmTime = Number(this.bgmTime);\n    console.log('bgmTime:' + this.bgmTime);\n    this.currentTime = this.bgmTime;\n    this.btn = opts.btn;\n    this.playClassName = opts.playClassName;\n    this.stopClassName = opts.stopClassName;\n    this.audio = new Audio();\n    this.audio.src = this.src;\n    this.audio.loop = true;\n    this.audio.load();\n\n    if (os.weibo && os.ios) {\n      //解决ios版微博下，无法触发audio的各种Load事件\n      setTimeout(function () {\n        init();\n        if (_this.onLoaded) this.onLoaded(this.audio);\n      }, 250);\n    } //end if\n    else {\n        this.audio.addEventListener('loadeddata', init, false);\n        if (this.onLoaded) this.audio.addEventListener('loadeddata', this.onLoaded, false);\n      } //edn else\n\n\n    function init(event) {\n      _this.loaded = 1;\n      if (_this.bgmPlay) _this.play();else _this.pause();\n    } //end func\n\n  } //end func\n\n\n  localAudioBgm.prototype.volume = function (volume) {\n    if (volume != null) this.audio.volume = volume;else return this.audio.volume;\n  }; //end func\n\n\n  localAudioBgm.prototype.time = function (currentTime) {\n    if (currentTime != null && currentTime > 0) this.currentTime = currentTime;else return this.currentTime;\n  }; //end func\n\n\n  localAudioBgm.prototype.play = function (e) {\n    var _this = e ? e.data.target : this;\n\n    if (!_this.played && _this.loaded) {\n      _this.played = 1;\n      _this.audio.currentTime = _this.currentTime;\n\n      _this.audio.play();\n\n      _this.bgmPlay = 1;\n      _this.playStatus = true;\n      if (_this.btn.length > 0) _this.btn.removeClass(_this.stopClassName).addClass(_this.playClassName).one('click', {\n        target: _this\n      }, _this.pause);\n    } //edn if\n\n  }; //end func\n\n\n  localAudioBgm.prototype.pause = function (e) {\n    var _this = e ? e.data.target : this;\n\n    if (_this.played && _this.loaded) {\n      _this.played = 0;\n      _this.currentTime = _this.audio.currentTime;\n\n      _this.audio.pause();\n\n      _this.bgmPlay = 0;\n      _this.playStatus = false;\n    } //edn if\n\n\n    if (_this.btn.length > 0) _this.btn.removeClass(_this.playClassName).addClass(_this.stopClassName).one('click', {\n      target: _this\n    }, _this.play);\n  }; //end func\n\n\n  localAudioBgm.prototype.mute = function (muted) {\n    muted = muted || 0;\n    this.audio.muted = muted;\n  }; //end func\n\n\n  function webAudioBgm(opts) {\n    this.context = new (window.AudioContext || window.webkitAudioContext)();\n    ;\n    this.gainNode = this.context.createGain();\n    this.buffer = null;\n    this.source = null;\n    this.src = opts.src;\n    this.startTime = 0;\n    this.onLoaded = opts.onLoaded;\n    this.bgmPlay = sessionStorage.bgmPlay == null ? opts.autoplay : opts.autoplay && parseInt(sessionStorage.bgmPlay);\n    console.log('this bgmPlay:' + this.bgmPlay);\n    this.bgmTime = sessionStorage.bgmTime;\n    this.bgmTime = this.bgmTime || 0;\n    this.bgmTime = Number(this.bgmTime);\n    console.log('bgmTime:' + this.bgmTime);\n    this.currentTime = this.bgmTime;\n    this.btn = opts.btn;\n    this.playClassName = opts.playClassName;\n    this.stopClassName = opts.stopClassName;\n    this.load();\n  } //end func\n\n\n  webAudioBgm.prototype.load = function () {\n    var _this = this;\n\n    var xhr = new XMLHttpRequest(); //通过XHR下载音频文件\n\n    xhr.open('GET', this.src, true);\n    xhr.responseType = 'arraybuffer';\n\n    xhr.onload = function (e) {\n      //下载完成\n      if (_this.onLoaded) _this.onLoaded();\n      init(this.response);\n    };\n\n    xhr.send();\n\n    function init(arrayBuffer) {\n      _this.context.decodeAudioData(arrayBuffer, function (buffer) {\n        _this.buffer = buffer;\n        if (_this.bgmPlay) _this.play();else _this.pause();\n      }, function (e) {\n        console.log('Error decoding file', e);\n      });\n    } //edn func\n\n  }; //edn prototype\n\n\n  webAudioBgm.prototype.volume = function (volume) {\n    if (volume != null) {\n      volume = Math.max(-1, Math.min(volume, 1));\n      this.gainNode.gain.value = volume;\n    } //ened if\n    else return this.gainNode.gain.value;\n  }; //end prototype\n\n\n  webAudioBgm.prototype.time = function (currentTime) {\n    if (currentTime != null && currentTime > 0) {\n      this.currentTime = currentTime;\n    } //edn if\n    else return this.currentTime;\n  }; //end func\n\n\n  webAudioBgm.prototype.play = function (e) {\n    var _this = e ? e.data.target : this;\n\n    _this.bgmPlay = 1;\n    _this.source = _this.context.createBufferSource();\n    _this.source.buffer = _this.buffer;\n    _this.source.loop = true;\n\n    _this.source.connect(_this.context.destination);\n\n    _this.source.start(0, _this.currentTime % _this.buffer.duration);\n\n    _this.startTime = _this.context.currentTime;\n\n    _this.source.connect(_this.gainNode);\n\n    _this.gainNode.connect(_this.context.destination);\n\n    _this.playStatus = true;\n    if (_this.btn.length > 0) _this.btn.removeClass(_this.stopClassName).addClass(_this.playClassName).one('click', {\n      target: _this\n    }, _this.pause);\n  }; //end prototype\n\n\n  webAudioBgm.prototype.pause = function (e) {\n    var _this = e ? e.data.target : this;\n\n    if (_this.source) {\n      _this.bgmPlay = 0;\n\n      _this.source.stop(0);\n\n      _this.currentTime += _this.context.currentTime - _this.startTime;\n      _this.bgmTime = _this.currentTime;\n      _this.playStatus = false;\n    } //edn if\n\n\n    if (_this.btn.length > 0) _this.btn.removeClass(_this.playClassName).addClass(_this.stopClassName).one('click', {\n      target: _this\n    }, _this.play);\n  }; //end prototype\n\n\n  webAudioBgm.prototype.mute = function (muted) {\n    muted = muted || 0;\n\n    if (muted) {\n      this.volume(-1);\n    } //edn if\n    else {\n        this.volume(1);\n      } //end else\n\n  }; //end prototype\n\n\n  function get_src(str) {\n    var ary = str.split('/');\n    return ary[ary.length - 1];\n  } //end func\n\n\n  return audio;\n} //end import\n\n\nvar ibgm = importBgm();\n\nfunction importBgm() {\n  var bgm = {};\n  var defaults = {\n    webAudio: 0,\n    src: '',\n    autoplay: 1\n  };\n  var opts = {};\n\n  bgm.init = function (options) {\n    opts = $.extend(defaults, options);\n\n    if (opts.src != '') {\n      ibase.creatNode('a', null, 'bgmBtn', null, document.querySelector('article'));\n      bgm.audio = iaudio.bgm({\n        src: opts.src,\n        onLoaded: opts.onLoaded,\n        webAudio: opts.webAudio,\n        autoplay: opts.autoplay\n      });\n      this.btn = $('a.bgmBtn');\n    } //edn if\n\n  }; //edn func\n\n\n  bgm.href = function (url) {\n    if (url && url != '') {\n      sessionStorage.bgmPlay = ibgm.audio.bgmPlay;\n      var bgmTime = opts.webAudio ? ibgm.audio.currentTime + ibgm.audio.context.currentTime - ibgm.audio.startTime : ibgm.audio.audio.currentTime;\n      sessionStorage.bgmTime = ibgm.audio.bgmPlay ? bgmTime : ibgm.audio.currentTime;\n      location.href = url;\n    } //edn func\n\n  }; //edn func\n\n\n  bgm.volume = function (volume) {\n    if (volume != null) bgm.audio.volume(volume);else return bgm.audio.volume();\n  }; //end func\n\n\n  bgm.currentTime = function (currentTime) {\n    if (currentTime != null && currentTime > 0) bgm.audio.time(currentTime);else return bgm.audio.time();\n  }; //end func\n\n\n  bgm.pause = function () {\n    bgm.audio.pause();\n  }; //edn func\n\n\n  bgm.play = function () {\n    bgm.audio.play();\n  }; //edn func\n\n\n  bgm.hide = function (pause) {\n    pause = pause != null ? pause : true;\n    if (pause) this.pause();\n    this.btn.hide();\n  }; //edn func\n\n\n  bgm.show = function (resume) {\n    resume = resume != null ? resume : true;\n    if (resume) this.play();\n    this.btn.show();\n  }; //edn func\n\n\n  bgm.mute = function (muted) {\n    muted = muted || 0;\n    console.log(bgm.audio);\n    bgm.audio.mute(muted);\n    if (muted) this.btn.hide();else this.btn.show();\n  }; //edn func\n\n\n  return bgm;\n} //edn func\n\n\n(function (global, factory) {\n  factory(global);\n})(typeof window !== \"undefined\" ? window : this, function (global) {\n  global.iaudio = importAudio();\n  global.ibgm = importBgm();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvYmFzZS9hdWRpby5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9iYXNlL2F1ZGlvLmpzP2FjMjUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8yMDE4LjkuMjVcbnZhciBpYXVkaW89aW1wb3J0QXVkaW8oKTtcblxuZnVuY3Rpb24gaW1wb3J0QXVkaW8oKXtcblx0dmFyIGF1ZGlvPXt9O1xuXHR2YXIgd2ViQXVkaW9Db250ZXh0PXdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHR8fHdpbmRvdy5BdWRpb0NvbnRleHQ7XG4vL1x0Y29uc29sZS5sb2cod2ViQXVkaW9Db250ZXh0KTtcblx0XG5cdGF1ZGlvLm9uPWZ1bmN0aW9uKGxpc3Qsb3B0aW9ucyl7XG5cdFx0aWYobGlzdC5sZW5ndGg+MCl7XG5cdFx0XHR0aGlzLnNvdW5kTGlzdD17fTtcblx0XHRcdHRoaXMuc291bmRNYXg9MDtcblx0XHRcdHRoaXMuc291bmRMb2FkZWQ9MDtcblx0XHRcdHRoaXMud2ViQXVkaW89MDtcblx0XHRcdGlmKG9wdGlvbnMpe1xuXHRcdFx0XHR0aGlzLm9uUHJvZ3Jlc3M9b3B0aW9ucy5vblByb2dyZXNzO1xuXHRcdFx0XHR0aGlzLm9uTG9hZENvbXBsZXRlPW9wdGlvbnMub25Mb2FkQ29tcGxldGU7XG5cdFx0XHRcdHRoaXMud2ViQXVkaW89b3B0aW9ucy53ZWJBdWRpb3x8MDtcdFxuXHRcdFx0fS8vZW5kIGlmXG5cdFx0XHRjb25zb2xlLmxvZyh0aGlzLndlYkF1ZGlvPyd3ZWIgYXVkaW8gbW9kZSc6J2xvY2FsIGF1ZGlvIG1vZGUnKTtcblx0XHRcdGZvcih2YXIgaT0wOyBpPGxpc3QubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHR2YXIgZGVmYXVsdHMgPSB7c3JjOicnLHZvbHVtZToxLGxvb3A6MCxhdXRvcGxheTowLGNvbnRpbnVlUGxheTowLGN1cnJlbnRUaW1lOjB9O1xuXHRcdFx0XHR2YXIgb3B0cyA9ICQuZXh0ZW5kKGRlZmF1bHRzLGxpc3RbaV0pO1xuXHRcdFx0XHRpZihvcHRzLnNyYyE9Jycpe1xuXHRcdFx0XHRcdHZhciBzdHIxPW9wdHMuc3JjLnNwbGl0KCcvJyk7XG5cdFx0XHRcdFx0dmFyIG5hbWU9c3RyMVtzdHIxLmxlbmd0aC0xXS5zcGxpdCgnLicpWzBdO1xuXHRcdFx0XHRcdHZhciBvcHRpb249e1xuXHRcdFx0XHRcdFx0c3JjOm9wdHMuc3JjLFxuXHRcdFx0XHRcdFx0dm9sdW1lOm9wdHMudm9sdW1lLFxuXHRcdFx0XHRcdFx0bG9vcDpvcHRzLmxvb3AsXG5cdFx0XHRcdFx0XHRhdXRvcGxheTpvcHRzLmF1dG9wbGF5LFxuXHRcdFx0XHRcdFx0Y29udGludWVQbGF5Om9wdHMuY29udGludWVQbGF5LFxuXHRcdFx0XHRcdFx0Y3VycmVudFRpbWU6b3B0cy5jdXJyZW50VGltZSxcblx0XHRcdFx0XHRcdG9uTGlzdExvYWRlZDp0aGlzLm9uTGlzdExvYWRlZCxcblx0XHRcdFx0XHRcdG9uTG9hZGVkOm9wdHMub25Mb2FkZWQsXG5cdFx0XHRcdFx0XHRvbkVuZGVkOm9wdHMub25FbmRlZCxcblx0XHRcdFx0XHRcdG9uUGxheTpvcHRzLm9uUGxheSxcblx0XHRcdFx0XHRcdG9uUGF1c2U6b3B0cy5vblBhdXNlLFxuXHRcdFx0XHRcdFx0b25UaW1ldXBkYXRlOm9wdHMub25UaW1ldXBkYXRlXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRpZih0aGlzLndlYkF1ZGlvKSB0aGlzLnNvdW5kTGlzdFtuYW1lXT1uZXcgd2ViQXVkaW8ob3B0aW9uKTtcblx0XHRcdFx0XHRlbHNlIHRoaXMuc291bmRMaXN0W25hbWVdPW5ldyBsb2NhbEF1ZGlvKG9wdGlvbik7XG5cdFx0XHRcdH0vL2VkbiBpZlxuXHRcdFx0fS8vZW5kIGZvclxuXHRcdFx0dGhpcy5zb3VuZE1heD1PYmplY3Qua2V5cyh0aGlzLnNvdW5kTGlzdCkubGVuZ3RoO1xuXHRcdFx0Y29uc29sZS5sb2coJ3NvdW5kIGxlbmd0aDonK3RoaXMuc291bmRNYXgpO1xuXHRcdFx0cmV0dXJuIHRoaXMuc291bmRMaXN0O1xuXHRcdH0vL2VkbiBpZlxuXHRcdFxuXHR9Ly9lbmQgZnVuY1xuXHRcblx0YXVkaW8ub25MaXN0TG9hZGVkPWZ1bmN0aW9uKCl7XG5cdFx0dmFyIF90aGlzPWF1ZGlvO1xuXHRcdF90aGlzLnNvdW5kTG9hZGVkKys7XG5cdFx0aWYoX3RoaXMub25Qcm9ncmVzcykgX3RoaXMub25Qcm9ncmVzcyhfdGhpcy5zb3VuZExvYWRlZC9fdGhpcy5zb3VuZE1heCk7XG5cdFx0aWYoX3RoaXMuc291bmRMb2FkZWQ9PV90aGlzLnNvdW5kTWF4KXtcblx0XHRcdGNvbnNvbGUubG9nKF90aGlzLnNvdW5kTG9hZGVkKycgc291bmRzIGxvYWQgY29tcGxldGUnKTtcblx0XHRcdGlmKF90aGlzLm9uTG9hZENvbXBsZXRlKSBfdGhpcy5vbkxvYWRDb21wbGV0ZSgpO1xuXHRcdH0vL2VuZCBpZlxuXHR9Ly9lbmQgZnVuY1xuXHRcblx0ZnVuY3Rpb24gbG9jYWxBdWRpbyhvcHRzKXtcblx0XHR2YXIgX3RoaXM9dGhpcztcblx0ICAgIHRoaXMuYXV0b3BsYXk9b3B0cy5hdXRvcGxheTtcblx0ICAgIHRoaXMub25MaXN0TG9hZGVkPW9wdHMub25MaXN0TG9hZGVkO1xuXHQgICAgdGhpcy5vbkxvYWRlZD1vcHRzLm9uTG9hZGVkO1xuXHQgICAgdGhpcy5vbkVuZGVkPW9wdHMub25FbmRlZDtcblx0ICAgIHRoaXMub25QbGF5PW9wdHMub25QbGF5O1xuXHQgICAgdGhpcy5vblBhdXNlPW9wdHMub25QYXVzZTtcblx0ICAgIHRoaXMub25UaW1ldXBkYXRlPW9wdHMub25UaW1ldXBkYXRlO1xuXHQgICAgdGhpcy5sb2FkZWQ9MDtcblx0ICAgIHRoaXMucGxheWVkPTA7XG5cdCAgICB0aGlzLmVuZGVkPTA7XG5cdFx0dGhpcy5hdWRpbz1uZXcgQXVkaW8oKTtcblx0XHR0aGlzLmF1ZGlvLnNyYz1vcHRzLnNyYztcblx0XHR0aGlzLmF1ZGlvLnZvbHVtZT1vcHRzLnZvbHVtZTtcblx0XHR0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lPW9wdHMuY3VycmVudFRpbWU7XG5cdFx0dGhpcy5hdWRpby5sb29wPW9wdHMubG9vcDsvL+WmguaenGxvb3Dorr7nva7miJB0cnVl5bCx5peg5rOV5q2j56Gu6I635b6XZW5kZWTkuovku7Zcblx0XHR0aGlzLmF1ZGlvLmxvYWQoKTtcblx0XHR0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLGluaXQsZmFsc2UpO1xuXHRcdHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLG9uRW5kZWQsZmFsc2UpO1xuXHRcdGlmKHRoaXMub25MaXN0TG9hZGVkKSB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLHRoaXMub25MaXN0TG9hZGVkLGZhbHNlKTtcblx0XHRpZih0aGlzLm9uTG9hZGVkKSB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLHRoaXMub25Mb2FkZWQsZmFsc2UpO1xuXHRcdGlmKHRoaXMub25QbGF5KSB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLHRoaXMub25QbGF5LGZhbHNlKTtcblx0XHRpZih0aGlzLm9uUGF1c2UpIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLHRoaXMub25QYXVzZSxmYWxzZSk7XG5cdFx0aWYodGhpcy5vblRpbWV1cGRhdGUpIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsdGhpcy5vblRpbWV1cGRhdGUsZmFsc2UpO1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGluaXQoZXZlbnQpe1xuXHRcdFx0X3RoaXMubG9hZGVkPTE7XG5cdFx0XHRpZihfdGhpcy5hdXRvcGxheSkgX3RoaXMucGxheSgpOyBcblx0XHR9Ly9lbmQgZnVuY1xuXHRcdFxuXHRcdGZ1bmN0aW9uIG9uRW5kZWQoZXZlbnQpe1xuXHRcdFx0X3RoaXMuZW5kZWQ9MTtcblx0XHRcdF90aGlzLnBsYXllZD0wO1xuXHRcdFx0aWYoX3RoaXMub25FbmRlZCkgX3RoaXMub25FbmRlZCgpO1xuXHRcdH0vL2VuZCBmdW5jXG5cdFx0XG5cdH0vL2VuZCBmdW5jXG5cdFxuXHRsb2NhbEF1ZGlvLnByb3RvdHlwZS5zcmM9ZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gdGhpcy5hdWRpby5zcmM7XG5cdH0vL2VuZCBmdW5jXG5cdFxuXHRsb2NhbEF1ZGlvLnByb3RvdHlwZS5sb29wPWZ1bmN0aW9uKGxvb3Ape1xuXHRcdGlmKGxvb3AhPW51bGwpIHRoaXMuYXVkaW8ubG9vcD1sb29wO1xuXHRcdGVsc2UgcmV0dXJuIHRoaXMuYXVkaW8ubG9vcDtcblx0fS8vZW5kIGZ1bmNcblx0XG5cdGxvY2FsQXVkaW8ucHJvdG90eXBlLmR1cmF0aW9uPWZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuIHRoaXMuYXVkaW8uZHVyYXRpb247XG5cdH0vL2VuZCBmdW5jXG5cdFxuXHRsb2NhbEF1ZGlvLnByb3RvdHlwZS5tdXRlZD1mdW5jdGlvbihtdXRlZCl7XG5cdFx0aWYobXV0ZWQhPW51bGwpIHRoaXMuYXVkaW8ubXV0ZWQ9bXV0ZWQ7XG5cdFx0ZWxzZSByZXR1cm4gdGhpcy5hdWRpby5tdXRlZDtcblx0fS8vZW5kIGZ1bmNcblx0XG5cdGxvY2FsQXVkaW8ucHJvdG90eXBlLnZvbHVtZT1mdW5jdGlvbih2b2x1bWUpe1xuXHRcdGlmKHZvbHVtZSE9bnVsbCkgdGhpcy5hdWRpby52b2x1bWU9dm9sdW1lO1xuXHRcdGVsc2UgcmV0dXJuIHRoaXMuYXVkaW8udm9sdW1lO1xuXHR9Ly9lbmQgZnVuY1xuXHRcblx0bG9jYWxBdWRpby5wcm90b3R5cGUuY3VycmVudFRpbWU9ZnVuY3Rpb24oY3VycmVudFRpbWUpe1xuXHRcdGlmKGN1cnJlbnRUaW1lIT1udWxsICYmIGN1cnJlbnRUaW1lPjApIHRoaXMuYXVkaW8uY3VycmVudFRpbWU9Y3VycmVudFRpbWUqMC4wMDE7XG5cdFx0ZWxzZSByZXR1cm4gdGhpcy5hdWRpby5jdXJyZW50VGltZSoxMDAwO1xuXHR9Ly9lbmQgZnVuY1xuXHRcblx0bG9jYWxBdWRpby5wcm90b3R5cGUucGxheT1mdW5jdGlvbihjdXJyZW50VGltZSl7XG5cdFx0aWYoY3VycmVudFRpbWUhPW51bGwgJiYgY3VycmVudFRpbWU+PTApIHRoaXMuYXVkaW8uY3VycmVudFRpbWU9Y3VycmVudFRpbWUqMC4wMDE7XG5cdFx0dGhpcy5wbGF5ZWQ9MTtcblx0XHR0aGlzLmVuZGVkPTA7XG5cdFx0dGhpcy5hdWRpby5wbGF5KCk7XG4vL1x0XHRjb25zb2xlLmxvZyhnZXRfc3JjKHRoaXMuc3JjKSsnIHBsYXknKTtcblx0fS8vZW5kIGZ1bmNcblx0XG5cdGxvY2FsQXVkaW8ucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7XG4gICAgXHR0aGlzLnBsYXllZD0wO1xuICAgIFx0dGhpcy5hdWRpby5wYXVzZSgpO1xuLy8gIFx0Y29uc29sZS5sb2coZ2V0X3NyYyh0aGlzLnNyYykrJyBwYXVzZScpO1xuXHR9Ly9lbmQgZnVuY1xuXHRcblx0ZnVuY3Rpb24gd2ViQXVkaW8ob3B0cyl7XG5cdFx0dGhpcy5jb250ZXh0PW5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpOyAvKiDliJvlu7rkuIDkuKogQXVkaW9Db250ZXh0ICovXG5cdFx0dGhpcy5nYWluTm9kZT0gdGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTtcblx0ICAgIHRoaXMuYnVmZmVyPW51bGw7XG5cdCAgICB0aGlzLnNvdXJjZT1udWxsO1xuXHQgICAgdGhpcy5zcmM9b3B0cy5zcmM7XG5cdCAgICB0aGlzLnZvbHVtZT1vcHRzLnZvbHVtZTtcblx0ICAgIHRoaXMubG9vcD1vcHRzLmxvb3A7XG5cdCAgICB0aGlzLmF1dG9wbGF5PW9wdHMuYXV0b3BsYXk7XG5cdCAgICB0aGlzLmNvbnRpbnVlUGxheT1vcHRzLmNvbnRpbnVlUGxheTtcblx0ICAgIHRoaXMubm93VGltZSA9b3B0cy5jdXJyZW50VGltZTtcblx0ICAgIHRoaXMuc3RhcnRUaW1lID0gMDtcblx0ICAgIHRoaXMub25MaXN0TG9hZGVkPW9wdHMub25MaXN0TG9hZGVkO1xuXHQgICAgdGhpcy5vbkxvYWRlZD1vcHRzLm9uTG9hZGVkO1xuXHQgICAgdGhpcy5vbkVuZGVkPW9wdHMub25FbmRlZDtcblx0ICAgIHRoaXMub25QbGF5PW9wdHMub25QbGF5O1xuXHQgICAgdGhpcy5vblBhdXNlPW9wdHMub25QYXVzZTtcblx0ICAgIHRoaXMub25UaW1ldXBkYXRlPW9wdHMub25UaW1ldXBkYXRlO1xuXHQgICAgdGhpcy5sb2FkZWQ9MDtcblx0ICAgIHRoaXMucGxheWVkPTA7XG5cdCAgICB0aGlzLmVuZGVkPTA7XG5cdCAgICB0aGlzLmxvYWQoKTtcblx0fS8vZW5kIGZ1bmNcblx0XG5cdHdlYkF1ZGlvLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKCl7XG5cdFx0dmFyIF90aGlzPXRoaXM7XG5cdCAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7IC8q5LiA5Liq5paw55qEIFhIUiDlr7nosaEgKi9cblx0ICAgIHhoci5vcGVuKCdHRVQnLCB0aGlzLnNyYywgdHJ1ZSk7IC8qIOmAmui/hyBHRVQg6K+36L+e5o6l5YiwIC5tcDMgKi9cblx0ICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInOyAvKiDorr7nva7lk43lupTnsbvlnovkuLrlrZfoioLmtYEgYXJyYXlidWZmZXIgKi9cblx0ICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhnZXRfc3JjKF90aGlzLnNyYykrJyBsb2FkZWQnKTtcblx0XHRcdF90aGlzLmxvYWRlZD0xO1xuXHRcdFx0aWYoX3RoaXMub25MaXN0TG9hZGVkKSBfdGhpcy5vbkxpc3RMb2FkZWQoKTtcblx0XHRcdGlmKF90aGlzLm9uTG9hZGVkKSBfdGhpcy5vbkxvYWRlZChfdGhpcyk7XG5cdCAgICAgICAgaW5pdCh0aGlzLnJlc3BvbnNlKTtcblx0ICAgIH07XG5cdCAgICB4aHIuc2VuZCgpO1xuXHQgICAgXG5cdCAgICBmdW5jdGlvbiBpbml0KGFycmF5QnVmZmVyKXtcblx0XHRcdF90aGlzLmNvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBmdW5jdGlvbihidWZmZXIpIHtcblx0XHRcdFx0X3RoaXMuYnVmZmVyID0gYnVmZmVyOyAgLyog5bCGIGJ1ZmZlciDkvKDlhaXop6PnoIEgQXVkaW9CdWZmZXIuICovXG5cdFx0XHRcdGlmKF90aGlzLmF1dG9wbGF5KSBfdGhpcy5wbGF5KCk7XG5cdFx0ICAgIH0sIGZ1bmN0aW9uKGUpIHtcblx0XHQgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZWNvZGluZyBmaWxlJywgZSk7XG5cdFx0ICAgIH0pO1xuXHQgICAgfS8vZWRuIGZ1bmNcblx0ICAgIFxuXHR9Ly9lZG4gcHJvdG90eXBlXG5cdFxuXHR3ZWJBdWRpby5wcm90b3R5cGUubXV0ZWQ9ZnVuY3Rpb24obXV0ZWQpe1xuXHRcdGlmKG11dGVkIT1udWxsKXtcblx0XHRcdHRoaXMuZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IG11dGVkPy0xOjE7XG5cdFx0fS8vZWRuIGlmXG5cdFx0ZWxzZSByZXR1cm4gdGhpcy5nYWluTm9kZS5nYWluLnZhbHVlPT0tMT90cnVlOmZhbHNlO1xuXHR9Ly9lbmQgcHJvdG90eXBlXG5cdFxuXHQvL+WcqOaJi+acuua1j+iniOWZqOmHjO+8jHdlYmF1ZGlv5Y+v5Lul6LCD6IqC6Z+z6YePLGF1ZGlv55uu5YmN6L+Y5LiN6KGMXG5cdHdlYkF1ZGlvLnByb3RvdHlwZS52b2x1bWU9ZnVuY3Rpb24odm9sdW1lKXtcblx0XHRpZih2b2x1bWUhPW51bGwpe1xuXHRcdFx0dm9sdW1lPU1hdGgubWF4KC0xLE1hdGgubWluKHZvbHVtZSwxKSk7XG5cdFx0XHR0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUgPSB2b2x1bWU7XG5cdFx0fS8vZW5lZCBpZlxuXHRcdGVsc2UgcmV0dXJuIHRoaXMuZ2Fpbk5vZGUuZ2Fpbi52YWx1ZTtcblx0fS8vZW5kIHByb3RvdHlwZVxuXHRcblx0d2ViQXVkaW8ucHJvdG90eXBlLmN1cnJlbnRUaW1lPWZ1bmN0aW9uKGN1cnJlbnRUaW1lKXtcblx0XHRpZihjdXJyZW50VGltZSE9bnVsbCAmJiBjdXJyZW50VGltZT49MCkgdGhpcy5ub3dUaW1lPWN1cnJlbnRUaW1lKjAuMDAxO1xuXHRcdGVsc2UgcmV0dXJuIHRoaXMubm93VGltZSoxMDAwO1xuXHR9Ly9lbmQgZnVuY1xuXHRcblx0d2ViQXVkaW8ucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24oY3VycmVudFRpbWUpe1xuXHRcdGlmKGN1cnJlbnRUaW1lIT1udWxsICYmIGN1cnJlbnRUaW1lPj0wKSB0aGlzLm5vd1RpbWU9Y3VycmVudFRpbWUqMC4wMDE7XG5cdFx0dmFyIF90aGlzPXRoaXM7XG5cdFx0X3RoaXMucGxheWVkPTE7XG5cdFx0X3RoaXMuZW5kZWQ9MDtcblx0XHRfdGhpcy5zb3VyY2UgPSBfdGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOyBcblx0ICAgIF90aGlzLnNvdXJjZS5idWZmZXIgPSBfdGhpcy5idWZmZXI7XG5cdCAgICBfdGhpcy5zb3VyY2UubG9vcCA9IF90aGlzLmxvb3A7XG5cdCAgICBfdGhpcy5zb3VyY2UuY29ubmVjdChfdGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTsgLyrov57mjqUgQXVkaW9CdWZmZXJTb3VyY2VOb2RlIOWIsCBBdWRpb0NvbnRleHQgKi9cblx0ICAgIF90aGlzLnNvdXJjZS5zdGFydCgwLF90aGlzLm5vd1RpbWUgJSBfdGhpcy5idWZmZXIuZHVyYXRpb24pOyBcblx0ICAgIF90aGlzLnN0YXJ0VGltZSA9IF90aGlzLmNvbnRleHQuY3VycmVudFRpbWU7XG5cdCAgICBfdGhpcy5zb3VyY2UuY29ubmVjdChfdGhpcy5nYWluTm9kZSk7XG5cdCAgICBfdGhpcy5nYWluTm9kZS5jb25uZWN0KF90aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO1xuXHQgICAgX3RoaXMuc291cmNlLm9uZW5kZWQ9ZnVuY3Rpb24oKXtcblx0ICAgIFx0aWYoX3RoaXMucGxheWVkKXtcblx0ICAgIFx0XHRjb25zb2xlLmxvZyhnZXRfc3JjKF90aGlzLnNyYykrJyBlbmRlZCcpO1xuXHQgICAgXHRcdF90aGlzLnBsYXllZD0wO1xuXHQgICAgXHRcdF90aGlzLmVuZGVkPTE7XG5cdCAgICBcdFx0aWYoX3RoaXMub25FbmRlZCkgX3RoaXMub25FbmRlZChfdGhpcyk7XG5cdCAgICBcdFx0aWYoX3RoaXMub25UaW1ldXBkYXRlKSBjYW5jZWxBbmltYXRpb25GcmFtZShfdGhpcy50aW1ldXBkYXRlKTtcblx0ICAgIFx0fS8vZWRuIGlmXG5cdCAgICB9O1xuXHQgICAgaWYoX3RoaXMub25QbGF5KSBfdGhpcy5vblBsYXkodGhpcyk7XG5cdCAgICBpZihfdGhpcy5vblRpbWV1cGRhdGUpe1xuXHQgICAgXHRjYW5jZWxBbmltYXRpb25GcmFtZShfdGhpcy50aW1ldXBkYXRlKTtcblx0ICAgIFx0d2ViYXVkaW9fdGltZXVwZGF0ZSgpO1xuXHQgICAgfS8vZWRuIG9mXG4vL1x0ICAgIGNvbnNvbGUubG9nKGdldF9zcmModGhpcy5zcmMpKycgcGxheScpO1xuXG5cdFx0ZnVuY3Rpb24gd2ViYXVkaW9fdGltZXVwZGF0ZSgpe1xuXHRcdFx0X3RoaXMub25UaW1ldXBkYXRlKF90aGlzKTtcblx0XHRcdGlmKCFfdGhpcy5lbmRlZCkgX3RoaXMudGltZXVwZGF0ZT1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUod2ViYXVkaW9fdGltZXVwZGF0ZSk7XG5cdFx0fS8vZWRuIGZ1bmNcblxuXHR9Ly9lbmQgcHJvdG90eXBlXG5cdFxuXHR3ZWJBdWRpby5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXtcbiAgICBcdHRoaXMucGxheWVkPTA7XG5cdFx0dGhpcy5zb3VyY2Uuc3RvcCgwKTtcbiAgICBcdHRoaXMubm93VGltZSArPSB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUgLSB0aGlzLnN0YXJ0VGltZTtcbiAgICBcdGlmKHRoaXMub25QYXVzZSkgdGhpcy5vblBhdXNlKF90aGlzKTtcbiAgICBcdGlmKHRoaXMub25UaW1ldXBkYXRlKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnRpbWV1cGRhdGUpO1xuLy8gIFx0Y29uc29sZS5sb2coZ2V0X3NyYyh0aGlzLnNyYykrJyBwYXVzZScpO1xuXHR9Ly9lbmQgcHJvdG90eXBlXG5cdFxuXHRhdWRpby5iZ209ZnVuY3Rpb24ob3B0aW9ucyl7XG5cdFx0dmFyIGRlZmF1bHRzID0ge3NyYzonJyxidG46JCgnYS5iZ21CdG4nKSxwbGF5Q2xhc3NOYW1lOidiZ21QbGF5JyxzdG9wQ2xhc3NOYW1lOidiZ21TdG9wJyx3ZWJBdWRpbzpmYWxzZSxhdXRvcGxheTp0cnVlfTtcblx0XHR2YXIgb3B0cyA9ICQuZXh0ZW5kKGRlZmF1bHRzLG9wdGlvbnMpO1xuXHRcdGNvbnNvbGUubG9nKG9wdHMud2ViQXVkaW8/J2JnbSBpcyBhdCB3ZWIgYXVkaW8gbW9kZSc6J2JnbSBpcyBhdCBsb2NhbCBhdWRpbyBtb2RlJyk7XG5cdFx0aWYob3B0cy53ZWJBdWRpbykgdmFyIGJnbT1uZXcgd2ViQXVkaW9CZ20ob3B0cyk7XG5cdFx0ZWxzZSB2YXIgYmdtPW5ldyBsb2NhbEF1ZGlvQmdtKG9wdHMpO1xuXHRcdHJldHVybiBiZ207XG5cdH0vL2VuZCBmdW5jXG5cdFxuXHRmdW5jdGlvbiBsb2NhbEF1ZGlvQmdtKG9wdHMpe1xuXHRcdHZhciBfdGhpcz10aGlzO1xuXHRcdHRoaXMuc3JjPW9wdHMuc3JjO1xuXHQgICAgdGhpcy5vbkxvYWRlZD1vcHRzLm9uTG9hZGVkO1xuXHQgICAgdGhpcy5sb2FkZWQ9MDtcblx0ICAgIHRoaXMucGxheWVkPTA7XG5cdCAgICB0aGlzLmJnbVBsYXk9c2Vzc2lvblN0b3JhZ2UuYmdtUGxheT09bnVsbD9vcHRzLmF1dG9wbGF5OihvcHRzLmF1dG9wbGF5ICYmIHBhcnNlSW50KHNlc3Npb25TdG9yYWdlLmJnbVBsYXkpKTtcblx0XHRjb25zb2xlLmxvZygndGhpcyBiZ21QbGF5OicrdGhpcy5iZ21QbGF5KTtcblx0XHR0aGlzLmJnbVRpbWU9c2Vzc2lvblN0b3JhZ2UuYmdtVGltZTtcblx0XHR0aGlzLmJnbVRpbWU9dGhpcy5iZ21UaW1lfHwwO1xuXHRcdHRoaXMuYmdtVGltZT1OdW1iZXIodGhpcy5iZ21UaW1lKTtcblx0XHRjb25zb2xlLmxvZygnYmdtVGltZTonK3RoaXMuYmdtVGltZSk7XG5cdFx0dGhpcy5jdXJyZW50VGltZSA9IHRoaXMuYmdtVGltZTtcblx0XHR0aGlzLmJ0bj1vcHRzLmJ0bjtcblx0XHR0aGlzLnBsYXlDbGFzc05hbWU9b3B0cy5wbGF5Q2xhc3NOYW1lO1xuXHRcdHRoaXMuc3RvcENsYXNzTmFtZT1vcHRzLnN0b3BDbGFzc05hbWU7XG5cdFx0dGhpcy5hdWRpbz1uZXcgQXVkaW8oKTtcblx0XHR0aGlzLmF1ZGlvLnNyYz10aGlzLnNyYztcblx0XHR0aGlzLmF1ZGlvLmxvb3A9dHJ1ZTtcblx0XHR0aGlzLmF1ZGlvLmxvYWQoKTtcblx0XHRpZihvcy53ZWlibyAmJiBvcy5pb3Mpey8v6Kej5YazaW9z54mI5b6u5Y2a5LiL77yM5peg5rOV6Kem5Y+RYXVkaW/nmoTlkITnp41Mb2Fk5LqL5Lu2XG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGluaXQoKTtcblx0XHRcdFx0aWYoX3RoaXMub25Mb2FkZWQpIHRoaXMub25Mb2FkZWQodGhpcy5hdWRpbyk7XG5cdFx0XHR9LDI1MCk7XG5cdFx0fS8vZW5kIGlmXG5cdFx0ZWxzZXtcblx0XHRcdHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkZGF0YScsaW5pdCxmYWxzZSk7XG5cdFx0XHRpZih0aGlzLm9uTG9hZGVkKSB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLHRoaXMub25Mb2FkZWQsZmFsc2UpO1xuXHRcdH0vL2VkbiBlbHNlXG5cdFx0XG5cdFx0XG5cdFx0ZnVuY3Rpb24gaW5pdChldmVudCl7XG5cdFx0XHRfdGhpcy5sb2FkZWQ9MTtcblx0XHRcdGlmKF90aGlzLmJnbVBsYXkpIF90aGlzLnBsYXkoKTtcblx0XHRcdGVsc2UgX3RoaXMucGF1c2UoKTtcblx0XHR9Ly9lbmQgZnVuY1xuXHRcdFxuXHR9Ly9lbmQgZnVuY1xuXHRcblx0bG9jYWxBdWRpb0JnbS5wcm90b3R5cGUudm9sdW1lPWZ1bmN0aW9uKHZvbHVtZSl7XG5cdFx0aWYodm9sdW1lIT1udWxsKSB0aGlzLmF1ZGlvLnZvbHVtZT12b2x1bWU7XG5cdFx0ZWxzZSByZXR1cm4gdGhpcy5hdWRpby52b2x1bWU7XG5cdH0vL2VuZCBmdW5jXG5cdFxuXHRsb2NhbEF1ZGlvQmdtLnByb3RvdHlwZS50aW1lPWZ1bmN0aW9uKGN1cnJlbnRUaW1lKXtcblx0XHRpZihjdXJyZW50VGltZSE9bnVsbCAmJiBjdXJyZW50VGltZT4wKSB0aGlzLmN1cnJlbnRUaW1lPWN1cnJlbnRUaW1lO1xuXHRcdGVsc2UgcmV0dXJuIHRoaXMuY3VycmVudFRpbWU7XG5cdH0vL2VuZCBmdW5jXG5cdFxuXHRsb2NhbEF1ZGlvQmdtLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKGUpe1xuXHRcdHZhciBfdGhpcz1lP2UuZGF0YS50YXJnZXQ6dGhpcztcblx0XHRpZighX3RoaXMucGxheWVkICYmIF90aGlzLmxvYWRlZCl7XG5cdFx0XHRfdGhpcy5wbGF5ZWQ9MTtcblx0XHRcdF90aGlzLmF1ZGlvLmN1cnJlbnRUaW1lPV90aGlzLmN1cnJlbnRUaW1lO1xuXHRcdFx0X3RoaXMuYXVkaW8ucGxheSgpO1xuXHRcdFx0X3RoaXMuYmdtUGxheT0xO1xuXHRcdFx0X3RoaXMucGxheVN0YXR1cyA9IHRydWVcblx0XHRcdGlmKF90aGlzLmJ0bi5sZW5ndGg+MCkgX3RoaXMuYnRuLnJlbW92ZUNsYXNzKF90aGlzLnN0b3BDbGFzc05hbWUpLmFkZENsYXNzKF90aGlzLnBsYXlDbGFzc05hbWUpLm9uZSgnY2xpY2snLHt0YXJnZXQ6X3RoaXN9LF90aGlzLnBhdXNlKTtcblx0XHR9Ly9lZG4gaWZcblx0fS8vZW5kIGZ1bmNcblx0XG5cdGxvY2FsQXVkaW9CZ20ucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKGUpe1xuXHRcdHZhciBfdGhpcz1lP2UuZGF0YS50YXJnZXQ6dGhpcztcblx0ICAgIGlmKF90aGlzLnBsYXllZCAmJiBfdGhpcy5sb2FkZWQpe1xuXHQgICAgXHRfdGhpcy5wbGF5ZWQ9MDtcblx0ICAgIFx0X3RoaXMuY3VycmVudFRpbWUgPSBfdGhpcy5hdWRpby5jdXJyZW50VGltZTtcblx0ICAgIFx0X3RoaXMuYXVkaW8ucGF1c2UoKTtcblx0XHRcdFx0X3RoaXMuYmdtUGxheT0wO1xuXHRcdFx0XHRfdGhpcy5wbGF5U3RhdHVzID0gZmFsc2Vcblx0XHR9Ly9lZG4gaWZcblx0XHRpZihfdGhpcy5idG4ubGVuZ3RoPjApIF90aGlzLmJ0bi5yZW1vdmVDbGFzcyhfdGhpcy5wbGF5Q2xhc3NOYW1lKS5hZGRDbGFzcyhfdGhpcy5zdG9wQ2xhc3NOYW1lKS5vbmUoJ2NsaWNrJyx7dGFyZ2V0Ol90aGlzfSxfdGhpcy5wbGF5KTtcblx0fS8vZW5kIGZ1bmNcblx0XG5cdGxvY2FsQXVkaW9CZ20ucHJvdG90eXBlLm11dGU9ZnVuY3Rpb24obXV0ZWQpe1xuXHRcdG11dGVkPW11dGVkfHwwO1xuXHQgICAgdGhpcy5hdWRpby5tdXRlZD1tdXRlZDtcblx0fS8vZW5kIGZ1bmNcblx0XG5cdGZ1bmN0aW9uIHdlYkF1ZGlvQmdtKG9wdHMpe1xuXHRcdHRoaXMuY29udGV4dD1uZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTsgO1xuXHRcdHRoaXMuZ2Fpbk5vZGU9IHRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7XG5cdCAgICB0aGlzLmJ1ZmZlcj1udWxsO1xuXHQgICAgdGhpcy5zb3VyY2U9bnVsbDtcblx0ICAgIHRoaXMuc3JjPW9wdHMuc3JjO1xuXHQgICAgdGhpcy5zdGFydFRpbWUgPSAwO1xuXHQgICAgdGhpcy5vbkxvYWRlZD1vcHRzLm9uTG9hZGVkO1xuXHQgICAgdGhpcy5iZ21QbGF5PXNlc3Npb25TdG9yYWdlLmJnbVBsYXk9PW51bGw/b3B0cy5hdXRvcGxheToob3B0cy5hdXRvcGxheSAmJiBwYXJzZUludChzZXNzaW9uU3RvcmFnZS5iZ21QbGF5KSk7XG5cdFx0Y29uc29sZS5sb2coJ3RoaXMgYmdtUGxheTonK3RoaXMuYmdtUGxheSk7XG5cdFx0dGhpcy5iZ21UaW1lPXNlc3Npb25TdG9yYWdlLmJnbVRpbWU7XG5cdFx0dGhpcy5iZ21UaW1lPXRoaXMuYmdtVGltZXx8MDtcblx0XHR0aGlzLmJnbVRpbWU9TnVtYmVyKHRoaXMuYmdtVGltZSk7XG5cdFx0Y29uc29sZS5sb2coJ2JnbVRpbWU6Jyt0aGlzLmJnbVRpbWUpO1xuXHRcdHRoaXMuY3VycmVudFRpbWUgPSB0aGlzLmJnbVRpbWU7XG5cdFx0dGhpcy5idG49b3B0cy5idG47XG5cdFx0dGhpcy5wbGF5Q2xhc3NOYW1lPW9wdHMucGxheUNsYXNzTmFtZTtcblx0XHR0aGlzLnN0b3BDbGFzc05hbWU9b3B0cy5zdG9wQ2xhc3NOYW1lO1xuXHQgICAgdGhpcy5sb2FkKCk7XG5cdH0vL2VuZCBmdW5jXG5cdFxuXHR3ZWJBdWRpb0JnbS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe1xuXHRcdHZhciBfdGhpcz10aGlzO1xuXHQgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOyAvL+mAmui/h1hIUuS4i+i9vemfs+mikeaWh+S7tlxuXHQgICAgeGhyLm9wZW4oJ0dFVCcsIHRoaXMuc3JjLCB0cnVlKTtcblx0ICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuXHQgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsgLy/kuIvovb3lrozmiJBcblx0ICAgIFx0aWYoX3RoaXMub25Mb2FkZWQpIF90aGlzLm9uTG9hZGVkKCk7XG5cdCAgICAgICAgaW5pdCh0aGlzLnJlc3BvbnNlKTtcblx0ICAgIH07XG5cdCAgICB4aHIuc2VuZCgpO1xuXHQgICAgXG5cdCAgICBmdW5jdGlvbiBpbml0KGFycmF5QnVmZmVyKXtcblx0XHRcdF90aGlzLmNvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBmdW5jdGlvbihidWZmZXIpIHtcblx0XHRcdFx0X3RoaXMuYnVmZmVyID0gYnVmZmVyO1xuXHRcdFx0XHRpZihfdGhpcy5iZ21QbGF5KSBfdGhpcy5wbGF5KCk7XG5cdFx0XHRcdGVsc2UgX3RoaXMucGF1c2UoKTtcblx0XHQgICAgfSwgZnVuY3Rpb24oZSkge1xuXHRcdCAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRlY29kaW5nIGZpbGUnLCBlKTtcblx0XHQgICAgfSk7XG5cdCAgICB9Ly9lZG4gZnVuY1xuXHR9Ly9lZG4gcHJvdG90eXBlXG5cdFxuXHR3ZWJBdWRpb0JnbS5wcm90b3R5cGUudm9sdW1lPWZ1bmN0aW9uKHZvbHVtZSl7XG5cdFx0aWYodm9sdW1lIT1udWxsKXtcblx0XHRcdHZvbHVtZT1NYXRoLm1heCgtMSxNYXRoLm1pbih2b2x1bWUsMSkpO1xuXHRcdFx0dGhpcy5nYWluTm9kZS5nYWluLnZhbHVlID0gdm9sdW1lO1xuXHRcdH0vL2VuZWQgaWZcblx0XHRlbHNlIHJldHVybiB0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWU7XG5cdH0vL2VuZCBwcm90b3R5cGVcblx0XG5cdHdlYkF1ZGlvQmdtLnByb3RvdHlwZS50aW1lPWZ1bmN0aW9uKGN1cnJlbnRUaW1lKXtcblx0XHRpZihjdXJyZW50VGltZSE9bnVsbCAmJiBjdXJyZW50VGltZT4wKXtcblx0XHRcdHRoaXMuY3VycmVudFRpbWU9Y3VycmVudFRpbWU7XG5cdFx0fS8vZWRuIGlmXG5cdFx0ZWxzZSByZXR1cm4gdGhpcy5jdXJyZW50VGltZTtcblx0fS8vZW5kIGZ1bmNcblx0XG5cdHdlYkF1ZGlvQmdtLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKGUpe1xuXHRcdHZhciBfdGhpcz1lP2UuZGF0YS50YXJnZXQ6dGhpcztcblx0XHRfdGhpcy5iZ21QbGF5PTE7XG5cdFx0X3RoaXMuc291cmNlID0gX3RoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcblx0ICAgIF90aGlzLnNvdXJjZS5idWZmZXIgPSBfdGhpcy5idWZmZXI7XG5cdCAgICBfdGhpcy5zb3VyY2UubG9vcCA9IHRydWU7XG5cdCAgICBfdGhpcy5zb3VyY2UuY29ubmVjdChfdGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTtcblx0ICAgIF90aGlzLnNvdXJjZS5zdGFydCgwLF90aGlzLmN1cnJlbnRUaW1lICUgX3RoaXMuYnVmZmVyLmR1cmF0aW9uKTtcblx0ICAgIF90aGlzLnN0YXJ0VGltZSA9IF90aGlzLmNvbnRleHQuY3VycmVudFRpbWU7XG5cdCAgICBfdGhpcy5zb3VyY2UuY29ubmVjdChfdGhpcy5nYWluTm9kZSk7XG5cdFx0XHRfdGhpcy5nYWluTm9kZS5jb25uZWN0KF90aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO1xuXHRcdFx0X3RoaXMucGxheVN0YXR1cyA9IHRydWVcblx0XHRpZihfdGhpcy5idG4ubGVuZ3RoPjApIF90aGlzLmJ0bi5yZW1vdmVDbGFzcyhfdGhpcy5zdG9wQ2xhc3NOYW1lKS5hZGRDbGFzcyhfdGhpcy5wbGF5Q2xhc3NOYW1lKS5vbmUoJ2NsaWNrJyx7dGFyZ2V0Ol90aGlzfSxfdGhpcy5wYXVzZSk7XG5cdH0vL2VuZCBwcm90b3R5cGVcblx0XG5cdHdlYkF1ZGlvQmdtLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbihlKXtcblx0XHR2YXIgX3RoaXM9ZT9lLmRhdGEudGFyZ2V0OnRoaXM7XG5cdCAgICBpZihfdGhpcy5zb3VyY2Upe1xuXHRcdFx0X3RoaXMuYmdtUGxheT0wO1xuXHRcdFx0X3RoaXMuc291cmNlLnN0b3AoMCk7XG5cdCAgICBcdF90aGlzLmN1cnJlbnRUaW1lICs9IF90aGlzLmNvbnRleHQuY3VycmVudFRpbWUgLSBfdGhpcy5zdGFydFRpbWU7XG5cdFx0XHRcdF90aGlzLmJnbVRpbWU9X3RoaXMuY3VycmVudFRpbWU7XG5cdFx0XHRfdGhpcy5wbGF5U3RhdHVzID0gZmFsc2Vcblx0XHR9Ly9lZG4gaWZcblx0XHRpZihfdGhpcy5idG4ubGVuZ3RoPjApIF90aGlzLmJ0bi5yZW1vdmVDbGFzcyhfdGhpcy5wbGF5Q2xhc3NOYW1lKS5hZGRDbGFzcyhfdGhpcy5zdG9wQ2xhc3NOYW1lKS5vbmUoJ2NsaWNrJyx7dGFyZ2V0Ol90aGlzfSxfdGhpcy5wbGF5KTtcblx0fS8vZW5kIHByb3RvdHlwZVxuXHRcblx0d2ViQXVkaW9CZ20ucHJvdG90eXBlLm11dGU9ZnVuY3Rpb24obXV0ZWQpe1xuXHRcdG11dGVkPW11dGVkfHwwO1xuXHRcdGlmKG11dGVkKXtcblx0XHRcdHRoaXMudm9sdW1lKC0xKTtcblx0XHR9Ly9lZG4gaWZcblx0XHRlbHNle1xuXHRcdFx0dGhpcy52b2x1bWUoMSk7XG5cdFx0fS8vZW5kIGVsc2Vcblx0fS8vZW5kIHByb3RvdHlwZVxuXHRcblx0ZnVuY3Rpb24gZ2V0X3NyYyhzdHIpe1xuXHRcdHZhciBhcnk9c3RyLnNwbGl0KCcvJyk7XG5cdFx0cmV0dXJuIGFyeVthcnkubGVuZ3RoLTFdO1xuXHR9Ly9lbmQgZnVuY1xuXHRcblx0cmV0dXJuIGF1ZGlvO1xufS8vZW5kIGltcG9ydFxuXG52YXIgaWJnbT1pbXBvcnRCZ20oKTtcblxuZnVuY3Rpb24gaW1wb3J0QmdtKCl7XG5cdHZhciBiZ209e307XG5cdHZhciBkZWZhdWx0cyA9IHt3ZWJBdWRpbzowLHNyYzonJyxhdXRvcGxheToxfTtcblx0dmFyIG9wdHM9e307XG5cdFxuXHRiZ20uaW5pdD1mdW5jdGlvbihvcHRpb25zKXtcblx0XHRvcHRzID0gJC5leHRlbmQoZGVmYXVsdHMsb3B0aW9ucyk7XG5cdFx0aWYob3B0cy5zcmMhPScnKXtcblx0XHRcdGliYXNlLmNyZWF0Tm9kZSgnYScsbnVsbCwnYmdtQnRuJyxudWxsLGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2FydGljbGUnKSk7XG5cdFx0XHRiZ20uYXVkaW89aWF1ZGlvLmJnbSh7c3JjOm9wdHMuc3JjLG9uTG9hZGVkOm9wdHMub25Mb2FkZWQsd2ViQXVkaW86b3B0cy53ZWJBdWRpbyxhdXRvcGxheTpvcHRzLmF1dG9wbGF5fSk7XG5cdFx0XHR0aGlzLmJ0bj0kKCdhLmJnbUJ0bicpO1xuXHRcdH0vL2VkbiBpZlxuXHR9Ly9lZG4gZnVuY1xuXHRcblx0YmdtLmhyZWY9ZnVuY3Rpb24odXJsKXtcblx0XHRpZih1cmwgJiYgdXJsIT0nJyl7XG5cdFx0XHRzZXNzaW9uU3RvcmFnZS5iZ21QbGF5PWliZ20uYXVkaW8uYmdtUGxheTtcblx0XHRcdHZhciBiZ21UaW1lPW9wdHMud2ViQXVkaW8/aWJnbS5hdWRpby5jdXJyZW50VGltZStpYmdtLmF1ZGlvLmNvbnRleHQuY3VycmVudFRpbWUtaWJnbS5hdWRpby5zdGFydFRpbWU6aWJnbS5hdWRpby5hdWRpby5jdXJyZW50VGltZTtcblx0XHRcdHNlc3Npb25TdG9yYWdlLmJnbVRpbWU9aWJnbS5hdWRpby5iZ21QbGF5P2JnbVRpbWU6aWJnbS5hdWRpby5jdXJyZW50VGltZTtcblx0XHRcdGxvY2F0aW9uLmhyZWY9dXJsO1xuXHRcdH0vL2VkbiBmdW5jXG5cdH0vL2VkbiBmdW5jXG5cdFxuXHRiZ20udm9sdW1lPWZ1bmN0aW9uKHZvbHVtZSl7XG5cdFx0aWYodm9sdW1lIT1udWxsKSBiZ20uYXVkaW8udm9sdW1lKHZvbHVtZSk7XG5cdFx0ZWxzZSByZXR1cm4gYmdtLmF1ZGlvLnZvbHVtZSgpO1xuXHR9Ly9lbmQgZnVuY1xuXHRcblx0YmdtLmN1cnJlbnRUaW1lPWZ1bmN0aW9uKGN1cnJlbnRUaW1lKXtcblx0XHRpZihjdXJyZW50VGltZSE9bnVsbCAmJiBjdXJyZW50VGltZT4wKSBiZ20uYXVkaW8udGltZShjdXJyZW50VGltZSk7XG5cdFx0ZWxzZSByZXR1cm4gYmdtLmF1ZGlvLnRpbWUoKTtcblx0fS8vZW5kIGZ1bmNcblx0XG5cdGJnbS5wYXVzZT1mdW5jdGlvbigpe1xuXHRcdGJnbS5hdWRpby5wYXVzZSgpO1xuXHR9Ly9lZG4gZnVuY1xuXHRcblx0YmdtLnBsYXk9ZnVuY3Rpb24oKXtcblx0XHRiZ20uYXVkaW8ucGxheSgpO1xuXHR9Ly9lZG4gZnVuY1xuXHRcblx0YmdtLmhpZGU9ZnVuY3Rpb24ocGF1c2Upe1xuXHRcdHBhdXNlPXBhdXNlIT1udWxsP3BhdXNlOnRydWU7XG5cdFx0aWYocGF1c2UpIHRoaXMucGF1c2UoKTtcblx0XHR0aGlzLmJ0bi5oaWRlKCk7XG5cdH0vL2VkbiBmdW5jXG5cdFxuXHRiZ20uc2hvdz1mdW5jdGlvbihyZXN1bWUpe1xuXHRcdHJlc3VtZT1yZXN1bWUhPW51bGw/cmVzdW1lOnRydWU7XG5cdFx0aWYocmVzdW1lKSB0aGlzLnBsYXkoKTtcblx0XHR0aGlzLmJ0bi5zaG93KCk7XG5cdH0vL2VkbiBmdW5jXG5cdFxuXHRiZ20ubXV0ZT1mdW5jdGlvbihtdXRlZCl7XG5cdFx0bXV0ZWQ9bXV0ZWR8fDA7XG5cdFx0Y29uc29sZS5sb2coYmdtLmF1ZGlvKVxuXHRcdGJnbS5hdWRpby5tdXRlKG11dGVkKTtcblx0XHRpZihtdXRlZCkgdGhpcy5idG4uaGlkZSgpO1xuXHRcdGVsc2UgdGhpcy5idG4uc2hvdygpO1xuXHR9Ly9lZG4gZnVuY1xuXHRcblx0cmV0dXJuIGJnbTtcblx0XG59Ly9lZG4gZnVuY1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0ZmFjdG9yeShnbG9iYWwpO1xufSkodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIChnbG9iYWwpIHtcblx0Z2xvYmFsLmlhdWRpbyA9IGltcG9ydEF1ZGlvKCk7XG5cdGdsb2JhbC5pYmdtID0gaW1wb3J0QmdtKCk7XG59KSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/base/audio.js\n");

/***/ }),

/***/ "./src/js/base/com.js":
/*!****************************!*\
  !*** ./src/js/base/com.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("//2018.11.14\nfunction importCom() {\n  var com = {}; //初始化\n\n  com.init = function (callback) {\n    var article = $('article');\n\n    if (ibase.dir == 'portrait') {\n      lock_dected();\n    } //edn if\n    else {\n        html_resize();\n        $(window).on('resize', window_orientation);\n        lock_dected();\n      } //end else\n\n\n    function lock_dected() {\n      if (ibase.lock) requestAnimationFrame(lock_dected);else if (callback) callback();\n    } //edn func\n\n\n    function window_orientation(e) {\n      if (os.ios) for (var i = 0; i < 3; i++) {\n        setTimeout(html_resize, i * 150);\n      } else html_resize();\n    } //edn func\n\n\n    function html_resize() {\n      var dir = ibase.getOrient(true);\n\n      if (dir == 'portrait') {\n        if (ibase.landscapeScaleMode == 'cover' || ibase.landscapeScaleMode == 'contain') {\n          var size = imath.autoSize([ibase.landscapeHeight, ibase.landscapeWidth], [window.innerWidth, window.innerHeight], ibase.landscapeScaleMode);\n          var scale = size[0] / ibase.landscapeHeight;\n          console.log('window size:' + window.innerHeight + '/' + window.innerWidth);\n          console.log('auto scale:' + scale);\n          ibase.landScapeScaleX = ibase.landScapeScaleY = scale;\n          article.css({\n            width: ibase.landscapeWidth,\n            height: ibase.landscapeHeight,\n            rotate: 90,\n            scale: scale,\n            x: os.iphoneX ? 0 : (window.innerHeight / scale - ibase.landscapeWidth) * 0.5,\n            y: -ibase.landscapeHeight + (ibase.landscapeHeight - window.innerWidth / scale) * 0.5\n          });\n        } //edn if\n        else {\n            var scale = [window.innerWidth / ibase.landscapeHeight, window.innerHeight / ibase.landscapeWidth];\n            console.log('window size:' + window.innerHeight + '/' + window.innerWidth);\n            console.log('auto scale:' + scale);\n            ibase.landScapeScaleX = scale[0];\n            ibase.landScapeScaleY = scale[1];\n            article.css({\n              width: ibase.landscapeWidth,\n              height: ibase.landscapeHeight,\n              rotate: 90,\n              scaleX: scale[1],\n              scaleY: scale[0],\n              x: 0,\n              y: -ibase.landscapeHeight\n            });\n          } //end else\n\n      } //end if\n      else {\n          console.log('screen landscape');\n\n          if (ibase.landscapeScaleMode == 'cover' || ibase.landscapeScaleMode == 'contain') {\n            var size = imath.autoSize([ibase.landscapeWidth, ibase.landscapeHeight], [os.iphoneX && window.innerWidth > 724 ? window.innerWidth - ibase.iphoneXOffsetLandscape * 2 : window.innerWidth, window.innerHeight], ibase.landscapeScaleMode);\n            var scale = size[0] / ibase.landscapeWidth;\n            console.log('window size:' + window.innerWidth + '/' + window.innerHeight);\n            console.log('auto scale:' + scale);\n            ibase.landScapeScaleX = ibase.landScapeScaleY = scale;\n            article.css({\n              width: ibase.landscapeWidth,\n              height: ibase.landscapeHeight,\n              rotate: 0,\n              scale: scale,\n              x: (window.innerWidth / scale - ibase.landscapeWidth) * 0.5 + os.iphoneX && window.innerWidth > 724 ? ibase.iphoneXOffsetLandscape / scale : 0,\n              y: (window.innerHeight / scale - ibase.landscapeHeight) * 0.5\n            });\n          } //edn if\n          else {\n              var scale = [window.innerWidth / ibase.landscapeWidth, window.innerHeight / ibase.landscapeHeight];\n              console.log('window size:' + window.innerHeight + '/' + window.innerWidth);\n              console.log('auto scale:' + scale);\n              ibase.landScapeScaleX = scale[0];\n              ibase.landScapeScaleY = scale[1];\n              article.css({\n                width: ibase.landscapeWidth,\n                height: ibase.landscapeHeight,\n                rotate: 0,\n                scaleX: scale[0] + os.iphoneX ? ibase.iphoneXOffsetLandscape / scale[0] : 0,\n                scaleY: scale[1],\n                x: 0,\n                y: 0\n              });\n            } //end else\n\n        } //end else\n\n    } //edn func\n\n  }; //edn func\n  //解锁屏幕滑动\n\n\n  com.screenScrollEnable = function () {\n    var article = $('article');\n    var html = $('html');\n\n    if (ibase.dir == 'portrait') {\n      article.css({\n        'overflow-y': 'auto'\n      });\n      if (os.ios) html.css({\n        'position': 'relative'\n      });\n      $(document).off('touchmove', noScroll);\n    } //edn if\n    else {\n        article.off('touchmove', noScroll);\n      } //edn else\n\n  }; //end func\n  //锁定屏幕滑动\n\n\n  com.screenScrollUnable = function () {\n    var article = $('article');\n    var html = $('html');\n\n    if (ibase.dir == 'portrait') {\n      article.css({\n        'overflow-y': 'hidden'\n      });\n      if (os.ios) html.css({\n        'position': 'fixed'\n      });\n      $(document).on('touchmove', noScroll);\n    } //edn if\n    else {\n        article.on('touchmove', noScroll);\n      } //edn else\n\n  }; //end func\n\n\n  function noScroll(e) {\n    e.preventDefault();\n  } //end func\n  //取代jquery的fadeIn\n\n\n  com.fadeIn = function (obj, dur, callback) {\n    if (obj) {\n      dur = dur || 500;\n      obj.show().css({\n        opacity: 0\n      }).transition({\n        opacity: 1\n      }, dur, function () {\n        if (callback) callback($(this));\n      });\n    } //end if\n\n  }; //end func\n  //取代jquery的fadeOut\n\n\n  com.fadeOut = function (obj, dur, callback) {\n    if (obj) {\n      dur = dur || 500;\n      obj.transition({\n        opacity: 0\n      }, dur, function () {\n        $(this).hide().css({\n          opacity: 1\n        });\n        if (callback) callback($(this));\n      });\n    } //end if\n\n  }; //end func\n  //打开弹窗，会自动寻找a.close对象绑定关闭事件，并在关闭时执行回调\n\n\n  com.popOn = function (obj, options) {\n    if (obj && obj.length > 0) {\n      var defaults = {\n        closeEvent: 'touchend',\n        closeType: 'button',\n        closeBtn: obj.find('a.close'),\n        onClose: function onClose() {},\n        remove: false\n      };\n      var opts = $.extend(defaults, options);\n      if (opts.text) obj.find('.text').html(opts.text);\n      if (opts.fade) com.fadeIn(obj, opts.fade);else obj.show();\n      if (opts.closeBtn.length > 0 && opts.closeType == 'button') opts.closeBtn.one(opts.closeEvent, obj_close);else obj.one(opts.closeEvent, obj_close);\n      obj.on('close', obj_close);\n    } //end if\n\n\n    function obj_close(e) {\n      if (opts.closeBtn.length > 0 && opts.closeType == 'button') opts.closeBtn.off(opts.closeEvent, obj_close);else obj.off(opts.closeEvent, obj_close);\n      if (opts.fade) com.fadeOut(obj, opts.fade, function () {\n        if (opts.remove) obj.remove();\n      });else if (opts.remove) obj.remove();else obj.hide();\n      obj.off('close', obj_close);\n      opts.onClose(obj);\n    } //end func\n\n  }; //end func\n  //关闭使用popOn方法打开的弹窗\n\n\n  com.popOff = function (obj) {\n    if (obj && obj.length > 0) obj.trigger('close');\n  }; //end func\n  //取代系统alert\n\n\n  com.alert = function (text, callback) {\n    if (text && text != '') {\n      var box = $('<aside class=\"alertBox\"><div><p class=\"text\"></p><p class=\"btn\"><a href=\"javascript:;\" class=\"close\">确定</a></p></div></aside>').appendTo(ibase.dir == 'landscape' ? 'article' : 'body');\n      com.popOn(box, {\n        text: text,\n        onClose: callback,\n        remove: true,\n        closeEvent: 'click'\n      });\n    } //end if\n\n  }; //end func\n  //带有“取消”和“确认”按钮的对话框\n\n\n  com.confirm = function (text, callbackConfirm, callbackCancel, btnCancelText, btnConfirmText) {\n    text = text || '';\n    btnCancelText = btnCancelText || '取消';\n    btnConfirmText = btnConfirmText || '确认';\n\n    if (text != '') {\n      var box = $('<aside class=\"confirmBox\"><div><p class=\"text\">' + text + '</p><p class=\"btn\"><a href=\"javascript:;\" class=\"cancel\">' + btnCancelText + '</a><a href=\"javascript:;\" class=\"confirm\">' + btnConfirmText + '</a></p></div></aside>').appendTo(ibase.dir == 'landscape' ? 'article' : 'body');\n      var btn = box.find('a');\n      btn.one('click', function (e) {\n        if ($(this).index() == 0 && callbackCancel) callbackCancel();else if ($(this).index() == 1 && callbackConfirm) callbackConfirm();\n        btn.off();\n        box.remove();\n      });\n    } //end if\n\n  }; //end func\n  //获得http url参数\n\n\n  com.getQueryString = function (name) {\n    if (name && name != '') {\n      var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\n      var r = window.location.search.substr(1).match(reg);\n      if (r != null) return decodeURIComponent(r[2]);\n      return null;\n    } //end if\n    else return null;\n  }; //end func\n  //获取路径\n\n\n  com.getPath = function (path) {\n    if (path && path != '') return path.substr(0, path.lastIndexOf('/') + 1);else return false;\n  }; //edn func\n  //载入图片函数\n\n\n  com.imageLoad = function (src, callback) {\n    if (src) {\n      var loader = new PxLoader();\n      if ($.type(src) === \"string\" && src != '') loader.addImage(src);else if ($.type(src) === \"array\" && src.length > 0) {\n        for (var i = 0; i < src.length; i++) {\n          loader.addImage(src[i]);\n        }\n      } //end else\n\n      loader.addCompletionListener(function () {\n        loader = null;\n        if (callback) callback(src);\n      });\n      loader.start();\n    } //end if\n\n  }; //end func\t\n  //常用正则\n\n\n  com.checkStr = function (str, type) {\n    if (str && str != '') {\n      type = type || 0;\n\n      switch (type) {\n        case 0:\n          var reg = new RegExp(/^1\\d{10}$/); //手机号码验证\n\n          break;\n\n        case 1:\n          var reg = new RegExp(/^\\d{6}$/); //6位验证码验证\n\n          break;\n\n        case 2:\n          var reg = new RegExp(/^(\\w-*\\.*)+@(\\w-?)+(\\.\\w{2,})+$/); //匹配EMAIL\n\n          break;\n\n        case 3:\n          var reg = new RegExp(/(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/); //匹配身份证\n\n          break;\n\n        case 4:\n          var reg = new RegExp(/^\\d+$/); //是否为0-9的数字\n\n          break;\n\n        case 5:\n          var reg = new RegExp(/^[a-zA-Z\\u0391-\\uFFE5]*[\\w\\u0391-\\uFFE5]*$/); //不能以数字或符号开头\n\n          break;\n\n        case 6:\n          var reg = new RegExp(/^\\w+$/); //匹配由数字、26个英文字母或者下划线组成的字符串\n\n          break;\n\n        case 7:\n          var reg = new RegExp(/^[\\u0391-\\uFFE5]+$/); //匹配中文\n\n          break;\n\n        case 8:\n          var reg = new RegExp(/^[a-zA-Z\\u0391-\\uFFE5]+$/); //不能包含数字和符号\n\n          break;\n      } //end switch\n\n\n      if (reg.exec($.trim(str))) return true;else return false;\n    } //end if\n    else return false;\n  }; //end func\n  //解决ios下input、textarea无法自动失去焦点的问题\n\n\n  com.keyboard = function (input) {\n    input = input || $('input,textarea,[contenteditable=\"true\"]');\n\n    if (input.length > 0) {\n      var body = $('body');\n      if (os.ios) input.on('focus', input_focus).on('blur', input_blur);else body.height(body[0].clientHeight);\n    } //end if\n\n\n    function input_focus(e) {\n      body.one('touchend', ios_blur);\n    } //edn event\n\n\n    function input_blur() {\n      $(window).scrollTop(0);\n    } //edn event\n\n\n    function ios_blur(e) {\n      if (e.target != input[0]) input.blur();\n    } //edn event\n\n  }; //end func\n  //解决ios下select无法自动失去焦点的问题\n\n\n  com.select = function (select) {\n    select = select || $('select');\n\n    if (select.length > 0) {\n      if (os.ios) {\n        select.on('focus', function (e) {\n          $(document).one('touchend', ios_select);\n        });\n      } //end if\n\n    } //end if\n\n\n    function ios_select(e) {\n      if (e.target != select[0]) select.blur();\n    } //edn func\n\n  }; //end func\n  //物体抖动\n\n\n  com.shake = function (box, options) {\n    if (box && box.length > 0) {\n      var defaults = {\n        rx: 5,\n        ry: 5,\n        delay: 33,\n        now: 0,\n        max: 5,\n        restore: true\n      };\n      var opts = $.extend(defaults, options);\n      var x = imath.randomRange(-opts.rx, opts.rx);\n      var y = imath.randomRange(-opts.ry, opts.ry);\n      box.css({\n        x: x,\n        y: y\n      });\n      opts.now++;\n\n      if (opts.now > opts.max) {\n        if (opts.restore) box.css({\n          x: 0,\n          y: 0\n        });\n        if (opts.onComplete) opts.onComplete();\n      } //end if\n      else setTimeout(com.shake, opts.delay, box, opts);\n    } //end if\n\n  }; //end func\n  //获取textarea里的回车和空格\n\n\n  com.textareaGet = function (textarea, row) {\n    row = row || 0;\n    var str1 = textarea.val();\n    if (str1 == '') return '';else {\n      var str2 = str1.replaceAll(\"\\n\", \"<br/>\");\n      return row_cut(str2, row);\n    } //end else\n  }; //edn func\n  //输入textarea里的回车和空格\n\n\n  com.textareaSet = function (textarea, str) {\n    if (str == '') textarea.val('');else textarea.val(str.replaceAll(\"<br/>\", \"\\n\"));\n  }; //edn func\n  //限制textarea输入文字的行数\n\n\n  com.textareaLock = function (textarea) {\n    if (textarea && textarea.length > 0) {\n      var timer;\n      var row = parseInt(textarea.attr('rows')) || 0;\n      var col = parseInt(textarea.attr('cols')) || 0;\n      var max = parseInt(textarea.attr('maxlength')) || 0;\n      max = max == 0 ? row * col : max;\n      if (row > 0 && col > 0 && max > 0) textarea.on('focus', textarea_focus).on('blur', textarea_blur);\n    } //end if\n\n\n    function textarea_focus(e) {\n      timer = requestAnimationFrame(textarea_lock);\n    } //edn func\n\n\n    function textarea_blur(e) {\n      cancelAnimationFrame(timer);\n      var first = com.textareaGet(textarea, row);\n\n      if (first.indexOf('<br/>') != -1) {\n        var str2 = first.split('<br/>');\n        var str3 = '';\n\n        for (var i = 0; i < str2.length; i++) {\n          str3 += col_break(str2[i], col);\n          if (i < str2.length - 1) str3 += '<br/>';\n        } //end for\n\n\n        str3 = row_cut(str3, row);\n\n        var _final = str3.replaceAll(\"<br/>\", \"\\n\");\n\n        textarea.val(_final);\n      } //end if\n\n    } //edn func\n\n\n    function textarea_lock() {\n      var first = com.textareaGet(textarea, row);\n      if (first.indexOf('<br/>') == -1) textarea.attr({\n        maxlength: max\n      });else textarea.attr({\n        maxlength: max + (first.split('<br/>').length - 1) * 2\n      });\n    } //edn func\n\n  }; //edn func\n\n\n  function row_cut(str, row) {\n    row = row || 0;\n    var str2 = str.split('<br/>');\n    if (row <= 0 || str2.length <= row) return str;else {\n      var str3 = '';\n\n      for (var i = 0; i < row; i++) {\n        str3 += str2[i];\n        if (i < row - 1) str3 += '<br/>';\n      } //edn for\n\n\n      return str3;\n    } //end else\n  } //end func\n\n\n  function col_break(str, col) {\n    var line = Math.ceil(str.length / col);\n    if (line == 1) return str;else {\n      var str1 = '';\n\n      for (var i = 0; i < line; i++) {\n        if (i == 0) str1 += str.substr(0, col) + '<br/>';else if (i < line - 1) str1 += str.substr(i * col, col) + '<br/>';else str1 += str.substr(i * col);\n      } //edn for\n\n\n      return str1;\n    } //end else\n  } //end func\n\n\n  function col_cut(str, col) {\n    if (str.length > col) return str.substr(0, col);else return str;\n  } //end func\n  //限制textarea输入文字的行数\n\n\n  com.textareaUnlock = function (textarea) {\n    textarea.off();\n  }; //edn func\n  //切割单行文字成几行\n\n\n  com.textToMulti = function (str, col) {\n    if (str != '' && col > 1) {\n      if (str.indexOf('\\n') == -1 && str.length > col) {\n        var str1 = '';\n        var line = Math.ceil(str.length / col);\n        console.log('line:' + line);\n\n        for (var i = 0; i < line; i++) {\n          if (i < line - 1) str1 += str.substr(i * col, col) + '\\n';else str1 += str.substr(i * col);\n        } //edn for\n\n\n        return str1;\n      } //end if\n      else return str;\n    } //edn if\n    else return null;\n  }; //edn func\n  //拼带参数的url链接\n\n\n  com.url = function (url, para) {\n    var now = -1;\n\n    for (var key in para) {\n      now++;\n      if (now == 0) url += '?';else url += '&';\n      url += key + '=' + para[key];\n    } //end for\n\n\n    return url;\n  }; //end func\n  //以帧为单位的setTimeout\n\n\n  com.setTimeout = function (callback, frame) {\n    if (frame > 0 && callback) return setTimer(callback, frame, false);\n  }; //edn func\n\n\n  com.clearTimeout = function (timer) {\n    if (timer && timer.timer) clearTimer(timer);\n  }; //edn func\n  //以帧为单位的setInterval\n\n\n  com.setInterval = function (callback, frame) {\n    if (frame > 0 && callback) return setTimer(callback, frame, true);\n  }; //edn func\n\n\n  com.clearInterval = function (timer) {\n    if (timer && timer.timer) clearTimer(timer);\n  }; //edn func\n\n\n  function clearTimer(timer) {\n    cancelAnimationFrame(timer.timer);\n    timer = null;\n  } //edn func\n\n\n  function setTimer(callback, frame, interval) {\n    var timer = {\n      now: 0,\n      timer: null\n    };\n    timer_handler();\n    return timer;\n\n    function timer_handler() {\n      timer.now++;\n      var timeup = timer.now == frame;\n\n      if (timeup) {\n        timer.now = 0;\n        callback();\n      } //end if\n\n\n      if (interval || !interval && !timeup) timer.timer = requestAnimationFrame(timer_handler);\n    } //end func\n\n  } //edn func\n  //将canvas转成存在cdn服务器上的远程图片地址\n\n\n  com.canvas_send = function (canvas, callback, secretkey, type, compress) {\n    if (canvas) {\n      secretkey = secretkey || 'test';\n      type = type || 'jpg';\n      compress = compress || 0.95;\n      if (type == 'png') var base64 = canvas.toDataURL('image/png');else var base64 = canvas.toDataURL('image/jpeg', compress);\n      this.base64_send(base64, callback, secretkey);\n    } //edn if\n\n  }; //end func\n  //将base64数据格式转成存在cdn服务器上的远程图片地址\n\n\n  com.base64_send = function (base64, callback, secretkey) {\n    if (base64) {\n      secretkey = secretkey || 'test';\n      $.post('https://tool.h5-x.com/cdn/base64', {\n        data: base64,\n        key: secretkey\n      }, function (resp) {\n        if (resp.errcode == 0) {\n          if (callback) callback(resp.result);\n        } //edn if\n        else {\n            console.log('errmsg:' + resp.errmsg);\n          } //edn else\n\n      }, 'json');\n    } //edn if\n\n  }; //end func\n  //将跨域的远程图片地址转成base64数据格式，解决图片跨域问题\n\n\n  com.base64_get = function (link, callback, secretkey) {\n    if (link) {\n      secretkey = secretkey || 'test';\n      $.post('http://tool.h5-x.com/image/base64', {\n        link: link,\n        key: secretkey\n      }, function (resp) {\n        if (callback) callback(resp);\n      }, 'text');\n    } //edn if\n\n  }; //end func\n  //将字符串转成二维码，返回base64数据格式\n\n\n  com.qrcode = function (txt, options) {\n    var defaults = {\n      size: 200,\n      color: '000000',\n      bg: 'ffffff',\n      border: 0,\n      error: 0\n    };\n    var data = $.extend(defaults, options);\n\n    if (txt && txt != '') {\n      var src = 'http://tool.h5-x.com/image/qrcode?txt=' + txt + '&size=' + data.size + '&color=' + data.color + '&bg=' + data.bg + '&border=' + data.border + '&error=' + data.error + (data.logo ? '&logo=' + data.logo : '');\n      return src;\n    } //edn if\n    else return null;\n  }; //end func\n  //将字符串转成条形码，返回base64数据格式\n\n\n  com.barcode = function (txt, options) {\n    var defaults = {\n      width: 400,\n      height: 200,\n      color: '000000',\n      bg: 'ffffff',\n      pure: true\n    };\n    var data = $.extend(defaults, options);\n\n    if (txt && txt != '') {\n      var src = 'http://tool.h5-x.com/image/barcode?txt=' + txt + '&width=' + data.width + '&height=' + data.height + '&color=' + data.color + '&bg=' + data.bg + '&pure=' + data.pure;\n      return src;\n    } //edn if\n    else return null;\n  }; //end func\n  //一键复制字符串到剪贴板\n\n\n  com.clipboard = function (box, val, onComplete, onError) {\n    var support = !!document.queryCommandSupported;\n    console.log('support:' + support);\n\n    if (support) {\n      if (box.length > 0 && val != '') {\n        box.attr({\n          'data-copy': val\n        }).on('click', {\n          callback: onComplete\n        }, copyText);\n      } //edn if\n\n    } //edn if\n    else {\n        console.log('浏览器不支持复制文本到剪贴板');\n        if (onError) onError();\n      } //end else\n\n  }; //edn func\n\n\n  function copyText(e) {\n    var val = $(this).data('copy');\n    var input = $('<textarea readonly=\"readonly\"></textarea>').html(val).css({\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      width: 1,\n      height: 1,\n      visible: 'hidden'\n    }).appendTo('body');\n    input[0].select();\n    input[0].setSelectionRange(0, input[0].value.length);\n    console.log('copy content:' + input.val());\n    document.execCommand('Copy');\n    input.remove();\n    input = null;\n    if (e.data.callback) e.data.callback();\n  } //edn func\n  //显示页面渲染fps\n\n\n  com.fpsShow = function (shell, space) {\n    space = space || 30;\n    space = space < 10 ? 10 : space;\n    shell = shell || $('<div id=\"fpsShow\"></div>').appendTo(ibase.dir == 'landscape' ? 'article' : 'body');\n    requestAnimationFrame(function () {\n      fps_dected(new Date().getTime(), -1);\n    });\n\n    function fps_dected(last, count) {\n      var now = new Date().getTime();\n      var fps = Math.round(1000 / (now - last));\n      fps = fps > 60 ? 60 : fps;\n      count++;\n\n      if (count % space == 0) {\n        if (fps >= 40) var classname = 'fpsFast';else if (fps >= 20) var classname = 'fpsNormal';else var classname = 'fpsSlow';\n        shell.removeClass().addClass(classname).html('fps:' + fps);\n      } //edn if\n\n\n      requestAnimationFrame(function () {\n        fps_dected(now, count);\n      });\n    } //edn func\n\n  }; //edn func\n  //出血方案\n\n\n  com.bleed = function (shell, maxSize) {\n    shell = shell || $('.articleBleed');\n    maxSize = maxSize || [936, 1218];\n\n    if (shell.length > 0) {\n      var article = $('article');\n      resize_handler();\n      $(window).on('resize', shell_resize);\n    } //edn if\n\n\n    function shell_resize(e) {\n      com.setTimeout(resize_handler, 5);\n    } //edn func\n\n\n    function resize_handler() {\n      if (window.innerWidth < window.innerHeight) {\n        var windowScale = window.innerWidth / 750;\n        var scale = article.height() / windowScale / maxSize[1];\n        ibase.bleedScale = scale;\n        shell.css({\n          transformOrigin: '50% ' + (os.iphoneX ? 0 : '0.15rem'),\n          scale: scale\n        });\n      } //edn func\n\n    } //edn func\n\n  }; //edn fun\n  //为iphoneX加上底部安全区域\n\n\n  com.FullBar = function (ht) {\n    ht = ht || 30;\n\n    if (os.FullBar) {\n      window_resize();\n      $(window).on('resize', window_resize);\n    } //edn if\n\n\n    function window_resize(e) {\n      if (window.innerHeight > 667) $('article').css({\n        height: 'calc( 100% - ' + ht * 0.01 + 'rem )'\n      });else $('article').css({\n        height: '100%'\n      });\n    } //end event\n\n  }; //edn fun\n  // 缩放适配方案\n\n\n  com.adaptation = function (scaleType, shell) {\n    shell = shell || $('.articleBleed');\n    var articleBox = $('article');\n\n    if (shell.length > 0) {\n      resize_handler();\n      $(window).on('resize', shell_resize);\n    } //edn if\n\n\n    function shell_resize(e) {\n      com.setTimeout(resize_handler, 5);\n    } //edn func\n\n\n    function resize_handler() {\n      var w = shell.width(),\n          h = shell.height();\n      var iw = articleBox.width(),\n          ih = articleBox.height(); // xRatio 宽度缩放值 yRatio 高度缩放值\n\n      xRatio = iw / w, yRatio = ih / h, sRatio = 1;\n\n      if (scaleType == 'contain') {\n        // 缩放舞台以完全装入父元素\t\t\t\t\t\n        sRatio = Math.min(xRatio, yRatio);\n      } else if (scaleType == 'cover') {\n        // 缩放舞台以完全覆盖父元素\t\t\t\t\t\t\n        sRatio = Math.max(xRatio, yRatio);\n      } else if (scaleType == 'width') {\n        // 缩放舞台以宽度完全装入父元素\t\t\t\t\n        sRatio = xRatio;\n      } else {\n        // 缩放舞台以高度完全装入父元素\n        sRatio = yRatio;\n      }\n\n      shell.css({\n        scale: sRatio\n      });\n    } //edn func\n\n  }; //edn fun\n  // 获取开始时间倒结束时间之间n年n月n日\n\n\n  com.time_valide = function (start_time, end_time) {\n    var common_year = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    var leap_year = [0, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    end_time = end_time || new Date().Format('yyyy-MM-dd hh:mm:ss'); //验证时间格式\n\n    var reg = /^[1-9]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])\\s+(20|21|22|23|[0-1]\\d):[0-5]\\d:[0-5]\\d$/;\n    var regExp = new RegExp(reg);\n\n    if (!regExp.test(end_time) || !regExp.test(start_time)) {\n      return false;\n    } //判断前后时间大小\n\n\n    var timestamp_start_time = Date.parse(new Date(start_time));\n    var timestamp_end_time = Date.parse(new Date(end_time));\n\n    if (timestamp_end_time / 1000 - timestamp_start_time / 1000 < 0) {\n      return false;\n    } //获取前四位\n\n\n    var time_info_start = start_time.split(' ');\n    var time_info_end = end_time.split(' '); //获取年月日\n\n    var year_month_day_start = time_info_start[0].split('-');\n    var year_month_day_end = time_info_end[0].split('-'); //获取时间\n\n    var hour_minute_second_start = time_info_start[1].split(':');\n    var hour_minute_second_end = time_info_end[1].split(':');\n    var beapart_year = parseInt(year_month_day_end[0]) - parseInt(year_month_day_start[0]); //进行判断时间\n\n    var time_info_1 = parseInt(hour_minute_second_start[2]) + parseInt(hour_minute_second_start[1]) * 60 + parseInt(hour_minute_second_start[0]) * 3600;\n    var time_info_2 = parseInt(hour_minute_second_end[2]) + parseInt(hour_minute_second_end[1]) * 60 + parseInt(hour_minute_second_end[0]) * 3600;\n    var hour = 0;\n    var minute = 0;\n    var second = 0;\n    var beapart_time = time_info_2 - time_info_1;\n    var beapart_day_last = 0;\n\n    if (timestamp_end_time / 1000 - timestamp_start_time / 1000 <= 86400) {\n      // 小于一天\n      var tim = timestamp_end_time / 1000 - timestamp_start_time / 1000;\n      hour = parseInt(tim / 3600);\n      minute = parseInt((tim - hour * 60 * 60) / 60);\n      second = tim - hour * 60 * 60 - minute * 60;\n      return [0, 0, 0, hour, minute, second];\n    }\n\n    if (beapart_time < 0) {\n      beapart_day = beapart_day - 1;\n      beapart_time = time_info_2 + 86400 - time_info_1;\n      hour = parseInt(beapart_time / 3600);\n      minute = parseInt((beapart_time - hour * 60 * 60) / 60);\n      second = beapart_time - hour * 60 * 60 - minute * 60;\n      beapart_day_last = 1;\n    } else {\n      hour = parseInt(beapart_time / 3600);\n      minute = parseInt((beapart_time - hour * 60 * 60) / 60);\n      second = beapart_time - hour * 60 * 60 - minute * 60;\n    } //同一年\n\n\n    if (beapart_year === 0) {\n      var beapart_day = parseInt(year_month_day_end[2]) - parseInt(year_month_day_start[2]);\n      var beapart_month = parseInt(year_month_day_end[1]) - parseInt(year_month_day_start[1]);\n\n      if (beapart_day > 0) {\n        return [0, beapart_month, beapart_day - beapart_day_last, hour, minute, second];\n      } else {\n        if (parseInt(year_month_day_end[0]) % 4 === 0) {\n          beapart_day = leap_year[parseInt(year_month_day_end[1])] - parseInt(year_month_day_start[2]) + parseInt(year_month_day_end[2]);\n        } else {\n          beapart_day = common_year[parseInt(year_month_day_end[1])] - parseInt(year_month_day_start[2]) + parseInt(year_month_day_end[2]);\n        }\n\n        if (time_info_2 - time_info_1 < 0) {\n          beapart_day -= 1;\n        }\n\n        return [0, beapart_month - 1, beapart_day - beapart_day_last, hour, minute, second];\n      } //非同一年\n\n    } else {\n      //判断如果相差一年\n      var beapart_day = parseInt(year_month_day_end[2]) - parseInt(year_month_day_start[2]);\n      var beapart_month = parseInt(year_month_day_end[1]) - parseInt(year_month_day_start[1]);\n      var beapart_year = parseInt(year_month_day_end[0]) - parseInt(year_month_day_start[0]);\n\n      if (beapart_month < 0) {\n        beapart_year = beapart_year - 1;\n        beapart_month = 12 - parseInt(year_month_day_start[1]) + parseInt(year_month_day_end[1]);\n      }\n\n      if (beapart_day > 0) {\n        return [beapart_year, beapart_month, beapart_day - beapart_day_last, hour, minute, second];\n      } else {\n        if (parseInt(year_month_day_end[0]) % 4 === 0) {\n          beapart_day = leap_year[parseInt(year_month_day_end[1])] - parseInt(year_month_day_start[2]) + parseInt(year_month_day_end[2]);\n        } else {\n          beapart_day = common_year[parseInt(year_month_day_end[1])] - parseInt(year_month_day_start[2]) + parseInt(year_month_day_end[2]);\n        }\n\n        return [beapart_year, beapart_month - 1, beapart_day - beapart_day_last, hour, minute, second];\n      }\n    }\n  };\n\n  String.prototype.replaceAll = function (s1, s2) {\n    return this.replace(new RegExp(s1, \"gm\"), s2);\n  };\n  /**\n   * 扩展一个可以指定时间输出格式的 Date 的方法\n   * 年(y)可以用 1-4 个占位符、月(M)、日(d)、季度(q)可以用 1-2 个占位符\n   * 小时(h)、分(m)、秒(s)、毫秒(S)只能用 1 个占位符(是 1-3 位的数字)\n   * @param  fmt  | 格式化表达式\n   */\n\n\n  Date.prototype.Format = function (fmt) {\n    var o = {\n      \"M+\": this.getMonth() + 1,\n      \"d+\": this.getDate(),\n      \"h+\": this.getHours(),\n      \"m+\": this.getMinutes(),\n      \"s+\": this.getSeconds(),\n      \"q+\": Math.floor((this.getMonth() + 3) / 3),\n      \"S\": this.getMilliseconds()\n    };\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n\n    for (var k in o) {\n      if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : (\"00\" + o[k]).substr((\"\" + o[k]).length));\n    }\n\n    return fmt;\n  };\n  /*按照数组某个字段排序*/\n\n\n  Array.prototype.bubbleSort = function (key, type) {\n    if (key) {\n      return this.sort(compare);\n    } else {\n      return this;\n    }\n\n    function compare(obj1, obj2) {\n      var val1 = eval('obj1.' + key);\n      var val2 = eval('obj2.' + key);\n\n      if (type == 'rise') {\n        if (val1 > val2) {\n          return -1;\n        } else if (val1 < val2) {\n          return 1;\n        } else {\n          return 0;\n        }\n      } else {\n        if (val1 < val2) {\n          return -1;\n        } else if (val1 > val2) {\n          return 1;\n        } else {\n          return 0;\n        }\n      }\n    }\n  };\n\n  return com;\n} //end import\n\n\n(function (global, factory) {\n  factory(global);\n})(typeof window !== \"undefined\" ? window : this, function (global) {\n  global.icom = importCom();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvYmFzZS9jb20uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvYmFzZS9jb20uanM/ZGM3YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLzIwMTguMTEuMTRcbmZ1bmN0aW9uIGltcG9ydENvbSgpIHtcbiAgICB2YXIgY29tID0ge307XG5cbiAgICAvL+WIneWni+WMllxuICAgIGNvbS5pbml0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBhcnRpY2xlID0gJCgnYXJ0aWNsZScpO1xuICAgICAgICBpZiAoaWJhc2UuZGlyID09ICdwb3J0cmFpdCcpIHtcbiAgICAgICAgICAgIGxvY2tfZGVjdGVkKCk7XG4gICAgICAgIH0vL2VkbiBpZlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGh0bWxfcmVzaXplKCk7XG4gICAgICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIHdpbmRvd19vcmllbnRhdGlvbik7XG4gICAgICAgICAgICBsb2NrX2RlY3RlZCgpO1xuICAgICAgICB9IC8vZW5kIGVsc2VcblxuICAgICAgICBmdW5jdGlvbiBsb2NrX2RlY3RlZCgpIHtcbiAgICAgICAgICAgIGlmIChpYmFzZS5sb2NrKSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9ja19kZWN0ZWQpO1xuICAgICAgICAgICAgZWxzZSBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICAgIH0gLy9lZG4gZnVuY1xuXG4gICAgICAgIGZ1bmN0aW9uIHdpbmRvd19vcmllbnRhdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAob3MuaW9zKSBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykgc2V0VGltZW91dChodG1sX3Jlc2l6ZSwgaSAqIDE1MCk7XG4gICAgICAgICAgICBlbHNlIGh0bWxfcmVzaXplKCk7XG4gICAgICAgIH0gLy9lZG4gZnVuY1xuXG4gICAgICAgIGZ1bmN0aW9uIGh0bWxfcmVzaXplKCkge1xuICAgICAgICAgICAgdmFyIGRpciA9IGliYXNlLmdldE9yaWVudCh0cnVlKTtcbiAgICAgICAgICAgIGlmIChkaXIgPT0gJ3BvcnRyYWl0Jykge1xuICAgICAgICAgICAgICAgIGlmIChpYmFzZS5sYW5kc2NhcGVTY2FsZU1vZGUgPT0gJ2NvdmVyJyB8fCBpYmFzZS5sYW5kc2NhcGVTY2FsZU1vZGUgPT0gJ2NvbnRhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gaW1hdGguYXV0b1NpemUoW2liYXNlLmxhbmRzY2FwZUhlaWdodCwgaWJhc2UubGFuZHNjYXBlV2lkdGhdLCBbd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodF0sIGliYXNlLmxhbmRzY2FwZVNjYWxlTW9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IHNpemVbMF0gLyBpYmFzZS5sYW5kc2NhcGVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3aW5kb3cgc2l6ZTonICsgd2luZG93LmlubmVySGVpZ2h0ICsgJy8nICsgd2luZG93LmlubmVyV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYXV0byBzY2FsZTonICsgc2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICBpYmFzZS5sYW5kU2NhcGVTY2FsZVggPSBpYmFzZS5sYW5kU2NhcGVTY2FsZVkgPSBzY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGliYXNlLmxhbmRzY2FwZVdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBpYmFzZS5sYW5kc2NhcGVIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGU6IDkwLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDogb3MuaXBob25lWCA/IDAgOiAod2luZG93LmlubmVySGVpZ2h0IC8gc2NhbGUgLSBpYmFzZS5sYW5kc2NhcGVXaWR0aCkgKiAwLjUsXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiAtaWJhc2UubGFuZHNjYXBlSGVpZ2h0ICsgKGliYXNlLmxhbmRzY2FwZUhlaWdodCAtIHdpbmRvdy5pbm5lcldpZHRoIC8gc2NhbGUpICogMC41XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gLy9lZG4gaWZcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gW3dpbmRvdy5pbm5lcldpZHRoIC8gaWJhc2UubGFuZHNjYXBlSGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgLyBpYmFzZS5sYW5kc2NhcGVXaWR0aF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3aW5kb3cgc2l6ZTonICsgd2luZG93LmlubmVySGVpZ2h0ICsgJy8nICsgd2luZG93LmlubmVyV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYXV0byBzY2FsZTonICsgc2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICBpYmFzZS5sYW5kU2NhcGVTY2FsZVggPSBzY2FsZVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWJhc2UubGFuZFNjYXBlU2NhbGVZID0gc2NhbGVbMV07XG4gICAgICAgICAgICAgICAgICAgIGFydGljbGUuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBpYmFzZS5sYW5kc2NhcGVXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogaWJhc2UubGFuZHNjYXBlSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlOiA5MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWDogc2NhbGVbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IHNjYWxlWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IC1pYmFzZS5sYW5kc2NhcGVIZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSAvL2VuZCBlbHNlXG4gICAgICAgICAgICB9IC8vZW5kIGlmXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2NyZWVuIGxhbmRzY2FwZScpO1xuICAgICAgICAgICAgICAgIGlmIChpYmFzZS5sYW5kc2NhcGVTY2FsZU1vZGUgPT0gJ2NvdmVyJyB8fCBpYmFzZS5sYW5kc2NhcGVTY2FsZU1vZGUgPT0gJ2NvbnRhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gaW1hdGguYXV0b1NpemUoW2liYXNlLmxhbmRzY2FwZVdpZHRoLCBpYmFzZS5sYW5kc2NhcGVIZWlnaHRdLCBbb3MuaXBob25lWCAmJiB3aW5kb3cuaW5uZXJXaWR0aCA+IDcyNCA/IHdpbmRvdy5pbm5lcldpZHRoIC0gaWJhc2UuaXBob25lWE9mZnNldExhbmRzY2FwZSAqIDIgOiB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0XSwgaWJhc2UubGFuZHNjYXBlU2NhbGVNb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gc2l6ZVswXSAvIGliYXNlLmxhbmRzY2FwZVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnd2luZG93IHNpemU6JyArIHdpbmRvdy5pbm5lcldpZHRoICsgJy8nICsgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2F1dG8gc2NhbGU6JyArIHNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgaWJhc2UubGFuZFNjYXBlU2NhbGVYID0gaWJhc2UubGFuZFNjYXBlU2NhbGVZID0gc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIGFydGljbGUuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBpYmFzZS5sYW5kc2NhcGVXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogaWJhc2UubGFuZHNjYXBlSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDogKHdpbmRvdy5pbm5lcldpZHRoIC8gc2NhbGUgLSBpYmFzZS5sYW5kc2NhcGVXaWR0aCkgKiAwLjUgKyBvcy5pcGhvbmVYICYmIHdpbmRvdy5pbm5lcldpZHRoID4gNzI0ID8gaWJhc2UuaXBob25lWE9mZnNldExhbmRzY2FwZSAvIHNjYWxlIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6ICh3aW5kb3cuaW5uZXJIZWlnaHQgLyBzY2FsZSAtIGliYXNlLmxhbmRzY2FwZUhlaWdodCkgKiAwLjVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSAvL2VkbiBpZlxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSBbd2luZG93LmlubmVyV2lkdGggLyBpYmFzZS5sYW5kc2NhcGVXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0IC8gaWJhc2UubGFuZHNjYXBlSGVpZ2h0XTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3dpbmRvdyBzaXplOicgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKyAnLycgKyB3aW5kb3cuaW5uZXJXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhdXRvIHNjYWxlOicgKyBzY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIGliYXNlLmxhbmRTY2FwZVNjYWxlWCA9IHNjYWxlWzBdO1xuICAgICAgICAgICAgICAgICAgICBpYmFzZS5sYW5kU2NhcGVTY2FsZVkgPSBzY2FsZVsxXTtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGliYXNlLmxhbmRzY2FwZVdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBpYmFzZS5sYW5kc2NhcGVIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IHNjYWxlWzBdICsgb3MuaXBob25lWCA/IGliYXNlLmlwaG9uZVhPZmZzZXRMYW5kc2NhcGUgLyBzY2FsZVswXSA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IHNjYWxlWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IDBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSAvL2VuZCBlbHNlXG4gICAgICAgICAgICB9IC8vZW5kIGVsc2VcbiAgICAgICAgfSAvL2VkbiBmdW5jXG5cbiAgICB9IC8vZWRuIGZ1bmNcblxuICAgIC8v6Kej6ZSB5bGP5bmV5ruR5YqoXG4gICAgY29tLnNjcmVlblNjcm9sbEVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFydGljbGUgPSAkKCdhcnRpY2xlJyk7XG4gICAgICAgIHZhciBodG1sID0gJCgnaHRtbCcpO1xuICAgICAgICBpZiAoaWJhc2UuZGlyID09ICdwb3J0cmFpdCcpIHtcbiAgICAgICAgICAgIGFydGljbGUuY3NzKHsgJ292ZXJmbG93LXknOiAnYXV0bycgfSk7XG4gICAgICAgICAgICBpZiAob3MuaW9zKSBodG1sLmNzcyh7ICdwb3NpdGlvbic6ICdyZWxhdGl2ZScgfSk7XG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ3RvdWNobW92ZScsIG5vU2Nyb2xsKTtcbiAgICAgICAgfS8vZWRuIGlmXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXJ0aWNsZS5vZmYoJ3RvdWNobW92ZScsIG5vU2Nyb2xsKTtcbiAgICAgICAgfS8vZWRuIGVsc2VcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIC8v6ZSB5a6a5bGP5bmV5ruR5YqoXG4gICAgY29tLnNjcmVlblNjcm9sbFVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFydGljbGUgPSAkKCdhcnRpY2xlJyk7XG4gICAgICAgIHZhciBodG1sID0gJCgnaHRtbCcpO1xuICAgICAgICBpZiAoaWJhc2UuZGlyID09ICdwb3J0cmFpdCcpIHtcbiAgICAgICAgICAgIGFydGljbGUuY3NzKHsgJ292ZXJmbG93LXknOiAnaGlkZGVuJyB9KTtcbiAgICAgICAgICAgIGlmIChvcy5pb3MpIGh0bWwuY3NzKHsgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyB9KTtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCd0b3VjaG1vdmUnLCBub1Njcm9sbCk7XG4gICAgICAgIH0vL2VkbiBpZlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFydGljbGUub24oJ3RvdWNobW92ZScsIG5vU2Nyb2xsKTtcbiAgICAgICAgfS8vZWRuIGVsc2VcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIGZ1bmN0aW9uIG5vU2Nyb2xsKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/lj5bku6NqcXVlcnnnmoRmYWRlSW5cbiAgICBjb20uZmFkZUluID0gZnVuY3Rpb24gKG9iaiwgZHVyLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICBkdXIgPSBkdXIgfHwgNTAwO1xuICAgICAgICAgICAgb2JqLnNob3coKS5jc3Moe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0pLnRyYW5zaXRpb24oe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0sIGR1ciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soJCh0aGlzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSAvL2VuZCBpZlxuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/lj5bku6NqcXVlcnnnmoRmYWRlT3V0XG4gICAgY29tLmZhZGVPdXQgPSBmdW5jdGlvbiAob2JqLCBkdXIsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgIGR1ciA9IGR1ciB8fCA1MDA7XG4gICAgICAgICAgICBvYmoudHJhbnNpdGlvbih7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSwgZHVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCkuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soJCh0aGlzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSAvL2VuZCBpZlxuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/miZPlvIDlvLnnqpfvvIzkvJroh6rliqjlr7vmib5hLmNsb3Nl5a+56LGh57uR5a6a5YWz6Zet5LqL5Lu277yM5bm25Zyo5YWz6Zet5pe25omn6KGM5Zue6LCDXG4gICAgY29tLnBvcE9uID0gZnVuY3Rpb24gKG9iaiwgb3B0aW9ucykge1xuICAgICAgICBpZiAob2JqICYmIG9iai5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xvc2VFdmVudDogJ3RvdWNoZW5kJyxcbiAgICAgICAgICAgICAgICBjbG9zZVR5cGU6ICdidXR0b24nLFxuICAgICAgICAgICAgICAgIGNsb3NlQnRuOiBvYmouZmluZCgnYS5jbG9zZScpLFxuICAgICAgICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uICgpIHsgfSxcbiAgICAgICAgICAgICAgICByZW1vdmU6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9wdHMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAob3B0cy50ZXh0KSBvYmouZmluZCgnLnRleHQnKS5odG1sKG9wdHMudGV4dCk7XG4gICAgICAgICAgICBpZiAob3B0cy5mYWRlKSBjb20uZmFkZUluKG9iaiwgb3B0cy5mYWRlKTtcbiAgICAgICAgICAgIGVsc2Ugb2JqLnNob3coKTtcbiAgICAgICAgICAgIGlmIChvcHRzLmNsb3NlQnRuLmxlbmd0aCA+IDAgJiYgb3B0cy5jbG9zZVR5cGUgPT0gJ2J1dHRvbicpIG9wdHMuY2xvc2VCdG4ub25lKG9wdHMuY2xvc2VFdmVudCwgb2JqX2Nsb3NlKTtcbiAgICAgICAgICAgIGVsc2Ugb2JqLm9uZShvcHRzLmNsb3NlRXZlbnQsIG9ial9jbG9zZSk7XG4gICAgICAgICAgICBvYmoub24oJ2Nsb3NlJywgb2JqX2Nsb3NlKTtcbiAgICAgICAgfSAvL2VuZCBpZlxuICAgICAgICBmdW5jdGlvbiBvYmpfY2xvc2UoZSkge1xuICAgICAgICAgICAgaWYgKG9wdHMuY2xvc2VCdG4ubGVuZ3RoID4gMCAmJiBvcHRzLmNsb3NlVHlwZSA9PSAnYnV0dG9uJykgb3B0cy5jbG9zZUJ0bi5vZmYob3B0cy5jbG9zZUV2ZW50LCBvYmpfY2xvc2UpO1xuICAgICAgICAgICAgZWxzZSBvYmoub2ZmKG9wdHMuY2xvc2VFdmVudCwgb2JqX2Nsb3NlKTtcbiAgICAgICAgICAgIGlmIChvcHRzLmZhZGUpIGNvbS5mYWRlT3V0KG9iaiwgb3B0cy5mYWRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdHMucmVtb3ZlKSBvYmoucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdHMucmVtb3ZlKSBvYmoucmVtb3ZlKCk7XG4gICAgICAgICAgICBlbHNlIG9iai5oaWRlKCk7XG4gICAgICAgICAgICBvYmoub2ZmKCdjbG9zZScsIG9ial9jbG9zZSk7XG4gICAgICAgICAgICBvcHRzLm9uQ2xvc2Uob2JqKTtcbiAgICAgICAgfSAvL2VuZCBmdW5jXG4gICAgfSAvL2VuZCBmdW5jXG5cbiAgICAvL+WFs+mXreS9v+eUqHBvcE9u5pa55rOV5omT5byA55qE5by556qXXG4gICAgY29tLnBvcE9mZiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKG9iaiAmJiBvYmoubGVuZ3RoID4gMCkgb2JqLnRyaWdnZXIoJ2Nsb3NlJyk7XG4gICAgfSAvL2VuZCBmdW5jXG5cbiAgICAvL+WPluS7o+ezu+e7n2FsZXJ0XG4gICAgY29tLmFsZXJ0ID0gZnVuY3Rpb24gKHRleHQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0ZXh0ICYmIHRleHQgIT0gJycpIHtcbiAgICAgICAgICAgIHZhciBib3ggPSAkKCc8YXNpZGUgY2xhc3M9XCJhbGVydEJveFwiPjxkaXY+PHAgY2xhc3M9XCJ0ZXh0XCI+PC9wPjxwIGNsYXNzPVwiYnRuXCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiY2xvc2VcIj7noa7lrpo8L2E+PC9wPjwvZGl2PjwvYXNpZGU+JykuYXBwZW5kVG8oaWJhc2UuZGlyID09ICdsYW5kc2NhcGUnID8gJ2FydGljbGUnIDogJ2JvZHknKTtcbiAgICAgICAgICAgIGNvbS5wb3BPbihib3gsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICAgICAgICAgIG9uQ2xvc2U6IGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIHJlbW92ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjbG9zZUV2ZW50OiAnY2xpY2snXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSAvL2VuZCBpZlxuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/luKbmnInigJzlj5bmtojigJ3lkozigJznoa7orqTigJ3mjInpkq7nmoTlr7nor53moYZcbiAgICBjb20uY29uZmlybSA9IGZ1bmN0aW9uICh0ZXh0LCBjYWxsYmFja0NvbmZpcm0sIGNhbGxiYWNrQ2FuY2VsLCBidG5DYW5jZWxUZXh0LCBidG5Db25maXJtVGV4dCkge1xuICAgICAgICB0ZXh0ID0gdGV4dCB8fCAnJztcbiAgICAgICAgYnRuQ2FuY2VsVGV4dCA9IGJ0bkNhbmNlbFRleHQgfHwgJ+WPlua2iCc7XG4gICAgICAgIGJ0bkNvbmZpcm1UZXh0ID0gYnRuQ29uZmlybVRleHQgfHwgJ+ehruiupCc7XG4gICAgICAgIGlmICh0ZXh0ICE9ICcnKSB7XG4gICAgICAgICAgICB2YXIgYm94ID0gJCgnPGFzaWRlIGNsYXNzPVwiY29uZmlybUJveFwiPjxkaXY+PHAgY2xhc3M9XCJ0ZXh0XCI+JyArIHRleHQgKyAnPC9wPjxwIGNsYXNzPVwiYnRuXCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiY2FuY2VsXCI+JyArIGJ0bkNhbmNlbFRleHQgKyAnPC9hPjxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImNvbmZpcm1cIj4nICsgYnRuQ29uZmlybVRleHQgKyAnPC9hPjwvcD48L2Rpdj48L2FzaWRlPicpLmFwcGVuZFRvKGliYXNlLmRpciA9PSAnbGFuZHNjYXBlJyA/ICdhcnRpY2xlJyA6ICdib2R5Jyk7XG4gICAgICAgICAgICB2YXIgYnRuID0gYm94LmZpbmQoJ2EnKTtcbiAgICAgICAgICAgIGJ0bi5vbmUoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5pbmRleCgpID09IDAgJiYgY2FsbGJhY2tDYW5jZWwpIGNhbGxiYWNrQ2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJCh0aGlzKS5pbmRleCgpID09IDEgJiYgY2FsbGJhY2tDb25maXJtKSBjYWxsYmFja0NvbmZpcm0oKTtcbiAgICAgICAgICAgICAgICBidG4ub2ZmKCk7XG4gICAgICAgICAgICAgICAgYm94LnJlbW92ZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSAvL2VuZCBpZlxuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/ojrflvpdodHRwIHVybOWPguaVsFxuICAgIGNvbS5nZXRRdWVyeVN0cmluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGlmIChuYW1lICYmIG5hbWUgIT0gJycpIHtcbiAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKFwiKF58JilcIiArIG5hbWUgKyBcIj0oW14mXSopKCZ8JClcIiwgXCJpXCIpO1xuICAgICAgICAgICAgdmFyIHIgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5tYXRjaChyZWcpO1xuICAgICAgICAgICAgaWYgKHIgIT0gbnVsbCkgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyWzJdKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IC8vZW5kIGlmXG4gICAgICAgIGVsc2UgcmV0dXJuIG51bGw7XG4gICAgfSAvL2VuZCBmdW5jXG5cbiAgICAvL+iOt+WPlui3r+W+hFxuICAgIGNvbS5nZXRQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGggJiYgcGF0aCAhPSAnJykgcmV0dXJuIHBhdGguc3Vic3RyKDAsIHBhdGgubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgICAgICBlbHNlIHJldHVybiBmYWxzZTtcbiAgICB9IC8vZWRuIGZ1bmNcblxuICAgIC8v6L295YWl5Zu+54mH5Ye95pWwXG4gICAgY29tLmltYWdlTG9hZCA9IGZ1bmN0aW9uIChzcmMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgICAgIHZhciBsb2FkZXIgPSBuZXcgUHhMb2FkZXIoKTtcbiAgICAgICAgICAgIGlmICgkLnR5cGUoc3JjKSA9PT0gXCJzdHJpbmdcIiAmJiBzcmMgIT0gJycpIGxvYWRlci5hZGRJbWFnZShzcmMpO1xuICAgICAgICAgICAgZWxzZSBpZiAoJC50eXBlKHNyYykgPT09IFwiYXJyYXlcIiAmJiBzcmMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3JjLmxlbmd0aDsgaSsrKSBsb2FkZXIuYWRkSW1hZ2Uoc3JjW2ldKTtcbiAgICAgICAgICAgIH0gLy9lbmQgZWxzZVxuICAgICAgICAgICAgbG9hZGVyLmFkZENvbXBsZXRpb25MaXN0ZW5lcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbG9hZGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKHNyYyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxvYWRlci5zdGFydCgpO1xuICAgICAgICB9IC8vZW5kIGlmXG4gICAgfSAvL2VuZCBmdW5jXHRcblxuICAgIC8v5bi455So5q2j5YiZXG4gICAgY29tLmNoZWNrU3RyID0gZnVuY3Rpb24gKHN0ciwgdHlwZSkge1xuICAgICAgICBpZiAoc3RyICYmIHN0ciAhPSAnJykge1xuICAgICAgICAgICAgdHlwZSA9IHR5cGUgfHwgMDtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoL14xXFxkezEwfSQvKTsgLy/miYvmnLrlj7fnoIHpqozor4FcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgvXlxcZHs2fSQvKTsgLy825L2N6aqM6K+B56CB6aqM6K+BXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoL14oXFx3LSpcXC4qKStAKFxcdy0/KSsoXFwuXFx3ezIsfSkrJC8pOyAvL+WMuemFjUVNQUlMXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoLyheXFxkezE1fSQpfCheXFxkezE4fSQpfCheXFxkezE3fShcXGR8WHx4KSQpLyk7IC8v5Yy56YWN6Lqr5Lu96K+BXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoL15cXGQrJC8pOyAvL+aYr+WQpuS4ujAtOeeahOaVsOWtl1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKC9eW2EtekEtWlxcdTAzOTEtXFx1RkZFNV0qW1xcd1xcdTAzOTEtXFx1RkZFNV0qJC8pOyAvL+S4jeiDveS7peaVsOWtl+aIluespuWPt+W8gOWktFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKC9eXFx3KyQvKTsgLy/ljLnphY3nlLHmlbDlrZfjgIEyNuS4quiLseaWh+Wtl+avjeaIluiAheS4i+WIkue6v+e7hOaIkOeahOWtl+espuS4slxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKC9eW1xcdTAzOTEtXFx1RkZFNV0rJC8pOyAvL+WMuemFjeS4reaWh1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKC9eW2EtekEtWlxcdTAzOTEtXFx1RkZFNV0rJC8pOyAvL+S4jeiDveWMheWQq+aVsOWtl+WSjOespuWPt1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gLy9lbmQgc3dpdGNoXG4gICAgICAgICAgICBpZiAocmVnLmV4ZWMoJC50cmltKHN0cikpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IC8vZW5kIGlmXG4gICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/op6PlhrNpb3PkuItpbnB1dOOAgXRleHRhcmVh5peg5rOV6Ieq5Yqo5aSx5Y6754Sm54K555qE6Zeu6aKYXG4gICAgY29tLmtleWJvYXJkID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIGlucHV0ID0gaW5wdXQgfHwgJCgnaW5wdXQsdGV4dGFyZWEsW2NvbnRlbnRlZGl0YWJsZT1cInRydWVcIl0nKTtcbiAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBib2R5ID0gJCgnYm9keScpO1xuICAgICAgICAgICAgaWYgKG9zLmlvcykgaW5wdXQub24oJ2ZvY3VzJywgaW5wdXRfZm9jdXMpLm9uKCdibHVyJywgaW5wdXRfYmx1cik7XG4gICAgICAgICAgICBlbHNlIGJvZHkuaGVpZ2h0KGJvZHlbMF0uY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgfSAvL2VuZCBpZlxuICAgICAgICBmdW5jdGlvbiBpbnB1dF9mb2N1cyhlKSB7XG4gICAgICAgICAgICBib2R5Lm9uZSgndG91Y2hlbmQnLCBpb3NfYmx1cik7XG4gICAgICAgIH0vL2VkbiBldmVudFxuICAgICAgICBmdW5jdGlvbiBpbnB1dF9ibHVyKCkge1xuICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbFRvcCgwKTtcbiAgICAgICAgfS8vZWRuIGV2ZW50XG4gICAgICAgIGZ1bmN0aW9uIGlvc19ibHVyKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCAhPSBpbnB1dFswXSkgaW5wdXQuYmx1cigpO1xuICAgICAgICB9Ly9lZG4gZXZlbnRcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIC8v6Kej5YazaW9z5LiLc2VsZWN05peg5rOV6Ieq5Yqo5aSx5Y6754Sm54K555qE6Zeu6aKYXG4gICAgY29tLnNlbGVjdCA9IGZ1bmN0aW9uIChzZWxlY3QpIHtcbiAgICAgICAgc2VsZWN0ID0gc2VsZWN0IHx8ICQoJ3NlbGVjdCcpO1xuICAgICAgICBpZiAoc2VsZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChvcy5pb3MpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Qub24oJ2ZvY3VzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKCd0b3VjaGVuZCcsIGlvc19zZWxlY3QpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSAvL2VuZCBpZlxuICAgICAgICB9IC8vZW5kIGlmXG5cbiAgICAgICAgZnVuY3Rpb24gaW9zX3NlbGVjdChlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgIT0gc2VsZWN0WzBdKSBzZWxlY3QuYmx1cigpO1xuICAgICAgICB9IC8vZWRuIGZ1bmNcblxuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/niankvZPmipbliqhcbiAgICBjb20uc2hha2UgPSBmdW5jdGlvbiAoYm94LCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChib3ggJiYgYm94Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICByeDogNSxcbiAgICAgICAgICAgICAgICByeTogNSxcbiAgICAgICAgICAgICAgICBkZWxheTogMzMsXG4gICAgICAgICAgICAgICAgbm93OiAwLFxuICAgICAgICAgICAgICAgIG1heDogNSxcbiAgICAgICAgICAgICAgICByZXN0b3JlOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9wdHMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgeCA9IGltYXRoLnJhbmRvbVJhbmdlKC1vcHRzLnJ4LCBvcHRzLnJ4KTtcbiAgICAgICAgICAgIHZhciB5ID0gaW1hdGgucmFuZG9tUmFuZ2UoLW9wdHMucnksIG9wdHMucnkpO1xuICAgICAgICAgICAgYm94LmNzcyh7XG4gICAgICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgICAgICB5OiB5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9wdHMubm93Kys7XG4gICAgICAgICAgICBpZiAob3B0cy5ub3cgPiBvcHRzLm1heCkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRzLnJlc3RvcmUpIGJveC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgICAgICB5OiAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdHMub25Db21wbGV0ZSkgb3B0cy5vbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9IC8vZW5kIGlmXG4gICAgICAgICAgICBlbHNlIHNldFRpbWVvdXQoY29tLnNoYWtlLCBvcHRzLmRlbGF5LCBib3gsIG9wdHMpO1xuICAgICAgICB9IC8vZW5kIGlmXG4gICAgfSAvL2VuZCBmdW5jXG5cbiAgICAvL+iOt+WPlnRleHRhcmVh6YeM55qE5Zue6L2m5ZKM56m65qC8XG4gICAgY29tLnRleHRhcmVhR2V0ID0gZnVuY3Rpb24gKHRleHRhcmVhLCByb3cpIHtcbiAgICAgICAgcm93ID0gcm93IHx8IDA7XG4gICAgICAgIHZhciBzdHIxID0gdGV4dGFyZWEudmFsKCk7XG4gICAgICAgIGlmIChzdHIxID09ICcnKSByZXR1cm4gJyc7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHN0cjIgPSBzdHIxLnJlcGxhY2VBbGwoXCJcXG5cIiwgXCI8YnIvPlwiKTtcbiAgICAgICAgICAgIHJldHVybiByb3dfY3V0KHN0cjIsIHJvdyk7XG4gICAgICAgIH0gLy9lbmQgZWxzZVxuICAgIH0gLy9lZG4gZnVuY1xuXG4gICAgLy/ovpPlhaV0ZXh0YXJlYemHjOeahOWbnui9puWSjOepuuagvFxuICAgIGNvbS50ZXh0YXJlYVNldCA9IGZ1bmN0aW9uICh0ZXh0YXJlYSwgc3RyKSB7XG4gICAgICAgIGlmIChzdHIgPT0gJycpIHRleHRhcmVhLnZhbCgnJyk7XG4gICAgICAgIGVsc2UgdGV4dGFyZWEudmFsKHN0ci5yZXBsYWNlQWxsKFwiPGJyLz5cIiwgXCJcXG5cIikpO1xuICAgIH0gLy9lZG4gZnVuY1xuXG4gICAgLy/pmZDliLZ0ZXh0YXJlYei+k+WFpeaWh+Wtl+eahOihjOaVsFxuICAgIGNvbS50ZXh0YXJlYUxvY2sgPSBmdW5jdGlvbiAodGV4dGFyZWEpIHtcbiAgICAgICAgaWYgKHRleHRhcmVhICYmIHRleHRhcmVhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciB0aW1lcjtcbiAgICAgICAgICAgIHZhciByb3cgPSBwYXJzZUludCh0ZXh0YXJlYS5hdHRyKCdyb3dzJykpIHx8IDA7XG4gICAgICAgICAgICB2YXIgY29sID0gcGFyc2VJbnQodGV4dGFyZWEuYXR0cignY29scycpKSB8fCAwO1xuICAgICAgICAgICAgdmFyIG1heCA9IHBhcnNlSW50KHRleHRhcmVhLmF0dHIoJ21heGxlbmd0aCcpKSB8fCAwO1xuICAgICAgICAgICAgbWF4ID0gbWF4ID09IDAgPyByb3cgKiBjb2wgOiBtYXg7XG4gICAgICAgICAgICBpZiAocm93ID4gMCAmJiBjb2wgPiAwICYmIG1heCA+IDApIHRleHRhcmVhLm9uKCdmb2N1cycsIHRleHRhcmVhX2ZvY3VzKS5vbignYmx1cicsIHRleHRhcmVhX2JsdXIpO1xuICAgICAgICB9IC8vZW5kIGlmXG5cbiAgICAgICAgZnVuY3Rpb24gdGV4dGFyZWFfZm9jdXMoZSkge1xuICAgICAgICAgICAgdGltZXIgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGV4dGFyZWFfbG9jayk7XG4gICAgICAgIH0gLy9lZG4gZnVuY1xuXG4gICAgICAgIGZ1bmN0aW9uIHRleHRhcmVhX2JsdXIoZSkge1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGltZXIpO1xuICAgICAgICAgICAgdmFyIGZpcnN0ID0gY29tLnRleHRhcmVhR2V0KHRleHRhcmVhLCByb3cpO1xuICAgICAgICAgICAgaWYgKGZpcnN0LmluZGV4T2YoJzxici8+JykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RyMiA9IGZpcnN0LnNwbGl0KCc8YnIvPicpO1xuICAgICAgICAgICAgICAgIHZhciBzdHIzID0gJyc7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cjMgKz0gY29sX2JyZWFrKHN0cjJbaV0sIGNvbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgc3RyMi5sZW5ndGggLSAxKSBzdHIzICs9ICc8YnIvPic7XG4gICAgICAgICAgICAgICAgfSAvL2VuZCBmb3JcbiAgICAgICAgICAgICAgICBzdHIzID0gcm93X2N1dChzdHIzLCByb3cpO1xuICAgICAgICAgICAgICAgIHZhciBmaW5hbCA9IHN0cjMucmVwbGFjZUFsbChcIjxici8+XCIsIFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgIHRleHRhcmVhLnZhbChmaW5hbCk7XG4gICAgICAgICAgICB9IC8vZW5kIGlmXG4gICAgICAgIH0gLy9lZG4gZnVuY1xuXG4gICAgICAgIGZ1bmN0aW9uIHRleHRhcmVhX2xvY2soKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3QgPSBjb20udGV4dGFyZWFHZXQodGV4dGFyZWEsIHJvdyk7XG4gICAgICAgICAgICBpZiAoZmlyc3QuaW5kZXhPZignPGJyLz4nKSA9PSAtMSkgdGV4dGFyZWEuYXR0cih7XG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiBtYXhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWxzZSB0ZXh0YXJlYS5hdHRyKHtcbiAgICAgICAgICAgICAgICBtYXhsZW5ndGg6IG1heCArIChmaXJzdC5zcGxpdCgnPGJyLz4nKS5sZW5ndGggLSAxKSAqIDJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IC8vZWRuIGZ1bmNcbiAgICB9IC8vZWRuIGZ1bmNcblxuICAgIGZ1bmN0aW9uIHJvd19jdXQoc3RyLCByb3cpIHtcbiAgICAgICAgcm93ID0gcm93IHx8IDA7XG4gICAgICAgIHZhciBzdHIyID0gc3RyLnNwbGl0KCc8YnIvPicpO1xuICAgICAgICBpZiAocm93IDw9IDAgfHwgc3RyMi5sZW5ndGggPD0gcm93KSByZXR1cm4gc3RyO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzdHIzID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvdzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc3RyMyArPSBzdHIyW2ldO1xuICAgICAgICAgICAgICAgIGlmIChpIDwgcm93IC0gMSkgc3RyMyArPSAnPGJyLz4nO1xuICAgICAgICAgICAgfSAvL2VkbiBmb3JcbiAgICAgICAgICAgIHJldHVybiBzdHIzO1xuICAgICAgICB9IC8vZW5kIGVsc2VcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIGZ1bmN0aW9uIGNvbF9icmVhayhzdHIsIGNvbCkge1xuICAgICAgICB2YXIgbGluZSA9IE1hdGguY2VpbChzdHIubGVuZ3RoIC8gY29sKTtcbiAgICAgICAgaWYgKGxpbmUgPT0gMSkgcmV0dXJuIHN0cjtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc3RyMSA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSBzdHIxICs9IHN0ci5zdWJzdHIoMCwgY29sKSArICc8YnIvPic7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA8IGxpbmUgLSAxKSBzdHIxICs9IHN0ci5zdWJzdHIoaSAqIGNvbCwgY29sKSArICc8YnIvPic7XG4gICAgICAgICAgICAgICAgZWxzZSBzdHIxICs9IHN0ci5zdWJzdHIoaSAqIGNvbCk7XG4gICAgICAgICAgICB9IC8vZWRuIGZvclxuICAgICAgICAgICAgcmV0dXJuIHN0cjE7XG4gICAgICAgIH0gLy9lbmQgZWxzZVxuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgZnVuY3Rpb24gY29sX2N1dChzdHIsIGNvbCkge1xuICAgICAgICBpZiAoc3RyLmxlbmd0aCA+IGNvbCkgcmV0dXJuIHN0ci5zdWJzdHIoMCwgY29sKTtcbiAgICAgICAgZWxzZSByZXR1cm4gc3RyO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/pmZDliLZ0ZXh0YXJlYei+k+WFpeaWh+Wtl+eahOihjOaVsFxuICAgIGNvbS50ZXh0YXJlYVVubG9jayA9IGZ1bmN0aW9uICh0ZXh0YXJlYSkge1xuICAgICAgICB0ZXh0YXJlYS5vZmYoKTtcbiAgICB9IC8vZWRuIGZ1bmNcblxuICAgIC8v5YiH5Ymy5Y2V6KGM5paH5a2X5oiQ5Yeg6KGMXG4gICAgY29tLnRleHRUb011bHRpID0gZnVuY3Rpb24gKHN0ciwgY29sKSB7XG4gICAgICAgIGlmIChzdHIgIT0gJycgJiYgY29sID4gMSkge1xuICAgICAgICAgICAgaWYgKHN0ci5pbmRleE9mKCdcXG4nKSA9PSAtMSAmJiBzdHIubGVuZ3RoID4gY29sKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0cjEgPSAnJztcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IE1hdGguY2VpbChzdHIubGVuZ3RoIC8gY29sKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbGluZTonICsgbGluZSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBsaW5lIC0gMSkgc3RyMSArPSBzdHIuc3Vic3RyKGkgKiBjb2wsIGNvbCkgKyAnXFxuJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBzdHIxICs9IHN0ci5zdWJzdHIoaSAqIGNvbCk7XG4gICAgICAgICAgICAgICAgfSAvL2VkbiBmb3JcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyMTtcbiAgICAgICAgICAgIH0gLy9lbmQgaWZcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHN0cjtcbiAgICAgICAgfS8vZWRuIGlmXG4gICAgICAgIGVsc2UgcmV0dXJuIG51bGw7XG4gICAgfSAvL2VkbiBmdW5jXG5cbiAgICAvL+aLvOW4puWPguaVsOeahHVybOmTvuaOpVxuICAgIGNvbS51cmwgPSBmdW5jdGlvbiAodXJsLCBwYXJhKSB7XG4gICAgICAgIHZhciBub3cgPSAtMTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHBhcmEpIHtcbiAgICAgICAgICAgIG5vdysrO1xuICAgICAgICAgICAgaWYgKG5vdyA9PSAwKSB1cmwgKz0gJz8nO1xuICAgICAgICAgICAgZWxzZSB1cmwgKz0gJyYnO1xuICAgICAgICAgICAgdXJsICs9IGtleSArICc9JyArIHBhcmFba2V5XVxuICAgICAgICB9IC8vZW5kIGZvclxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH07IC8vZW5kIGZ1bmNcblxuICAgIC8v5Lul5bin5Li65Y2V5L2N55qEc2V0VGltZW91dFxuICAgIGNvbS5zZXRUaW1lb3V0ID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBmcmFtZSkge1xuICAgICAgICBpZiAoZnJhbWUgPiAwICYmIGNhbGxiYWNrKSByZXR1cm4gc2V0VGltZXIoY2FsbGJhY2ssIGZyYW1lLCBmYWxzZSk7XG4gICAgfSAvL2VkbiBmdW5jXG5cbiAgICBjb20uY2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gKHRpbWVyKSB7XG4gICAgICAgIGlmICh0aW1lciAmJiB0aW1lci50aW1lcikgY2xlYXJUaW1lcih0aW1lcik7XG4gICAgfSAvL2VkbiBmdW5jXG5cbiAgICAvL+S7peW4p+S4uuWNleS9jeeahHNldEludGVydmFsXG4gICAgY29tLnNldEludGVydmFsID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBmcmFtZSkge1xuICAgICAgICBpZiAoZnJhbWUgPiAwICYmIGNhbGxiYWNrKSByZXR1cm4gc2V0VGltZXIoY2FsbGJhY2ssIGZyYW1lLCB0cnVlKTtcbiAgICB9IC8vZWRuIGZ1bmNcblxuICAgIGNvbS5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKHRpbWVyKSB7XG4gICAgICAgIGlmICh0aW1lciAmJiB0aW1lci50aW1lcikgY2xlYXJUaW1lcih0aW1lcik7XG4gICAgfSAvL2VkbiBmdW5jXG5cbiAgICBmdW5jdGlvbiBjbGVhclRpbWVyKHRpbWVyKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRpbWVyLnRpbWVyKTtcbiAgICAgICAgdGltZXIgPSBudWxsO1xuICAgIH0gLy9lZG4gZnVuY1xuXG4gICAgZnVuY3Rpb24gc2V0VGltZXIoY2FsbGJhY2ssIGZyYW1lLCBpbnRlcnZhbCkge1xuICAgICAgICB2YXIgdGltZXIgPSB7XG4gICAgICAgICAgICBub3c6IDAsXG4gICAgICAgICAgICB0aW1lcjogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0aW1lcl9oYW5kbGVyKCk7XG4gICAgICAgIHJldHVybiB0aW1lcjtcblxuICAgICAgICBmdW5jdGlvbiB0aW1lcl9oYW5kbGVyKCkge1xuICAgICAgICAgICAgdGltZXIubm93Kys7XG4gICAgICAgICAgICB2YXIgdGltZXVwID0gdGltZXIubm93ID09IGZyYW1lO1xuICAgICAgICAgICAgaWYgKHRpbWV1cCkge1xuICAgICAgICAgICAgICAgIHRpbWVyLm5vdyA9IDA7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0gLy9lbmQgaWZcbiAgICAgICAgICAgIGlmIChpbnRlcnZhbCB8fCAoIWludGVydmFsICYmICF0aW1ldXApKSB0aW1lci50aW1lciA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aW1lcl9oYW5kbGVyKTtcbiAgICAgICAgfSAvL2VuZCBmdW5jXG5cbiAgICB9IC8vZWRuIGZ1bmNcblxuICAgIC8v5bCGY2FudmFz6L2s5oiQ5a2Y5ZyoY2Ru5pyN5Yqh5Zmo5LiK55qE6L+c56iL5Zu+54mH5Zyw5Z2AXG4gICAgY29tLmNhbnZhc19zZW5kID0gZnVuY3Rpb24gKGNhbnZhcywgY2FsbGJhY2ssIHNlY3JldGtleSwgdHlwZSwgY29tcHJlc3MpIHtcbiAgICAgICAgaWYgKGNhbnZhcykge1xuICAgICAgICAgICAgc2VjcmV0a2V5ID0gc2VjcmV0a2V5IHx8ICd0ZXN0JztcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8ICdqcGcnO1xuICAgICAgICAgICAgY29tcHJlc3MgPSBjb21wcmVzcyB8fCAwLjk1O1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3BuZycpIHZhciBiYXNlNjQgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcbiAgICAgICAgICAgIGVsc2UgdmFyIGJhc2U2NCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCBjb21wcmVzcyk7XG4gICAgICAgICAgICB0aGlzLmJhc2U2NF9zZW5kKGJhc2U2NCwgY2FsbGJhY2ssIHNlY3JldGtleSk7XG4gICAgICAgIH0gLy9lZG4gaWZcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIC8v5bCGYmFzZTY05pWw5o2u5qC85byP6L2s5oiQ5a2Y5ZyoY2Ru5pyN5Yqh5Zmo5LiK55qE6L+c56iL5Zu+54mH5Zyw5Z2AXG4gICAgY29tLmJhc2U2NF9zZW5kID0gZnVuY3Rpb24gKGJhc2U2NCwgY2FsbGJhY2ssIHNlY3JldGtleSkge1xuICAgICAgICBpZiAoYmFzZTY0KSB7XG4gICAgICAgICAgICBzZWNyZXRrZXkgPSBzZWNyZXRrZXkgfHwgJ3Rlc3QnO1xuICAgICAgICAgICAgJC5wb3N0KCdodHRwczovL3Rvb2wuaDUteC5jb20vY2RuL2Jhc2U2NCcsIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBiYXNlNjQsXG4gICAgICAgICAgICAgICAga2V5OiBzZWNyZXRrZXlcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3AuZXJyY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2socmVzcC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0vL2VkbiBpZlxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJybXNnOicgKyByZXNwLmVycm1zZyk7XG4gICAgICAgICAgICAgICAgfS8vZWRuIGVsc2VcbiAgICAgICAgICAgIH0sICdqc29uJyk7XG4gICAgICAgIH0gLy9lZG4gaWZcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIC8v5bCG6Leo5Z+f55qE6L+c56iL5Zu+54mH5Zyw5Z2A6L2s5oiQYmFzZTY05pWw5o2u5qC85byP77yM6Kej5Yaz5Zu+54mH6Leo5Z+f6Zeu6aKYXG4gICAgY29tLmJhc2U2NF9nZXQgPSBmdW5jdGlvbiAobGluaywgY2FsbGJhY2ssIHNlY3JldGtleSkge1xuICAgICAgICBpZiAobGluaykge1xuICAgICAgICAgICAgc2VjcmV0a2V5ID0gc2VjcmV0a2V5IHx8ICd0ZXN0JztcbiAgICAgICAgICAgICQucG9zdCgnaHR0cDovL3Rvb2wuaDUteC5jb20vaW1hZ2UvYmFzZTY0Jywge1xuICAgICAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICAgICAga2V5OiBzZWNyZXRrZXlcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhyZXNwKTtcbiAgICAgICAgICAgIH0sICd0ZXh0Jyk7XG4gICAgICAgIH0gLy9lZG4gaWZcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIC8v5bCG5a2X56ym5Liy6L2s5oiQ5LqM57u056CB77yM6L+U5ZueYmFzZTY05pWw5o2u5qC85byPXG4gICAgY29tLnFyY29kZSA9IGZ1bmN0aW9uICh0eHQsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRzID0geyBzaXplOiAyMDAsIGNvbG9yOiAnMDAwMDAwJywgYmc6ICdmZmZmZmYnLCBib3JkZXI6IDAsIGVycm9yOiAwIH07XG4gICAgICAgIHZhciBkYXRhID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgICAgICBpZiAodHh0ICYmIHR4dCAhPSAnJykge1xuICAgICAgICAgICAgdmFyIHNyYyA9ICdodHRwOi8vdG9vbC5oNS14LmNvbS9pbWFnZS9xcmNvZGU/dHh0PScgKyB0eHQgKyAnJnNpemU9JyArIGRhdGEuc2l6ZSArICcmY29sb3I9JyArIGRhdGEuY29sb3IgKyAnJmJnPScgKyBkYXRhLmJnICsgJyZib3JkZXI9JyArIGRhdGEuYm9yZGVyICsgJyZlcnJvcj0nICsgZGF0YS5lcnJvciArIChkYXRhLmxvZ28gPyAnJmxvZ289JyArIGRhdGEubG9nbyA6ICcnKTtcbiAgICAgICAgICAgIHJldHVybiBzcmM7XG4gICAgICAgIH0vL2VkbiBpZlxuICAgICAgICBlbHNlIHJldHVybiBudWxsO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/lsIblrZfnrKbkuLLovazmiJDmnaHlvaLnoIHvvIzov5Tlm55iYXNlNjTmlbDmja7moLzlvI9cbiAgICBjb20uYmFyY29kZSA9IGZ1bmN0aW9uICh0eHQsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRzID0geyB3aWR0aDogNDAwLCBoZWlnaHQ6IDIwMCwgY29sb3I6ICcwMDAwMDAnLCBiZzogJ2ZmZmZmZicsIHB1cmU6IHRydWUgfTtcbiAgICAgICAgdmFyIGRhdGEgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICAgIGlmICh0eHQgJiYgdHh0ICE9ICcnKSB7XG4gICAgICAgICAgICB2YXIgc3JjID0gJ2h0dHA6Ly90b29sLmg1LXguY29tL2ltYWdlL2JhcmNvZGU/dHh0PScgKyB0eHQgKyAnJndpZHRoPScgKyBkYXRhLndpZHRoICsgJyZoZWlnaHQ9JyArIGRhdGEuaGVpZ2h0ICsgJyZjb2xvcj0nICsgZGF0YS5jb2xvciArICcmYmc9JyArIGRhdGEuYmcgKyAnJnB1cmU9JyArIGRhdGEucHVyZTtcbiAgICAgICAgICAgIHJldHVybiBzcmM7XG4gICAgICAgIH0vL2VkbiBpZlxuICAgICAgICBlbHNlIHJldHVybiBudWxsO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/kuIDplK7lpI3liLblrZfnrKbkuLLliLDliarotLTmnb9cbiAgICBjb20uY2xpcGJvYXJkID0gZnVuY3Rpb24gKGJveCwgdmFsLCBvbkNvbXBsZXRlLCBvbkVycm9yKSB7XG4gICAgICAgIHZhciBzdXBwb3J0ID0gISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQ7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdXBwb3J0OicgKyBzdXBwb3J0KTtcbiAgICAgICAgaWYgKHN1cHBvcnQpIHtcbiAgICAgICAgICAgIGlmIChib3gubGVuZ3RoID4gMCAmJiB2YWwgIT0gJycpIHtcbiAgICAgICAgICAgICAgICBib3guYXR0cih7ICdkYXRhLWNvcHknOiB2YWwgfSkub24oJ2NsaWNrJywgeyBjYWxsYmFjazogb25Db21wbGV0ZSB9LCBjb3B5VGV4dCk7XG4gICAgICAgICAgICB9Ly9lZG4gaWZcbiAgICAgICAgfS8vZWRuIGlmXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+a1j+iniOWZqOS4jeaUr+aMgeWkjeWItuaWh+acrOWIsOWJqui0tOadvycpO1xuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IoKTtcbiAgICAgICAgfS8vZW5kIGVsc2VcbiAgICB9Ly9lZG4gZnVuY1xuXG4gICAgZnVuY3Rpb24gY29weVRleHQoZSkge1xuICAgICAgICB2YXIgdmFsID0gJCh0aGlzKS5kYXRhKCdjb3B5Jyk7XG4gICAgICAgIHZhciBpbnB1dCA9ICQoJzx0ZXh0YXJlYSByZWFkb25seT1cInJlYWRvbmx5XCI+PC90ZXh0YXJlYT4nKS5odG1sKHZhbCkuY3NzKHsgcG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6IDAsIHRvcDogMCwgd2lkdGg6IDEsIGhlaWdodDogMSwgdmlzaWJsZTogJ2hpZGRlbicgfSkuYXBwZW5kVG8oJ2JvZHknKTtcbiAgICAgICAgaW5wdXRbMF0uc2VsZWN0KCk7XG4gICAgICAgIGlucHV0WzBdLnNldFNlbGVjdGlvblJhbmdlKDAsIGlucHV0WzBdLnZhbHVlLmxlbmd0aCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb3B5IGNvbnRlbnQ6JyArIGlucHV0LnZhbCgpKVxuICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnQ29weScpO1xuICAgICAgICBpbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgaW5wdXQgPSBudWxsO1xuICAgICAgICBpZiAoZS5kYXRhLmNhbGxiYWNrKSBlLmRhdGEuY2FsbGJhY2soKTtcbiAgICB9Ly9lZG4gZnVuY1xuXG4gICAgLy/mmL7npLrpobXpnaLmuLLmn5NmcHNcbiAgICBjb20uZnBzU2hvdyA9IGZ1bmN0aW9uIChzaGVsbCwgc3BhY2UpIHtcbiAgICAgICAgc3BhY2UgPSBzcGFjZSB8fCAzMDtcbiAgICAgICAgc3BhY2UgPSBzcGFjZSA8IDEwID8gMTAgOiBzcGFjZTtcbiAgICAgICAgc2hlbGwgPSBzaGVsbCB8fCAkKCc8ZGl2IGlkPVwiZnBzU2hvd1wiPjwvZGl2PicpLmFwcGVuZFRvKGliYXNlLmRpciA9PSAnbGFuZHNjYXBlJyA/ICdhcnRpY2xlJyA6ICdib2R5Jyk7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmcHNfZGVjdGVkKG5ldyBEYXRlKCkuZ2V0VGltZSgpLCAtMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGZwc19kZWN0ZWQobGFzdCwgY291bnQpIHtcbiAgICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHZhciBmcHMgPSBNYXRoLnJvdW5kKDEwMDAgLyAobm93IC0gbGFzdCkpO1xuICAgICAgICAgICAgZnBzID0gZnBzID4gNjAgPyA2MCA6IGZwcztcbiAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICBpZiAoY291bnQgJSBzcGFjZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZwcyA+PSA0MCkgdmFyIGNsYXNzbmFtZSA9ICdmcHNGYXN0JztcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChmcHMgPj0gMjApIHZhciBjbGFzc25hbWUgPSAnZnBzTm9ybWFsJztcbiAgICAgICAgICAgICAgICBlbHNlIHZhciBjbGFzc25hbWUgPSAnZnBzU2xvdyc7XG4gICAgICAgICAgICAgICAgc2hlbGwucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcyhjbGFzc25hbWUpLmh0bWwoJ2ZwczonICsgZnBzKTtcbiAgICAgICAgICAgIH0vL2VkbiBpZlxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmcHNfZGVjdGVkKG5vdywgY291bnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0vL2VkbiBmdW5jXG5cbiAgICB9Ly9lZG4gZnVuY1xuXG4gICAgLy/lh7rooYDmlrnmoYhcbiAgICBjb20uYmxlZWQgPSBmdW5jdGlvbiAoc2hlbGwsIG1heFNpemUpIHtcbiAgICAgICAgc2hlbGwgPSBzaGVsbCB8fCAkKCcuYXJ0aWNsZUJsZWVkJyk7XG4gICAgICAgIG1heFNpemUgPSBtYXhTaXplIHx8IFs5MzYsIDEyMThdO1xuICAgICAgICBpZiAoc2hlbGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGFydGljbGUgPSAkKCdhcnRpY2xlJyk7XG4gICAgICAgICAgICByZXNpemVfaGFuZGxlcigpO1xuICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBzaGVsbF9yZXNpemUpO1xuICAgICAgICB9Ly9lZG4gaWZcbiAgICAgICAgZnVuY3Rpb24gc2hlbGxfcmVzaXplKGUpIHtcbiAgICAgICAgICAgIGNvbS5zZXRUaW1lb3V0KHJlc2l6ZV9oYW5kbGVyLCA1KTtcbiAgICAgICAgfS8vZWRuIGZ1bmNcbiAgICAgICAgZnVuY3Rpb24gcmVzaXplX2hhbmRsZXIoKSB7XG4gICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2luZG93U2NhbGUgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDc1MDtcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSBhcnRpY2xlLmhlaWdodCgpIC8gd2luZG93U2NhbGUgLyBtYXhTaXplWzFdO1xuICAgICAgICAgICAgICAgIGliYXNlLmJsZWVkU2NhbGUgPSBzY2FsZTtcbiAgICAgICAgICAgICAgICBzaGVsbC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgJyArIChvcy5pcGhvbmVYID8gMCA6ICcwLjE1cmVtJyksXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBzY2FsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfS8vZWRuIGZ1bmNcbiAgICAgICAgfS8vZWRuIGZ1bmNcbiAgICB9Ly9lZG4gZnVuXG5cbiAgICAvL+S4umlwaG9uZVjliqDkuIrlupXpg6jlronlhajljLrln59cbiAgICBjb20uRnVsbEJhciA9IGZ1bmN0aW9uIChodCkge1xuICAgICAgICBodCA9IGh0IHx8IDMwO1xuICAgICAgICBpZiAob3MuRnVsbEJhcikge1xuICAgICAgICAgICAgd2luZG93X3Jlc2l6ZSgpO1xuICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCB3aW5kb3dfcmVzaXplKTtcbiAgICAgICAgfS8vZWRuIGlmXG4gICAgICAgIGZ1bmN0aW9uIHdpbmRvd19yZXNpemUoZSkge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCA+IDY2NykgJCgnYXJ0aWNsZScpLmNzcyh7IGhlaWdodDogJ2NhbGMoIDEwMCUgLSAnICsgKGh0ICogMC4wMSkgKyAncmVtICknIH0pO1xuICAgICAgICAgICAgZWxzZSAkKCdhcnRpY2xlJykuY3NzKHsgaGVpZ2h0OiAnMTAwJScgfSk7XG4gICAgICAgIH0vL2VuZCBldmVudFxuICAgIH0vL2VkbiBmdW5cblxuICAgIC8vIOe8qeaUvumAgumFjeaWueahiFxuICAgIGNvbS5hZGFwdGF0aW9uID0gZnVuY3Rpb24gKHNjYWxlVHlwZSwgc2hlbGwpIHtcbiAgICAgICAgc2hlbGwgPSBzaGVsbCB8fCAkKCcuYXJ0aWNsZUJsZWVkJyk7XG4gICAgICAgIHZhciBhcnRpY2xlQm94ID0gJCgnYXJ0aWNsZScpO1xuICAgICAgICBpZiAoc2hlbGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVzaXplX2hhbmRsZXIoKTtcbiAgICAgICAgICAgICQod2luZG93KS5vbigncmVzaXplJywgc2hlbGxfcmVzaXplKTtcbiAgICAgICAgfS8vZWRuIGlmXG4gICAgICAgIGZ1bmN0aW9uIHNoZWxsX3Jlc2l6ZShlKSB7XG4gICAgICAgICAgICBjb20uc2V0VGltZW91dChyZXNpemVfaGFuZGxlciwgNSk7XG4gICAgICAgIH0vL2VkbiBmdW5jXG4gICAgICAgIGZ1bmN0aW9uIHJlc2l6ZV9oYW5kbGVyKCkge1xuICAgICAgICAgICAgdmFyIHcgPSBzaGVsbC53aWR0aCgpLCBoID0gc2hlbGwuaGVpZ2h0KCk7XG4gICAgICAgICAgICB2YXIgaXcgPSBhcnRpY2xlQm94LndpZHRoKCksIGloID0gYXJ0aWNsZUJveC5oZWlnaHQoKTtcbiAgICAgICAgICAgIC8vIHhSYXRpbyDlrr3luqbnvKnmlL7lgLwgeVJhdGlvIOmrmOW6pue8qeaUvuWAvFxuICAgICAgICAgICAgeFJhdGlvID0gaXcgLyB3LCB5UmF0aW8gPSBpaCAvIGgsIHNSYXRpbyA9IDE7XG4gICAgICAgICAgICBpZiAoc2NhbGVUeXBlID09ICdjb250YWluJykge1xuICAgICAgICAgICAgICAgIC8vIOe8qeaUvuiInuWPsOS7peWujOWFqOijheWFpeeItuWFg+e0oFx0XHRcdFx0XHRcbiAgICAgICAgICAgICAgICBzUmF0aW8gPSBNYXRoLm1pbih4UmF0aW8sIHlSYXRpbyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNjYWxlVHlwZSA9PSAnY292ZXInKSB7XG4gICAgICAgICAgICAgICAgLy8g57yp5pS+6Iie5Y+w5Lul5a6M5YWo6KaG55uW54i25YWD57SgXHRcdFx0XHRcdFx0XG4gICAgICAgICAgICAgICAgc1JhdGlvID0gTWF0aC5tYXgoeFJhdGlvLCB5UmF0aW8pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzY2FsZVR5cGUgPT0gJ3dpZHRoJykge1xuICAgICAgICAgICAgICAgIC8vIOe8qeaUvuiInuWPsOS7peWuveW6puWujOWFqOijheWFpeeItuWFg+e0oFx0XHRcdFx0XG4gICAgICAgICAgICAgICAgc1JhdGlvID0geFJhdGlvXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOe8qeaUvuiInuWPsOS7pemrmOW6puWujOWFqOijheWFpeeItuWFg+e0oFxuICAgICAgICAgICAgICAgIHNSYXRpbyA9IHlSYXRpb1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlbGwuY3NzKHtcbiAgICAgICAgICAgICAgICBzY2FsZTogc1JhdGlvXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfS8vZWRuIGZ1bmNcbiAgICB9Ly9lZG4gZnVuXG5cbiAgICAvLyDojrflj5blvIDlp4vml7bpl7TlgJLnu5PmnZ/ml7bpl7TkuYvpl7Ru5bm0buaciG7ml6VcbiAgICBjb20udGltZV92YWxpZGUgPSBmdW5jdGlvbiAoc3RhcnRfdGltZSwgZW5kX3RpbWUpIHtcbiAgICAgICAgdmFyIGNvbW1vbl95ZWFyID0gWzAsIDMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xuICAgICAgICB2YXIgbGVhcF95ZWFyID0gWzAsIDMxLCAyOSwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xuICAgICAgICBlbmRfdGltZSA9IGVuZF90aW1lIHx8IG5ldyBEYXRlKCkuRm9ybWF0KCd5eXl5LU1NLWRkIGhoOm1tOnNzJyk7XG4gICAgICAgIC8v6aqM6K+B5pe26Ze05qC85byPXG4gICAgICAgIHZhciByZWcgPSAvXlsxLTldXFxkezN9LSgwWzEtOV18MVswLTJdKS0oMFsxLTldfFsxLTJdWzAtOV18M1swLTFdKVxccysoMjB8MjF8MjJ8MjN8WzAtMV1cXGQpOlswLTVdXFxkOlswLTVdXFxkJC87XG4gICAgICAgIHZhciByZWdFeHAgPSBuZXcgUmVnRXhwKHJlZyk7XG4gICAgICAgIGlmICghcmVnRXhwLnRlc3QoZW5kX3RpbWUpIHx8ICFyZWdFeHAudGVzdChzdGFydF90aW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8v5Yik5pat5YmN5ZCO5pe26Ze05aSn5bCPXG4gICAgICAgIHZhciB0aW1lc3RhbXBfc3RhcnRfdGltZSA9IERhdGUucGFyc2UobmV3IERhdGUoc3RhcnRfdGltZSkpO1xuICAgICAgICB2YXIgdGltZXN0YW1wX2VuZF90aW1lID0gRGF0ZS5wYXJzZShuZXcgRGF0ZShlbmRfdGltZSkpO1xuICAgICAgICBpZiAodGltZXN0YW1wX2VuZF90aW1lIC8gMTAwMCAtIHRpbWVzdGFtcF9zdGFydF90aW1lIC8gMTAwMCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8v6I635Y+W5YmN5Zub5L2NXG4gICAgICAgIHZhciB0aW1lX2luZm9fc3RhcnQgPSBzdGFydF90aW1lLnNwbGl0KCcgJyk7XG4gICAgICAgIHZhciB0aW1lX2luZm9fZW5kID0gZW5kX3RpbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICAvL+iOt+WPluW5tOaciOaXpVxuICAgICAgICB2YXIgeWVhcl9tb250aF9kYXlfc3RhcnQgPSB0aW1lX2luZm9fc3RhcnRbMF0uc3BsaXQoJy0nKTtcbiAgICAgICAgdmFyIHllYXJfbW9udGhfZGF5X2VuZCA9IHRpbWVfaW5mb19lbmRbMF0uc3BsaXQoJy0nKTtcbiAgICAgICAgLy/ojrflj5bml7bpl7RcbiAgICAgICAgdmFyIGhvdXJfbWludXRlX3NlY29uZF9zdGFydCA9IHRpbWVfaW5mb19zdGFydFsxXS5zcGxpdCgnOicpO1xuICAgICAgICB2YXIgaG91cl9taW51dGVfc2Vjb25kX2VuZCA9IHRpbWVfaW5mb19lbmRbMV0uc3BsaXQoJzonKTtcblxuICAgICAgICB2YXIgYmVhcGFydF95ZWFyID0gcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfZW5kWzBdKSAtIHBhcnNlSW50KHllYXJfbW9udGhfZGF5X3N0YXJ0WzBdKTtcblxuICAgICAgICAvL+i/m+ihjOWIpOaWreaXtumXtFxuICAgICAgICB2YXIgdGltZV9pbmZvXzEgPSBwYXJzZUludChob3VyX21pbnV0ZV9zZWNvbmRfc3RhcnRbMl0pICsgcGFyc2VJbnQoaG91cl9taW51dGVfc2Vjb25kX3N0YXJ0WzFdKSAqIDYwICsgcGFyc2VJbnQoaG91cl9taW51dGVfc2Vjb25kX3N0YXJ0WzBdKSAqIDM2MDA7XG4gICAgICAgIHZhciB0aW1lX2luZm9fMiA9IHBhcnNlSW50KGhvdXJfbWludXRlX3NlY29uZF9lbmRbMl0pICsgcGFyc2VJbnQoaG91cl9taW51dGVfc2Vjb25kX2VuZFsxXSkgKiA2MCArIHBhcnNlSW50KGhvdXJfbWludXRlX3NlY29uZF9lbmRbMF0pICogMzYwMDtcblxuICAgICAgICB2YXIgaG91ciA9IDA7XG4gICAgICAgIHZhciBtaW51dGUgPSAwO1xuICAgICAgICB2YXIgc2Vjb25kID0gMDtcbiAgICAgICAgdmFyIGJlYXBhcnRfdGltZSA9IHRpbWVfaW5mb18yIC0gdGltZV9pbmZvXzE7XG4gICAgICAgIHZhciBiZWFwYXJ0X2RheV9sYXN0ID0gMDtcbiAgICAgICAgaWYgKHRpbWVzdGFtcF9lbmRfdGltZSAvIDEwMDAgLSB0aW1lc3RhbXBfc3RhcnRfdGltZSAvIDEwMDAgPD0gODY0MDApIHtcbiAgICAgICAgICAgIC8vIOWwj+S6juS4gOWkqVxuICAgICAgICAgICAgdmFyIHRpbSA9IHRpbWVzdGFtcF9lbmRfdGltZSAvIDEwMDAgLSB0aW1lc3RhbXBfc3RhcnRfdGltZSAvIDEwMDA7XG4gICAgICAgICAgICBob3VyID0gcGFyc2VJbnQodGltIC8gMzYwMCk7XG4gICAgICAgICAgICBtaW51dGUgPSBwYXJzZUludCgodGltIC0gaG91ciAqIDYwICogNjApIC8gNjApO1xuICAgICAgICAgICAgc2Vjb25kID0gdGltIC0gaG91ciAqIDYwICogNjAgLSBtaW51dGUgKiA2MDtcbiAgICAgICAgICAgIHJldHVybiBbMCwgMCwgMCwgaG91ciwgbWludXRlLCBzZWNvbmRdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiZWFwYXJ0X3RpbWUgPCAwKSB7XG4gICAgICAgICAgICBiZWFwYXJ0X2RheSA9IGJlYXBhcnRfZGF5IC0gMTtcbiAgICAgICAgICAgIGJlYXBhcnRfdGltZSA9IHRpbWVfaW5mb18yICsgODY0MDAgLSB0aW1lX2luZm9fMTtcbiAgICAgICAgICAgIGhvdXIgPSBwYXJzZUludChiZWFwYXJ0X3RpbWUgLyAzNjAwKTtcbiAgICAgICAgICAgIG1pbnV0ZSA9IHBhcnNlSW50KChiZWFwYXJ0X3RpbWUgLSBob3VyICogNjAgKiA2MCkgLyA2MCk7XG4gICAgICAgICAgICBzZWNvbmQgPSBiZWFwYXJ0X3RpbWUgLSBob3VyICogNjAgKiA2MCAtIG1pbnV0ZSAqIDYwO1xuICAgICAgICAgICAgYmVhcGFydF9kYXlfbGFzdCA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBob3VyID0gcGFyc2VJbnQoYmVhcGFydF90aW1lIC8gMzYwMCk7XG4gICAgICAgICAgICBtaW51dGUgPSBwYXJzZUludCgoYmVhcGFydF90aW1lIC0gaG91ciAqIDYwICogNjApIC8gNjApO1xuICAgICAgICAgICAgc2Vjb25kID0gYmVhcGFydF90aW1lIC0gaG91ciAqIDYwICogNjAgLSBtaW51dGUgKiA2MDtcbiAgICAgICAgfVxuICAgICAgICAvL+WQjOS4gOW5tFxuICAgICAgICBpZiAoYmVhcGFydF95ZWFyID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgYmVhcGFydF9kYXkgPSBwYXJzZUludCh5ZWFyX21vbnRoX2RheV9lbmRbMl0pIC0gcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfc3RhcnRbMl0pO1xuICAgICAgICAgICAgdmFyIGJlYXBhcnRfbW9udGggPSBwYXJzZUludCh5ZWFyX21vbnRoX2RheV9lbmRbMV0pIC0gcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfc3RhcnRbMV0pO1xuICAgICAgICAgICAgaWYgKGJlYXBhcnRfZGF5ID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMCwgYmVhcGFydF9tb250aCwgYmVhcGFydF9kYXkgLSBiZWFwYXJ0X2RheV9sYXN0LCBob3VyLCBtaW51dGUsIHNlY29uZF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCh5ZWFyX21vbnRoX2RheV9lbmRbMF0pICUgNCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBiZWFwYXJ0X2RheSA9IGxlYXBfeWVhcltwYXJzZUludCh5ZWFyX21vbnRoX2RheV9lbmRbMV0pXSAtIHBhcnNlSW50KHllYXJfbW9udGhfZGF5X3N0YXJ0WzJdKSArIHBhcnNlSW50KHllYXJfbW9udGhfZGF5X2VuZFsyXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmVhcGFydF9kYXkgPSBjb21tb25feWVhcltwYXJzZUludCh5ZWFyX21vbnRoX2RheV9lbmRbMV0pXSAtIHBhcnNlSW50KHllYXJfbW9udGhfZGF5X3N0YXJ0WzJdKSArIHBhcnNlSW50KHllYXJfbW9udGhfZGF5X2VuZFsyXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aW1lX2luZm9fMiAtIHRpbWVfaW5mb18xIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBiZWFwYXJ0X2RheSAtPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzAsIGJlYXBhcnRfbW9udGggLSAxLCBiZWFwYXJ0X2RheSAtIGJlYXBhcnRfZGF5X2xhc3QsIGhvdXIsIG1pbnV0ZSwgc2Vjb25kXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v6Z2e5ZCM5LiA5bm0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL+WIpOaWreWmguaenOebuOW3ruS4gOW5tFxuICAgICAgICAgICAgdmFyIGJlYXBhcnRfZGF5ID0gcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfZW5kWzJdKSAtIHBhcnNlSW50KHllYXJfbW9udGhfZGF5X3N0YXJ0WzJdKTtcbiAgICAgICAgICAgIHZhciBiZWFwYXJ0X21vbnRoID0gcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfZW5kWzFdKSAtIHBhcnNlSW50KHllYXJfbW9udGhfZGF5X3N0YXJ0WzFdKTtcbiAgICAgICAgICAgIHZhciBiZWFwYXJ0X3llYXIgPSBwYXJzZUludCh5ZWFyX21vbnRoX2RheV9lbmRbMF0pIC0gcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfc3RhcnRbMF0pO1xuICAgICAgICAgICAgaWYgKGJlYXBhcnRfbW9udGggPCAwKSB7XG4gICAgICAgICAgICAgICAgYmVhcGFydF95ZWFyID0gYmVhcGFydF95ZWFyIC0gMTtcbiAgICAgICAgICAgICAgICBiZWFwYXJ0X21vbnRoID0gMTIgLSBwYXJzZUludCh5ZWFyX21vbnRoX2RheV9zdGFydFsxXSkgKyBwYXJzZUludCh5ZWFyX21vbnRoX2RheV9lbmRbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJlYXBhcnRfZGF5ID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbYmVhcGFydF95ZWFyLCBiZWFwYXJ0X21vbnRoLCBiZWFwYXJ0X2RheSAtIGJlYXBhcnRfZGF5X2xhc3QsIGhvdXIsIG1pbnV0ZSwgc2Vjb25kXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHllYXJfbW9udGhfZGF5X2VuZFswXSkgJSA0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlYXBhcnRfZGF5ID0gbGVhcF95ZWFyW3BhcnNlSW50KHllYXJfbW9udGhfZGF5X2VuZFsxXSldIC0gcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfc3RhcnRbMl0pICsgcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfZW5kWzJdKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiZWFwYXJ0X2RheSA9IGNvbW1vbl95ZWFyW3BhcnNlSW50KHllYXJfbW9udGhfZGF5X2VuZFsxXSldIC0gcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfc3RhcnRbMl0pICsgcGFyc2VJbnQoeWVhcl9tb250aF9kYXlfZW5kWzJdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtiZWFwYXJ0X3llYXIsIGJlYXBhcnRfbW9udGggLSAxLCBiZWFwYXJ0X2RheSAtIGJlYXBhcnRfZGF5X2xhc3QsIGhvdXIsIG1pbnV0ZSwgc2Vjb25kXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2VBbGwgPSBmdW5jdGlvbiAoczEsIHMyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UobmV3IFJlZ0V4cChzMSwgXCJnbVwiKSwgczIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDmianlsZXkuIDkuKrlj6/ku6XmjIflrprml7bpl7TovpPlh7rmoLzlvI/nmoQgRGF0ZSDnmoTmlrnms5VcbiAgICAgKiDlubQoeSnlj6/ku6XnlKggMS00IOS4quWNoOS9jeespuOAgeaciChNKeOAgeaXpShkKeOAgeWto+W6pihxKeWPr+S7peeUqCAxLTIg5Liq5Y2g5L2N56ymXG4gICAgICog5bCP5pe2KGgp44CB5YiGKG0p44CB56eSKHMp44CB5q+r56eSKFMp5Y+q6IO955SoIDEg5Liq5Y2g5L2N56ymKOaYryAxLTMg5L2N55qE5pWw5a2XKVxuICAgICAqIEBwYXJhbSAgZm10ICB8IOagvOW8j+WMluihqOi+vuW8j1xuICAgICAqL1xuICAgIERhdGUucHJvdG90eXBlLkZvcm1hdCA9IGZ1bmN0aW9uIChmbXQpIHtcbiAgICAgICAgdmFyIG8gPSB7XG4gICAgICAgICAgICBcIk0rXCI6IHRoaXMuZ2V0TW9udGgoKSArIDEsXG4gICAgICAgICAgICBcImQrXCI6IHRoaXMuZ2V0RGF0ZSgpLFxuICAgICAgICAgICAgXCJoK1wiOiB0aGlzLmdldEhvdXJzKCksXG4gICAgICAgICAgICBcIm0rXCI6IHRoaXMuZ2V0TWludXRlcygpLFxuICAgICAgICAgICAgXCJzK1wiOiB0aGlzLmdldFNlY29uZHMoKSxcbiAgICAgICAgICAgIFwicStcIjogTWF0aC5mbG9vcigodGhpcy5nZXRNb250aCgpICsgMykgLyAzKSxcbiAgICAgICAgICAgIFwiU1wiOiB0aGlzLmdldE1pbGxpc2Vjb25kcygpXG4gICAgICAgIH07XG4gICAgICAgIGlmICgvKHkrKS8udGVzdChmbXQpKSBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsICh0aGlzLmdldEZ1bGxZZWFyKCkgKyBcIlwiKS5zdWJzdHIoNCAtIFJlZ0V4cC4kMS5sZW5ndGgpKTtcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKVxuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoXCIoXCIgKyBrICsgXCIpXCIpLnRlc3QoZm10KSkgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAoUmVnRXhwLiQxLmxlbmd0aCA9PSAxKSA/IChvW2tdKSA6ICgoXCIwMFwiICsgb1trXSkuc3Vic3RyKChcIlwiICsgb1trXSkubGVuZ3RoKSkpO1xuICAgICAgICByZXR1cm4gZm10O1xuICAgIH1cblxuICAgIC8q5oyJ54Wn5pWw57uE5p+Q5Liq5a2X5q615o6S5bqPKi9cbiAgICBBcnJheS5wcm90b3R5cGUuYnViYmxlU29ydCA9IGZ1bmN0aW9uIChrZXksIHR5cGUpIHtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc29ydChjb21wYXJlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNvbXBhcmUob2JqMSwgb2JqMikge1xuICAgICAgICAgICAgdmFyIHZhbDEgPSBldmFsKCdvYmoxLicgKyBrZXkpO1xuICAgICAgICAgICAgdmFyIHZhbDIgPSBldmFsKCdvYmoyLicgKyBrZXkpO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3Jpc2UnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbDEgPiB2YWwyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbDEgPCB2YWwyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbDEgPCB2YWwyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbDEgPiB2YWwyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb207XG5cbn0gLy9lbmQgaW1wb3J0XG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgZmFjdG9yeShnbG9iYWwpO1xufSkodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICBnbG9iYWwuaWNvbSA9IGltcG9ydENvbSgpO1xufSkiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQWRBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQUE7QUFoQ0E7QUFrQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQWRBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQTNCQTtBQUNBO0FBQ0E7QUEyQkE7QUFFQTtBQWpDQTtBQW1DQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBVEE7QUFXQTtBQVpBO0FBY0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/base/com.js\n");

/***/ }),

/***/ "./src/js/base/math.js":
/*!*****************************!*\
  !*** ./src/js/base/math.js ***!
  \*****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/typeof.js\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);\n\n\n//2018.11.28\nfunction importMath() {\n  var math = {}; //获得范围内随机整数\n\n  math.randomRange = function (min, max) {\n    var randomNumber;\n    randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;\n    return randomNumber;\n  }; //end func \n  //获得随机颜色\n\n\n  math.randomColor = function () {\n    var str = \"0123456789abcdef\";\n    var s = \"#\";\n\n    for (j = 0; j < 6; j++) {\n      s += str.charAt(Math.random() * str.length);\n    }\n\n    return s;\n  }; //end func\n  //随机打乱一个数组\n\n\n  math.randomSort = function (ary) {\n    if (ary && ary.length > 1) ary.sort(function () {\n      return 0.5 - Math.random();\n    });\n  }; //end func \n  //随机正负\n\n\n  math.randomPlus = function () {\n    return Math.random() < 0.5 ? -1 : 1;\n  }; //end func \n  //等比缩放,分cover模式和contain模式\n\n\n  math.autoSize = function (aryNum, aryMax, scaleMode) {\n    if (scaleMode === 1 || scaleMode === 0) scaleMode = scaleMode === 1 ? 'cover' : 'contain';else scaleMode = scaleMode || 'cover';\n    var aryNow = [];\n    var aryRate = aryNum[0] / aryNum[1];\n    aryNow[0] = aryMax[0];\n    aryNow[1] = Math.round(aryNow[0] / aryRate);\n\n    if (scaleMode == 'height') {\n      aryNow[1] = aryMax[1];\n      aryNow[0] = Math.round(aryNow[1] * aryRate);\n    } //edn else if\n    else if (scaleMode == 'contain') {\n        if (aryNow[1] > aryMax[1]) {\n          aryNow[1] = aryMax[1];\n          aryNow[0] = Math.round(aryNow[1] * aryRate);\n        } //end if\n\n      } //edn else if\n      else if (scaleMode == 'cover') {\n          if (aryNow[1] < aryMax[1]) {\n            aryNow[1] = aryMax[1];\n            aryNow[0] = Math.round(aryNow[1] * aryRate);\n          } //end if\n\n        } //edn else if\n        else if (scaleMode == 'full') aryNow = [aryMax[0], aryMax[1]];\n\n    return aryNow;\n  }; //end func\n  //缓动函数\n\n\n  math.ease = function (_now, _tar, _speed, _space) {\n    _speed = _speed || 10;\n    _space = _space || 0.1;\n\n    var _dis = _tar - _now;\n\n    if (Math.abs(_dis) > _space) return _dis / _speed + _now;else return _tar;\n  }; //end func\n  //角度转弧度\n\n\n  math.toRadian = function (degree) {\n    return degree * Math.PI / 180;\n  }; //end func \n  //弧度转角度\n\n\n  math.toDegree = function (radian) {\n    return radian / Math.PI * 180;\n  }; //end func \n  //获得2点之间的距离\n\n\n  math.getDis = function (source, target) {\n    var lineX = target[0] - source[0];\n    var lineY = target[1] - source[1];\n    return Math.sqrt(Math.pow(Math.abs(lineX), 2) + Math.pow(Math.abs(lineY), 2));\n  }; //end func \n  //获得2点之间的夹角\n\n\n  math.getDeg = function (source, target) {\n    var deg;\n\n    if (source[0] == target[0] && source[1] == target[1]) {\n      deg = 0;\n    } else {\n      var disX = target[0] - source[0];\n      var disY = target[1] - source[1];\n      deg = Math.atan(disY / disX) * 180 / Math.PI;\n\n      if (disX < 0) {\n        deg = 180 + deg;\n      } else if (disY < 0) {\n        deg = 360 + deg;\n      }\n    } //end else\n\n\n    return deg;\n  }; //end func\n  //测试2个jquery对象是否重合\n\n\n  math.hitTest = function (source, target, scaleX, scaleY) {\n    scaleX = scaleX != null ? scaleX : 1;\n    scaleY = scaleY != null ? scaleY : 1;\n\n    if (source && target) {\n      var pos1 = [source.offset().left + source.outerWidth() * scaleX * 0.5, source.offset().top + source.outerHeight() * scaleY * 0.5];\n      var pos2 = [target.offset().left + target.outerWidth() * scaleX * 0.5, target.offset().top + target.outerHeight() * scaleY * 0.5];\n      var disX = Math.abs(pos2[0] - pos1[0]);\n      var disY = Math.abs(pos2[1] - pos1[1]);\n      var disXMin = (source.outerWidth() + target.outerWidth()) * scaleX * 0.5;\n      var disYMin = (source.outerHeight() + target.outerHeight()) * scaleY * 0.5;\n      if (disX <= disXMin && disY <= disYMin) return true;else return false;\n    } //end if\n    else return false;\n  }; //end func\n  //测试2个带data().x,data().y的jquery对象是否重合\n\n\n  math.hitObject = function (source, target) {\n    if (source && target) {\n      var pos1 = [source.data().x + source.outerWidth() * 0.5, source.data().y + source.outerHeight() * 0.5];\n      var pos2 = [target.data().x + target.outerWidth() * 0.5, target.data().y + target.outerHeight() * 0.5];\n      var disX = Math.abs(pos2[0] - pos1[0]);\n      var disY = Math.abs(pos2[1] - pos1[1]);\n      var disXMin = (source.outerWidth() + target.outerWidth()) * 0.5;\n      var disYMin = (source.outerHeight() + target.outerHeight()) * 0.5;\n      if (disX <= disXMin && disY <= disYMin) return true;else return false;\n    } //end if\n    else return false;\n  }; //end func\n  //测试一个点和一个DOM对象是否重合\n\n\n  math.hitPoint = function (source, target, scaleX, scaleY) {\n    scaleX = scaleX != null ? scaleX : 1;\n    scaleY = scaleY != null ? scaleY : 1;\n\n    if (source && target) {\n      var area = [target.offset().left, target.offset().left + target.outerWidth() * scaleX, target.offset().top, target.offset().top + target.outerHeight() * scaleY];\n      if (source[0] >= area[0] && source[0] <= area[1] && source[1] >= area[2] && source[1] <= area[3]) return true;else return false;\n    } //end if\n    else return false;\n  }; //end func\n  //把一个数组转成数字\n\n\n  math.arrayToInt = function (ary) {\n    var num = 0;\n\n    for (var i = 0; i < ary.length; i++) {\n      num += ary[i] * Math.pow(10, ary.length - 1 - i);\n    }\n\n    return num;\n  }; //end func\n  //深度复制\n\n\n  math.deepClone = function (source) {\n    function getClone(_source) {\n      var clone = math.dataType(_source) == \"array\" ? [] : {};\n\n      for (var i in _source) {\n        if (math.dataType(_source[i]) != 'object' && math.dataType(_source[i]) != 'array') clone[i] = _source[i];else clone[i] = getClone(_source[i]);\n      } //end for\n\n\n      return clone;\n    } //edn func\n\n\n    return getClone(source);\n  }; //end func\n  //判断是数组还是对象\n\n\n  math.dataType = function (o) {\n    if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(o) === 'object') return Array == o.constructor ? 'array' : 'object';else return null;\n  }; //end func\n  //获得Object的长度\n\n\n  math.objectLength = function (obj) {\n    return Object.keys(obj).length;\n  }; //end func\n  //合并2个object，重复索引的值由后者替换前者\n\n\n  math.extend = function (obj1, obj2) {\n    if (obj1 && _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(obj1) === 'object' && Object.keys(obj1).length > 0) {\n      if (obj2 && _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(obj2) === 'object' && Object.keys(obj2).length > 0) {\n        for (var key in obj1) {\n          if (obj2.hasOwnProperty(key)) continue; //有相同的属性则略过 \n\n          obj2[key] = obj1[key];\n        } //edn for\n\n\n        return obj2;\n      } //edn if\n      else return obj1;\n    } //end if\n    else return obj2;\n  }; //edn func\n  //将数字格式化\n\n\n  math.formatNumber = function (value) {\n    value = value.toString();\n    if (value.length <= 3) return value;else return this.formatNumber(value.substr(0, value.length - 3)) + ',' + value.substr(value.length - 3);\n  }; //end func\n  //截取小数点后几位，非四舍五入\n\n\n  math[\"float\"] = function (value, pt) {\n    pt = pt || 2;\n    value = value.toString();\n    if (value.indexOf('.') == -1) return value;else {\n      var str1 = value.split('.');\n      var str2 = str1[0] + '.' + str1[1].substr(0, pt);\n      return Number(str2);\n    } //end else\n  }; //edn func\n  //将颜色值转换成rgb值\n\n\n  math.colorToRgb = function (color) {\n    if (color.match(/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i)) {\n      var value = color.slice(color.indexOf('#') + 1),\n          isShortNotation = value.length === 3,\n          r = isShortNotation ? value.charAt(0) + value.charAt(0) : value.substring(0, 2),\n          g = isShortNotation ? value.charAt(1) + value.charAt(1) : value.substring(2, 4),\n          b = isShortNotation ? value.charAt(2) + value.charAt(2) : value.substring(4, 6);\n      return [parseInt(r, 16), parseInt(g, 16), parseInt(b, 16)];\n    } //end if\n    else return [0, 0, 0];\n  }; //end func\n  //获取路径\n\n\n  math.path = function (path) {\n    if (path && path != '') return path.substr(0, path.lastIndexOf('/') + 1);else return false;\n  }; //edn func\n\n  /**\n   * 根据高宽数值计算高宽比例\n   * @method\n   * @param {widch} 宽度数值\n   * @param {height} 高度数值\n   * @return {vw:vh} 以vw:vh的形式返回比例值\n   */\n\n\n  math.aspect = function (width, height) {\n    var vw = width,\n        vh = height,\n        vr = gcd(vw, vh);\n\n    function gcd(a, b) {\n      return b == 0 ? a : gcd(b, a % b);\n    }\n\n    return vw / vr + ':' + vh / vr;\n  }; //edn func\n\n\n  return math;\n} //end import\n\n\n(function (global, factory) {\n  factory(global);\n})(typeof window !== \"undefined\" ? window : undefined, function (global) {\n  global.imath = importMath();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvYmFzZS9tYXRoLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2Jhc2UvbWF0aC5qcz8zOGFjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vMjAxOC4xMS4yOFxuZnVuY3Rpb24gaW1wb3J0TWF0aCgpIHtcbiAgICB2YXIgbWF0aCA9IHt9O1xuXG4gICAgLy/ojrflvpfojIPlm7TlhoXpmo/mnLrmlbTmlbBcbiAgICBtYXRoLnJhbmRvbVJhbmdlID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG4gICAgICAgIHZhciByYW5kb21OdW1iZXI7XG4gICAgICAgIHJhbmRvbU51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG4gICAgICAgIHJldHVybiByYW5kb21OdW1iZXI7XG4gICAgfSAvL2VuZCBmdW5jIFxuXG4gICAgLy/ojrflvpfpmo/mnLrpopzoibJcbiAgICBtYXRoLnJhbmRvbUNvbG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RyID0gXCIwMTIzNDU2Nzg5YWJjZGVmXCI7XG4gICAgICAgIHZhciBzID0gXCIjXCI7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCA2OyBqKyspIHMgKz0gc3RyLmNoYXJBdChNYXRoLnJhbmRvbSgpICogc3RyLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/pmo/mnLrmiZPkubHkuIDkuKrmlbDnu4RcbiAgICBtYXRoLnJhbmRvbVNvcnQgPSBmdW5jdGlvbiAoYXJ5KSB7XG4gICAgICAgIGlmIChhcnkgJiYgYXJ5Lmxlbmd0aCA+IDEpIGFyeS5zb3J0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgLSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICB9KTtcbiAgICB9IC8vZW5kIGZ1bmMgXG5cbiAgICAvL+maj+acuuato+i0n1xuICAgIG1hdGgucmFuZG9tUGx1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtMSA6IDE7XG4gICAgfSAvL2VuZCBmdW5jIFxuXG4gICAgLy/nrYnmr5TnvKnmlL4s5YiGY292ZXLmqKHlvI/lkoxjb250YWlu5qih5byPXG4gICAgbWF0aC5hdXRvU2l6ZSA9IGZ1bmN0aW9uIChhcnlOdW0sIGFyeU1heCwgc2NhbGVNb2RlKSB7XG4gICAgICAgIGlmIChzY2FsZU1vZGUgPT09IDEgfHwgc2NhbGVNb2RlID09PSAwKSBzY2FsZU1vZGUgPSBzY2FsZU1vZGUgPT09IDEgPyAnY292ZXInIDogJ2NvbnRhaW4nO1xuICAgICAgICBlbHNlIHNjYWxlTW9kZSA9IHNjYWxlTW9kZSB8fCAnY292ZXInO1xuICAgICAgICB2YXIgYXJ5Tm93ID0gW107XG4gICAgICAgIHZhciBhcnlSYXRlID0gYXJ5TnVtWzBdIC8gYXJ5TnVtWzFdO1xuICAgICAgICBhcnlOb3dbMF0gPSBhcnlNYXhbMF07XG4gICAgICAgIGFyeU5vd1sxXSA9IE1hdGgucm91bmQoYXJ5Tm93WzBdIC8gYXJ5UmF0ZSk7XG4gICAgICAgIGlmIChzY2FsZU1vZGUgPT0gJ2hlaWdodCcpIHtcbiAgICAgICAgICAgIGFyeU5vd1sxXSA9IGFyeU1heFsxXTtcbiAgICAgICAgICAgIGFyeU5vd1swXSA9IE1hdGgucm91bmQoYXJ5Tm93WzFdICogYXJ5UmF0ZSk7XG4gICAgICAgIH0gLy9lZG4gZWxzZSBpZlxuICAgICAgICBlbHNlIGlmIChzY2FsZU1vZGUgPT0gJ2NvbnRhaW4nKSB7XG4gICAgICAgICAgICBpZiAoYXJ5Tm93WzFdID4gYXJ5TWF4WzFdKSB7XG4gICAgICAgICAgICAgICAgYXJ5Tm93WzFdID0gYXJ5TWF4WzFdO1xuICAgICAgICAgICAgICAgIGFyeU5vd1swXSA9IE1hdGgucm91bmQoYXJ5Tm93WzFdICogYXJ5UmF0ZSk7XG4gICAgICAgICAgICB9IC8vZW5kIGlmXG4gICAgICAgIH0gLy9lZG4gZWxzZSBpZlxuICAgICAgICBlbHNlIGlmIChzY2FsZU1vZGUgPT0gJ2NvdmVyJykge1xuICAgICAgICAgICAgaWYgKGFyeU5vd1sxXSA8IGFyeU1heFsxXSkge1xuICAgICAgICAgICAgICAgIGFyeU5vd1sxXSA9IGFyeU1heFsxXTtcbiAgICAgICAgICAgICAgICBhcnlOb3dbMF0gPSBNYXRoLnJvdW5kKGFyeU5vd1sxXSAqIGFyeVJhdGUpO1xuICAgICAgICAgICAgfSAvL2VuZCBpZlxuICAgICAgICB9IC8vZWRuIGVsc2UgaWZcbiAgICAgICAgZWxzZSBpZiAoc2NhbGVNb2RlID09ICdmdWxsJykgYXJ5Tm93ID0gW2FyeU1heFswXSwgYXJ5TWF4WzFdXTtcbiAgICAgICAgcmV0dXJuIGFyeU5vdztcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIC8v57yT5Yqo5Ye95pWwXG4gICAgbWF0aC5lYXNlID0gZnVuY3Rpb24gKF9ub3csIF90YXIsIF9zcGVlZCwgX3NwYWNlKSB7XG4gICAgICAgIF9zcGVlZCA9IF9zcGVlZCB8fCAxMDtcbiAgICAgICAgX3NwYWNlID0gX3NwYWNlIHx8IDAuMTtcbiAgICAgICAgdmFyIF9kaXMgPSBfdGFyIC0gX25vdztcbiAgICAgICAgaWYgKE1hdGguYWJzKF9kaXMpID4gX3NwYWNlKSByZXR1cm4gX2RpcyAvIF9zcGVlZCArIF9ub3c7XG4gICAgICAgIGVsc2UgcmV0dXJuIF90YXI7XG4gICAgfSAvL2VuZCBmdW5jXG5cbiAgICAvL+inkuW6pui9rOW8p+W6plxuICAgIG1hdGgudG9SYWRpYW4gPSBmdW5jdGlvbiAoZGVncmVlKSB7XG4gICAgICAgIHJldHVybiBkZWdyZWUgKiBNYXRoLlBJIC8gMTgwO1xuICAgIH0gLy9lbmQgZnVuYyBcblxuICAgIC8v5byn5bqm6L2s6KeS5bqmXG4gICAgbWF0aC50b0RlZ3JlZSA9IGZ1bmN0aW9uIChyYWRpYW4pIHtcbiAgICAgICAgcmV0dXJuIHJhZGlhbiAvIE1hdGguUEkgKiAxODA7XG4gICAgfSAvL2VuZCBmdW5jIFxuXG4gICAgLy/ojrflvpcy54K55LmL6Ze055qE6Led56a7XG4gICAgbWF0aC5nZXREaXMgPSBmdW5jdGlvbiAoc291cmNlLCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIGxpbmVYID0gdGFyZ2V0WzBdIC0gc291cmNlWzBdO1xuICAgICAgICB2YXIgbGluZVkgPSB0YXJnZXRbMV0gLSBzb3VyY2VbMV07XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coTWF0aC5hYnMobGluZVgpLCAyKSArIE1hdGgucG93KE1hdGguYWJzKGxpbmVZKSwgMikpO1xuICAgIH0gLy9lbmQgZnVuYyBcblxuICAgIC8v6I635b6XMueCueS5i+mXtOeahOWkueinklxuICAgIG1hdGguZ2V0RGVnID0gZnVuY3Rpb24gKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBkZWc7XG4gICAgICAgIGlmIChzb3VyY2VbMF0gPT0gdGFyZ2V0WzBdICYmIHNvdXJjZVsxXSA9PSB0YXJnZXRbMV0pIHtcbiAgICAgICAgICAgIGRlZyA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZGlzWCA9IHRhcmdldFswXSAtIHNvdXJjZVswXTtcbiAgICAgICAgICAgIHZhciBkaXNZID0gdGFyZ2V0WzFdIC0gc291cmNlWzFdO1xuICAgICAgICAgICAgZGVnID0gTWF0aC5hdGFuKGRpc1kgLyBkaXNYKSAqIDE4MCAvIE1hdGguUEk7XG4gICAgICAgICAgICBpZiAoZGlzWCA8IDApIHtcbiAgICAgICAgICAgICAgICBkZWcgPSAxODAgKyBkZWc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkaXNZIDwgMCkge1xuICAgICAgICAgICAgICAgIGRlZyA9IDM2MCArIGRlZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAvL2VuZCBlbHNlXG4gICAgICAgIHJldHVybiBkZWc7XG4gICAgfSAvL2VuZCBmdW5jXG5cbiAgICAvL+a1i+ivlTLkuKpqcXVlcnnlr7nosaHmmK/lkKbph43lkIhcbiAgICBtYXRoLmhpdFRlc3QgPSBmdW5jdGlvbiAoc291cmNlLCB0YXJnZXQsIHNjYWxlWCwgc2NhbGVZKSB7XG4gICAgICAgIHNjYWxlWCA9IHNjYWxlWCAhPSBudWxsID8gc2NhbGVYIDogMTtcbiAgICAgICAgc2NhbGVZID0gc2NhbGVZICE9IG51bGwgPyBzY2FsZVkgOiAxO1xuICAgICAgICBpZiAoc291cmNlICYmIHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIHBvczEgPSBbc291cmNlLm9mZnNldCgpLmxlZnQgKyBzb3VyY2Uub3V0ZXJXaWR0aCgpICogc2NhbGVYICogMC41LCBzb3VyY2Uub2Zmc2V0KCkudG9wICsgc291cmNlLm91dGVySGVpZ2h0KCkgKiBzY2FsZVkgKiAwLjVdO1xuICAgICAgICAgICAgdmFyIHBvczIgPSBbdGFyZ2V0Lm9mZnNldCgpLmxlZnQgKyB0YXJnZXQub3V0ZXJXaWR0aCgpICogc2NhbGVYICogMC41LCB0YXJnZXQub2Zmc2V0KCkudG9wICsgdGFyZ2V0Lm91dGVySGVpZ2h0KCkgKiBzY2FsZVkgKiAwLjVdO1xuICAgICAgICAgICAgdmFyIGRpc1ggPSBNYXRoLmFicyhwb3MyWzBdIC0gcG9zMVswXSk7XG4gICAgICAgICAgICB2YXIgZGlzWSA9IE1hdGguYWJzKHBvczJbMV0gLSBwb3MxWzFdKTtcbiAgICAgICAgICAgIHZhciBkaXNYTWluID0gKHNvdXJjZS5vdXRlcldpZHRoKCkgKyB0YXJnZXQub3V0ZXJXaWR0aCgpKSAqIHNjYWxlWCAqIDAuNTtcbiAgICAgICAgICAgIHZhciBkaXNZTWluID0gKHNvdXJjZS5vdXRlckhlaWdodCgpICsgdGFyZ2V0Lm91dGVySGVpZ2h0KCkpICogc2NhbGVZICogMC41O1xuICAgICAgICAgICAgaWYgKGRpc1ggPD0gZGlzWE1pbiAmJiBkaXNZIDw9IGRpc1lNaW4pIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gLy9lbmQgaWZcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgfSAvL2VuZCBmdW5jXG5cbiAgICAvL+a1i+ivlTLkuKrluKZkYXRhKCkueCxkYXRhKCkueeeahGpxdWVyeeWvueixoeaYr+WQpumHjeWQiFxuICAgIG1hdGguaGl0T2JqZWN0ID0gZnVuY3Rpb24gKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgICAgIGlmIChzb3VyY2UgJiYgdGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgcG9zMSA9IFtzb3VyY2UuZGF0YSgpLnggKyBzb3VyY2Uub3V0ZXJXaWR0aCgpICogMC41LCBzb3VyY2UuZGF0YSgpLnkgKyBzb3VyY2Uub3V0ZXJIZWlnaHQoKSAqIDAuNV07XG4gICAgICAgICAgICB2YXIgcG9zMiA9IFt0YXJnZXQuZGF0YSgpLnggKyB0YXJnZXQub3V0ZXJXaWR0aCgpICogMC41LCB0YXJnZXQuZGF0YSgpLnkgKyB0YXJnZXQub3V0ZXJIZWlnaHQoKSAqIDAuNV07XG4gICAgICAgICAgICB2YXIgZGlzWCA9IE1hdGguYWJzKHBvczJbMF0gLSBwb3MxWzBdKTtcbiAgICAgICAgICAgIHZhciBkaXNZID0gTWF0aC5hYnMocG9zMlsxXSAtIHBvczFbMV0pO1xuICAgICAgICAgICAgdmFyIGRpc1hNaW4gPSAoc291cmNlLm91dGVyV2lkdGgoKSArIHRhcmdldC5vdXRlcldpZHRoKCkpICogMC41O1xuICAgICAgICAgICAgdmFyIGRpc1lNaW4gPSAoc291cmNlLm91dGVySGVpZ2h0KCkgKyB0YXJnZXQub3V0ZXJIZWlnaHQoKSkgKiAwLjU7XG4gICAgICAgICAgICBpZiAoZGlzWCA8PSBkaXNYTWluICYmIGRpc1kgPD0gZGlzWU1pbikgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBlbHNlIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSAvL2VuZCBpZlxuICAgICAgICBlbHNlIHJldHVybiBmYWxzZTtcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIC8v5rWL6K+V5LiA5Liq54K55ZKM5LiA5LiqRE9N5a+56LGh5piv5ZCm6YeN5ZCIXG4gICAgbWF0aC5oaXRQb2ludCA9IGZ1bmN0aW9uIChzb3VyY2UsIHRhcmdldCwgc2NhbGVYLCBzY2FsZVkpIHtcbiAgICAgICAgc2NhbGVYID0gc2NhbGVYICE9IG51bGwgPyBzY2FsZVggOiAxO1xuICAgICAgICBzY2FsZVkgPSBzY2FsZVkgIT0gbnVsbCA/IHNjYWxlWSA6IDE7XG4gICAgICAgIGlmIChzb3VyY2UgJiYgdGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgYXJlYSA9IFt0YXJnZXQub2Zmc2V0KCkubGVmdCwgdGFyZ2V0Lm9mZnNldCgpLmxlZnQgKyB0YXJnZXQub3V0ZXJXaWR0aCgpICogc2NhbGVYLCB0YXJnZXQub2Zmc2V0KCkudG9wLCB0YXJnZXQub2Zmc2V0KCkudG9wICsgdGFyZ2V0Lm91dGVySGVpZ2h0KCkgKiBzY2FsZVldO1xuICAgICAgICAgICAgaWYgKHNvdXJjZVswXSA+PSBhcmVhWzBdICYmIHNvdXJjZVswXSA8PSBhcmVhWzFdICYmIHNvdXJjZVsxXSA+PSBhcmVhWzJdICYmIHNvdXJjZVsxXSA8PSBhcmVhWzNdKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IC8vZW5kIGlmXG4gICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/miorkuIDkuKrmlbDnu4TovazmiJDmlbDlrZdcbiAgICBtYXRoLmFycmF5VG9JbnQgPSBmdW5jdGlvbiAoYXJ5KSB7XG4gICAgICAgIHZhciBudW0gPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyeS5sZW5ndGg7IGkrKykgbnVtICs9IGFyeVtpXSAqIE1hdGgucG93KDEwLCAoYXJ5Lmxlbmd0aCAtIDEgLSBpKSk7XG4gICAgICAgIHJldHVybiBudW07XG4gICAgfSAvL2VuZCBmdW5jXG5cbiAgICAvL+a3seW6puWkjeWItlxuICAgIG1hdGguZGVlcENsb25lID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBmdW5jdGlvbiBnZXRDbG9uZShfc291cmNlKSB7XG4gICAgICAgICAgICB2YXIgY2xvbmUgPSBtYXRoLmRhdGFUeXBlKF9zb3VyY2UpID09IFwiYXJyYXlcIiA/IFtdIDoge307XG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIF9zb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0aC5kYXRhVHlwZShfc291cmNlW2ldKSAhPSAnb2JqZWN0JyAmJiBtYXRoLmRhdGFUeXBlKF9zb3VyY2VbaV0pICE9ICdhcnJheScpIGNsb25lW2ldID0gX3NvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICBlbHNlIGNsb25lW2ldID0gZ2V0Q2xvbmUoX3NvdXJjZVtpXSk7XG4gICAgICAgICAgICB9IC8vZW5kIGZvclxuICAgICAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgICAgICB9IC8vZWRuIGZ1bmNcbiAgICAgICAgcmV0dXJuIGdldENsb25lKHNvdXJjZSk7XG4gICAgfSAvL2VuZCBmdW5jXG5cbiAgICAvL+WIpOaWreaYr+aVsOe7hOi/mOaYr+WvueixoVxuICAgIG1hdGguZGF0YVR5cGUgPSBmdW5jdGlvbiAobykge1xuICAgICAgICBpZiAodHlwZW9mIChvKSA9PT0gJ29iamVjdCcpIHJldHVybiBBcnJheSA9PSBvLmNvbnN0cnVjdG9yID8gJ2FycmF5JyA6ICdvYmplY3QnO1xuICAgICAgICBlbHNlIHJldHVybiBudWxsO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/ojrflvpdPYmplY3TnmoTplb/luqZcbiAgICBtYXRoLm9iamVjdExlbmd0aCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/lkIjlubYy5Liqb2JqZWN077yM6YeN5aSN57Si5byV55qE5YC855Sx5ZCO6ICF5pu/5o2i5YmN6ICFXG4gICAgbWF0aC5leHRlbmQgPSBmdW5jdGlvbiAob2JqMSwgb2JqMikge1xuICAgICAgICBpZiAob2JqMSAmJiB0eXBlb2YgKG9iajEpID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyhvYmoxKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAob2JqMiAmJiB0eXBlb2YgKG9iajIpID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyhvYmoyKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iajEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iajIuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7IC8v5pyJ55u45ZCM55qE5bGe5oCn5YiZ55Wl6L+HIFxuICAgICAgICAgICAgICAgICAgICBvYmoyW2tleV0gPSBvYmoxW2tleV07XG4gICAgICAgICAgICAgICAgfSAvL2VkbiBmb3JcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqMjtcbiAgICAgICAgICAgIH0gLy9lZG4gaWZcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIG9iajE7XG4gICAgICAgIH0gLy9lbmQgaWZcbiAgICAgICAgZWxzZSByZXR1cm4gb2JqMjtcbiAgICB9IC8vZWRuIGZ1bmNcblxuICAgIC8v5bCG5pWw5a2X5qC85byP5YyWXG4gICAgbWF0aC5mb3JtYXROdW1iZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDw9IDMpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgZWxzZSByZXR1cm4gdGhpcy5mb3JtYXROdW1iZXIodmFsdWUuc3Vic3RyKDAsIHZhbHVlLmxlbmd0aCAtIDMpKSArICcsJyArIHZhbHVlLnN1YnN0cih2YWx1ZS5sZW5ndGggLSAzKTtcbiAgICB9IC8vZW5kIGZ1bmNcblxuICAgIC8v5oiq5Y+W5bCP5pWw54K55ZCO5Yeg5L2N77yM6Z2e5Zub6IiN5LqU5YWlXG4gICAgbWF0aC5mbG9hdCA9IGZ1bmN0aW9uICh2YWx1ZSwgcHQpIHtcbiAgICAgICAgcHQgPSBwdCB8fCAyO1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCcuJykgPT0gLTEpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc3RyMSA9IHZhbHVlLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICB2YXIgc3RyMiA9IHN0cjFbMF0gKyAnLicgKyBzdHIxWzFdLnN1YnN0cigwLCBwdCk7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHN0cjIpO1xuICAgICAgICB9IC8vZW5kIGVsc2VcbiAgICB9IC8vZWRuIGZ1bmNcblxuICAgIC8v5bCG6aKc6Imy5YC86L2s5o2i5oiQcmdi5YC8XG4gICAgbWF0aC5jb2xvclRvUmdiID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIGlmIChjb2xvci5tYXRjaCgvXiM/KFswLTlhLWZdezZ9fFswLTlhLWZdezN9KSQvaSkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbG9yLnNsaWNlKGNvbG9yLmluZGV4T2YoJyMnKSArIDEpLFxuXHRcdFx0XHRpc1Nob3J0Tm90YXRpb24gPSAodmFsdWUubGVuZ3RoID09PSAzKSxcblx0XHRcdFx0ciA9IGlzU2hvcnROb3RhdGlvbiA/ICh2YWx1ZS5jaGFyQXQoMCkgKyB2YWx1ZS5jaGFyQXQoMCkpIDogdmFsdWUuc3Vic3RyaW5nKDAsIDIpLFxuXHRcdFx0XHRnID0gaXNTaG9ydE5vdGF0aW9uID8gKHZhbHVlLmNoYXJBdCgxKSArIHZhbHVlLmNoYXJBdCgxKSkgOiB2YWx1ZS5zdWJzdHJpbmcoMiwgNCksXG5cdFx0XHRcdGIgPSBpc1Nob3J0Tm90YXRpb24gPyAodmFsdWUuY2hhckF0KDIpICsgdmFsdWUuY2hhckF0KDIpKSA6IHZhbHVlLnN1YnN0cmluZyg0LCA2KTtcbiAgICAgICAgICAgIHJldHVybiBbcGFyc2VJbnQociwgMTYpLCBwYXJzZUludChnLCAxNiksIHBhcnNlSW50KGIsIDE2KV07XG4gICAgICAgIH0gLy9lbmQgaWZcbiAgICAgICAgZWxzZSByZXR1cm4gWzAsIDAsIDBdO1xuICAgIH0gLy9lbmQgZnVuY1xuXG4gICAgLy/ojrflj5bot6/lvoRcbiAgICBtYXRoLnBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICBpZiAocGF0aCAmJiBwYXRoICE9ICcnKSByZXR1cm4gcGF0aC5zdWJzdHIoMCwgcGF0aC5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy9lZG4gZnVuY1xuXG5cbiAgICAvKipcbiAgICAgKiDmoLnmja7pq5jlrr3mlbDlgLzorqHnrpfpq5jlrr3mr5TkvotcbiAgICAgKiBAbWV0aG9kXG4gICAgICogQHBhcmFtIHt3aWRjaH0g5a695bqm5pWw5YC8XG4gICAgICogQHBhcmFtIHtoZWlnaHR9IOmrmOW6puaVsOWAvFxuICAgICAqIEByZXR1cm4ge3Z3OnZofSDku6V2dzp2aOeahOW9ouW8j+i/lOWbnuavlOS+i+WAvFxuICAgICAqL1xuICAgIG1hdGguYXNwZWN0ID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdmFyIHZ3ID0gd2lkdGgsXG4gICAgICAgICAgICB2aCA9IGhlaWdodCxcbiAgICAgICAgICAgIHZyID0gZ2NkKHZ3LCB2aCk7XG4gICAgICAgIGZ1bmN0aW9uIGdjZChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gKGIgPT0gMCkgPyBhIDogZ2NkKGIsIGEgJSBiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdncgLyB2ciArICc6JyArIHZoIC8gdnI7XG4gICAgfSAvL2VkbiBmdW5jXG5cbiAgICByZXR1cm4gbWF0aDtcblxufSAvL2VuZCBpbXBvcnRcbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdGZhY3RvcnkoZ2xvYmFsKTtcbn0pKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cdGdsb2JhbC5pbWF0aCA9IGltcG9ydE1hdGgoKTtcbn0pIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTEE7QUFDQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVRBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVRBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBSkE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQU5BO0FBUUE7QUFUQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFQQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/base/math.js\n");

/***/ }),

/***/ "./src/js/base/monitor.js":
/*!********************************!*\
  !*** ./src/js/base/monitor.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("//2017.12.19\n//百度监测贴这里\n//var _hmt = _hmt || [];\n//(function() {\n//var hm = document.createElement(\"script\");\n//hm.src = \"https://hm.baidu.com/hm.js?42b71e30fab1dd283c8d6f451a4c011b\";\n//var s = document.getElementsByTagName(\"script\")[0]; \n//s.parentNode.insertBefore(hm, s);\n//})();\n//ga监测贴这里\n//(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n//(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n//m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n//})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n//ga('create', 'UA-55069627-11', 'auto');\n//ga('send', 'pageview');\nfunction importMonitor() {\n  var monitor = {};\n\n  monitor.add = function (options) {\n    if (options) {\n      var defaults = {\n        action: 'touchend',\n        category: 'default',\n        label: ''\n      };\n      var opts = $.extend(defaults, options);\n\n      if (opts.obj && opts.obj.length > 0) {\n        opts.obj.each(function (i, n) {\n          $(n).on(opts.action, {\n            action: opts.action,\n            category: opts.category,\n            label: opts.label + (i + 1)\n          }, event_bind);\n        });\n      } //end if\n      else {\n          opts.action = 'script';\n          event_bind(null, opts);\n        } //end else\n\n    } //end if\n\n  }; //end func\n\n\n  function event_bind(e, data) {\n    if (e) event_handler(e.data);else event_handler(data);\n  } //end func\n\n\n  function event_handler(data) {\n    if (window._hmt) window._hmt.push(['_trackEvent', data.category, data.action, data.label]);\n    if (window.ga) window.ga('send', 'event', data.category, data.action, data.label);\n    if (window.gtag) window.gtag('event', data.action, {\n      'event_category': data.category,\n      'event_label': data.label\n    });\n    if (window.console) window.console.log('事件：' + ' | ' + '类别：' + data.category + ' | ' + '标签：' + data.label);\n  } //end func\n\n\n  return monitor;\n} //end import\n\n\n(function (global, factory) {\n  factory(global);\n})(typeof window !== \"undefined\" ? window : this, function (global) {\n  global.imonitor = importMonitor();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvYmFzZS9tb25pdG9yLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2Jhc2UvbW9uaXRvci5qcz82YTdmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vMjAxNy4xMi4xOVxuXG4vL+eZvuW6puebkea1i+i0tOi/memHjFxuLy92YXIgX2htdCA9IF9obXQgfHwgW107XG4vLyhmdW5jdGlvbigpIHtcbi8vdmFyIGhtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbi8vaG0uc3JjID0gXCJodHRwczovL2htLmJhaWR1LmNvbS9obS5qcz80MmI3MWUzMGZhYjFkZDI4M2M4ZDZmNDUxYTRjMDExYlwiO1xuLy92YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpWzBdOyBcbi8vcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShobSwgcyk7XG4vL30pKCk7XG5cbi8vZ2Hnm5HmtYvotLTov5nph4xcbi8vKGZ1bmN0aW9uKGkscyxvLGcscixhLG0pe2lbJ0dvb2dsZUFuYWx5dGljc09iamVjdCddPXI7aVtyXT1pW3JdfHxmdW5jdGlvbigpe1xuLy8oaVtyXS5xPWlbcl0ucXx8W10pLnB1c2goYXJndW1lbnRzKX0saVtyXS5sPTEqbmV3IERhdGUoKTthPXMuY3JlYXRlRWxlbWVudChvKSxcbi8vbT1zLmdldEVsZW1lbnRzQnlUYWdOYW1lKG8pWzBdO2EuYXN5bmM9MTthLnNyYz1nO20ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSxtKVxuLy99KSh3aW5kb3csZG9jdW1lbnQsJ3NjcmlwdCcsJ2h0dHBzOi8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2FuYWx5dGljcy5qcycsJ2dhJyk7XG4vL2dhKCdjcmVhdGUnLCAnVUEtNTUwNjk2MjctMTEnLCAnYXV0bycpO1xuLy9nYSgnc2VuZCcsICdwYWdldmlldycpO1xuXG5mdW5jdGlvbiBpbXBvcnRNb25pdG9yKCkge1xuXHR2YXIgbW9uaXRvciA9IHt9O1xuXG5cdG1vbml0b3IuYWRkID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdGlmKG9wdGlvbnMpIHtcblx0XHRcdHZhciBkZWZhdWx0cyA9IHtcblx0XHRcdFx0YWN0aW9uOiAndG91Y2hlbmQnLFxuXHRcdFx0XHRjYXRlZ29yeTogJ2RlZmF1bHQnLFxuXHRcdFx0XHRsYWJlbDogJydcblx0XHRcdH07XG5cdFx0XHR2YXIgb3B0cyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblx0XHRcdGlmKG9wdHMub2JqICYmIG9wdHMub2JqLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0b3B0cy5vYmouZWFjaChmdW5jdGlvbihpLG4pIHtcblx0XHRcdFx0XHQkKG4pLm9uKG9wdHMuYWN0aW9uLCB7YWN0aW9uOm9wdHMuYWN0aW9uLGNhdGVnb3J5Om9wdHMuY2F0ZWdvcnksbGFiZWw6b3B0cy5sYWJlbCsoaSsxKX0sIGV2ZW50X2JpbmQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gLy9lbmQgaWZcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRvcHRzLmFjdGlvbiA9ICdzY3JpcHQnXG5cdFx0XHRcdGV2ZW50X2JpbmQobnVsbCwgb3B0cyk7XG5cdFx0XHR9IC8vZW5kIGVsc2Vcblx0XHR9IC8vZW5kIGlmXG5cdH0gLy9lbmQgZnVuY1xuXG5cdGZ1bmN0aW9uIGV2ZW50X2JpbmQoZSwgZGF0YSkge1xuXHRcdGlmKGUpIGV2ZW50X2hhbmRsZXIoZS5kYXRhKTtcblx0XHRlbHNlIGV2ZW50X2hhbmRsZXIoZGF0YSk7XG5cdH0gLy9lbmQgZnVuY1xuXG5cdGZ1bmN0aW9uIGV2ZW50X2hhbmRsZXIoZGF0YSkge1xuXHRcdGlmKHdpbmRvdy5faG10KSB3aW5kb3cuX2htdC5wdXNoKFsnX3RyYWNrRXZlbnQnLCBkYXRhLmNhdGVnb3J5LCBkYXRhLmFjdGlvbiwgZGF0YS5sYWJlbF0pO1xuXHRcdGlmKHdpbmRvdy5nYSkgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgZGF0YS5jYXRlZ29yeSwgZGF0YS5hY3Rpb24sIGRhdGEubGFiZWwpO1xuXHRcdGlmKHdpbmRvdy5ndGFnKSB3aW5kb3cuZ3RhZygnZXZlbnQnLCBkYXRhLmFjdGlvbiwge1xuXHRcdFx0J2V2ZW50X2NhdGVnb3J5JzogZGF0YS5jYXRlZ29yeSxcblx0XHRcdCdldmVudF9sYWJlbCc6IGRhdGEubGFiZWxcblx0XHR9KTtcblx0XHRpZih3aW5kb3cuY29uc29sZSkgd2luZG93LmNvbnNvbGUubG9nKCfkuovku7bvvJonICsgJyB8ICcgKyAn57G75Yir77yaJyArIGRhdGEuY2F0ZWdvcnkgKyAnIHwgJyArICfmoIfnrb7vvJonICsgZGF0YS5sYWJlbCk7XG5cdH0gLy9lbmQgZnVuY1xuXG5cdHJldHVybiBtb25pdG9yO1xufSAvL2VuZCBpbXBvcnRcbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdGZhY3RvcnkoZ2xvYmFsKTtcbn0pKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cdGdsb2JhbC5pbW9uaXRvciA9IGltcG9ydE1vbml0b3IoKTtcbn0pIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/base/monitor.js\n");

/***/ }),

/***/ "./src/js/index.js":
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("$(document).ready(function () {\n  //-----------------------------------------定义和初始化变量----------------------------------------\n  var articleBox = $('article');\n  var loadBox = $('aside#loadBox');\n  var windowScale = window.innerWidth / 750;\n  var UserInfo; //----------------------------------------页面初始化----------------------------------------\n\n  icom.init(init); //初始化\n\n  icom.screenScrollUnable(); //如果是一屏高度项目且在ios下，阻止屏幕默认滑动行为\n\n  articleBox.fadeTo(\"slow\", 1); // 显示页面\n\n  function init() {\n    requestAnimationFrame(function () {\n      if (window.Data) Data.OAuth.Login(userGetted);else userGetted({\n        errcode: 0,\n        errmsg: 'ok',\n        result: {\n          OpenID: 'xxxx-xxxx-xxxx',\n          Nickname: \"Nickname\",\n          HeadImage: 'https://wx.qlogo.cn/mmopen/vi_32/l1R1ORryeZaAU5pwF4iavDQc04aGPC6FdJOiccHHzTbyDBIjGDJjicib1sVOXgYLjkjt3NTks92TMybeGvPgw1mjPA/132'\n        }\n      });\n    });\n  } //edn func\n  //----------------------------------------微信用户登录验证----------------------------------------\t\n\n\n  function userGetted(res) {\n    if (res.errcode == 0) {\n      UserInfo = res.result;\n      UserInfo.HeadImage = UserInfo.HeadImage != '' ? UserInfo.HeadImage : 'https://wx.qlogo.cn/mmopen/vi_32/l1R1ORryeZaAU5pwF4iavDQc04aGPC6FdJOiccHHzTbyDBIjGDJjicib1sVOXgYLjkjt3NTks92TMybeGvPgw1mjPA/132';\n      console.log('UserInfo', UserInfo);\n      load_handler();\n    } //end if\n    else {\n        console.log(res.errmsg);\n      } //end else\n\n  } //end func\n  //----------------------------------------加载页面图片----------------------------------------\n\n\n  var loadPage = $('aside#loadPage');\n  var loadPagePer = loadPage.find('.per');\n\n  function load_handler() {\n    var loader = new PxLoader();\n    loader.addImage(__webpack_require__(/*! ../images/common/turn_phone.png */ \"./src/images/common/turn_phone.png\")); //实际加载进度\n\n    loader.addProgressListener(function (e) {\n      var per = Math.round(e.completedCount / e.totalCount * 50);\n      load_set(per);\n    });\n    loader.addCompletionListener(function () {\n      init_handler(); //\t\t\tload_timer(50);//模拟加载进度\n\n      loader = null;\n    });\n    loader.start();\n  } //end func\n  //模拟加载进度\n\n\n  function load_timer(per) {\n    per = per || 0;\n    per += imath.randomRange(1, 3);\n    per = per > 100 ? 100 : per;\n    load_set(per);\n    if (per == 100) setTimeout(init_handler, 200);else setTimeout(load_timer, 33, per);\n  } //edn func\n\n\n  function load_set(per) {\n    if (loadPagePer.length > 0) loadPagePer.html(per + '%');\n  } //edn func\n  //----------------------------------------页面逻辑代码----------------------------------------\n\n\n  function init_handler() {\n    console.log('init handler');\n    if (loadPage.length > 0) icom.fadeOut(loadPage, 500, function () {\n      loadPage.remove();\n    });\n    index_handler();\n  } //end func\n  //----------------------------------------index----------------------------------------\n\n\n  var indexBox = $('section.index');\n\n  function index_handler() {\n    console.log('index_handler');\n    indexBox.show();\n    imonitor.add({\n      label: '首页'\n    }); //添加监测\n  } //end func\n\n}); //end ready//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvaW5kZXguanM/N2JhNSJdLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t5a6a5LmJ5ZKM5Yid5aeL5YyW5Y+Y6YePLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHZhciBhcnRpY2xlQm94ID0gJCgnYXJ0aWNsZScpO1xuXHR2YXIgbG9hZEJveCA9ICQoJ2FzaWRlI2xvYWRCb3gnKTtcbiAgICB2YXIgd2luZG93U2NhbGUgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDc1MDtcbiAgICB2YXIgVXNlckluZm87XG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3pobXpnaLliJ3lp4vljJYtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgaWNvbS5pbml0KGluaXQpOy8v5Yid5aeL5YyWXG4gICAgaWNvbS5zY3JlZW5TY3JvbGxVbmFibGUoKTsvL+WmguaenOaYr+S4gOWxj+mrmOW6pumhueebruS4lOWcqGlvc+S4i++8jOmYu+atouWxj+W5lem7mOiupOa7keWKqOihjOS4ulxuICAgIGFydGljbGVCb3guZmFkZVRvKFwic2xvd1wiLCAxKTsvLyDmmL7npLrpobXpnaJcblxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe1xuXHRcdFx0aWYod2luZG93LkRhdGEpIERhdGEuT0F1dGguTG9naW4odXNlckdldHRlZCk7XG5cdFx0XHRlbHNlIHVzZXJHZXR0ZWQoe1xuXHRcdFx0XHRcdGVycmNvZGU6MCxcblx0XHRcdFx0XHRlcnJtc2c6J29rJyxcblx0XHRcdFx0XHRyZXN1bHQ6e1xuXHRcdFx0XHRcdFx0T3BlbklEOiAneHh4eC14eHh4LXh4eHgnLFxuXHRcdFx0XHRcdFx0Tmlja25hbWU6IFwiTmlja25hbWVcIixcblx0XHRcdFx0XHRcdEhlYWRJbWFnZTogJ2h0dHBzOi8vd3gucWxvZ28uY24vbW1vcGVuL3ZpXzMyL2wxUjFPUnJ5ZVphQVU1cHdGNGlhdkRRYzA0YUdQQzZGZEpPaWNjSEh6VGJ5REJJakdESmppY2liMXNWT1hnWUxqa2p0M05Ua3M5MlRNeWJlR3ZQZ3cxbWpQQS8xMzInXG5cdFx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XHRcbiAgICB9Ly9lZG4gZnVuY1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t5b6u5L+h55So5oi355m75b2V6aqM6K+BLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVx0XG4gICAgZnVuY3Rpb24gdXNlckdldHRlZChyZXMpIHtcblx0XHRpZiAocmVzLmVycmNvZGUgPT0gMCkge1xuICAgICAgICAgICAgVXNlckluZm8gPSByZXMucmVzdWx0O1xuICAgICAgICAgICAgVXNlckluZm8uSGVhZEltYWdlID0gVXNlckluZm8uSGVhZEltYWdlICE9ICcnID8gVXNlckluZm8uSGVhZEltYWdlIDogJ2h0dHBzOi8vd3gucWxvZ28uY24vbW1vcGVuL3ZpXzMyL2wxUjFPUnJ5ZVphQVU1cHdGNGlhdkRRYzA0YUdQQzZGZEpPaWNjSEh6VGJ5REJJakdESmppY2liMXNWT1hnWUxqa2p0M05Ua3M5MlRNeWJlR3ZQZ3cxbWpQQS8xMzInO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXJJbmZvJywgVXNlckluZm8pO1xuICAgICAgICAgICAgbG9hZF9oYW5kbGVyKCk7XG4gICAgICAgIH0vL2VuZCBpZlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5lcnJtc2cpO1xuICAgICAgICB9Ly9lbmQgZWxzZVxuICAgIH0vL2VuZCBmdW5jXG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3liqDovb3pobXpnaLlm77niYctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdmFyIGxvYWRQYWdlPSQoJ2FzaWRlI2xvYWRQYWdlJyk7XG5cdHZhciBsb2FkUGFnZVBlcj1sb2FkUGFnZS5maW5kKCcucGVyJyk7XG5cdFxuXHRmdW5jdGlvbiBsb2FkX2hhbmRsZXIoKSB7XG4gICAgICAgIHZhciBsb2FkZXIgPSBuZXcgUHhMb2FkZXIoKTtcbiAgICAgICAgbG9hZGVyLmFkZEltYWdlKHJlcXVpcmUoJy4uL2ltYWdlcy9jb21tb24vdHVybl9waG9uZS5wbmcnKSk7XG5cbiAgICAgICAgLy/lrp7pmYXliqDovb3ov5vluqZcblx0XHRsb2FkZXIuYWRkUHJvZ3Jlc3NMaXN0ZW5lcihmdW5jdGlvbihlKSB7XG5cdFx0XHR2YXIgcGVyPU1hdGgucm91bmQoZS5jb21wbGV0ZWRDb3VudC9lLnRvdGFsQ291bnQqNTApO1xuXHRcdFx0bG9hZF9zZXQocGVyKTtcblx0XHR9KTtcblxuICAgICAgICBsb2FkZXIuYWRkQ29tcGxldGlvbkxpc3RlbmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGluaXRfaGFuZGxlcigpO1xuLy9cdFx0XHRsb2FkX3RpbWVyKDUwKTsvL+aooeaLn+WKoOi9vei/m+W6plxuICAgICAgICAgICAgbG9hZGVyID0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICAgIGxvYWRlci5zdGFydCgpO1xuICAgIH0vL2VuZCBmdW5jXG5cbiAgICAvL+aooeaLn+WKoOi9vei/m+W6plxuICAgIGZ1bmN0aW9uIGxvYWRfdGltZXIocGVyKSB7XG4gICAgICAgIHBlciA9IHBlciB8fCAwO1xuICAgICAgICBwZXIgKz0gaW1hdGgucmFuZG9tUmFuZ2UoMSwgMyk7XG4gICAgICAgIHBlciA9IHBlciA+IDEwMCA/IDEwMCA6IHBlcjtcblx0XHRsb2FkX3NldChwZXIpO1xuICAgICAgICBpZiAocGVyID09IDEwMCkgc2V0VGltZW91dChpbml0X2hhbmRsZXIsIDIwMCk7XG4gICAgICAgIGVsc2Ugc2V0VGltZW91dChsb2FkX3RpbWVyLCAzMywgcGVyKTtcbiAgICB9Ly9lZG4gZnVuY1xuXHRcblx0ZnVuY3Rpb24gbG9hZF9zZXQocGVyKXtcblx0XHRpZihsb2FkUGFnZVBlci5sZW5ndGg+MCkgbG9hZFBhZ2VQZXIuaHRtbChwZXIrJyUnKTtcblx0fS8vZWRuIGZ1bmNcblxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLemhtemdoumAu+i+keS7o+eggS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBpbml0X2hhbmRsZXIoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdpbml0IGhhbmRsZXInKTtcblx0XHRpZihsb2FkUGFnZS5sZW5ndGg+MCkgaWNvbS5mYWRlT3V0KGxvYWRQYWdlLDUwMCxmdW5jdGlvbigpe2xvYWRQYWdlLnJlbW92ZSgpO30pO1xuXHRcdGluZGV4X2hhbmRsZXIoKTtcbiAgICB9Ly9lbmQgZnVuY1xuXHRcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0taW5kZXgtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdmFyIGluZGV4Qm94ID0gJCgnc2VjdGlvbi5pbmRleCcpO1xuXG4gICAgZnVuY3Rpb24gaW5kZXhfaGFuZGxlcigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2luZGV4X2hhbmRsZXInKTtcbiAgICAgICAgaW5kZXhCb3guc2hvdygpO1xuICAgICAgICBpbW9uaXRvci5hZGQoe2xhYmVsOifpppbpobUnfSk7Ly/mt7vliqDnm5HmtYtcbiAgICB9Ly9lbmQgZnVuY1xuXG59KTsvL2VuZCByZWFkeSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBU0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/index.js\n");

/***/ })

/******/ });